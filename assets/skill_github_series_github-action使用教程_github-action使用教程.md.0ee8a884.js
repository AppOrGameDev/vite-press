import{_ as s,o as a,c as n,U as p}from"./chunks/framework.c0c21d38.js";const l="/vite-press/assets/Snipaste_2023-12-02_18-29-03.35699555.jpg",e="/vite-press/assets/Snipaste_2023-12-02_18-32-49.6555a766.jpg",o="/vite-press/assets/Snipaste_2023-12-02_18-35-34.b5402e21.jpg",r="/vite-press/assets/Snipaste_2023-12-02_18-36-43.920c4928.jpg",t="/vite-press/assets/Snipaste_2023-12-02_17-20-06.c9b8effa.jpg",c="/vite-press/assets/Snipaste_2023-12-02_18-43-03.f03442ad.jpg",_=JSON.parse('{"title":"github action使用教程","description":"github action使用教程","frontmatter":{"title":"github action使用教程","description":"github action使用教程","category":"visio","order":0,"tags":["Visio"]},"headers":[],"relativePath":"skill/github_series/github-action使用教程/github-action使用教程.md","filePath":"skill/github_series/github-action使用教程/github-action使用教程.md","lastUpdated":1701585869000}'),i={name:"skill/github_series/github-action使用教程/github-action使用教程.md"},y=p(`<h1 id="自动部署vite-press" tabindex="-1">自动部署vite-press <a class="header-anchor" href="#自动部署vite-press" aria-label="Permalink to &quot;自动部署vite-press&quot;">​</a></h1><h2 id="需求目标" tabindex="-1">需求目标 <a class="header-anchor" href="#需求目标" aria-label="Permalink to &quot;需求目标&quot;">​</a></h2><ul><li>[x] 使用GitHub Pages部署vite-press网站</li></ul><h2 id="交付结果" tabindex="-1">交付结果 <a class="header-anchor" href="#交付结果" aria-label="Permalink to &quot;交付结果&quot;">​</a></h2><p>网站 <a href="https://apporgamedev.github.io/vite-press/" target="_blank" rel="noreferrer">https://apporgamedev.github.io/vite-press/</a></p><p>代码仓 <a href="https://github.com/AppOrGameDev/vite-press" target="_blank" rel="noreferrer">https://github.com/AppOrGameDev/vite-press</a></p><h2 id="实现过程" tabindex="-1">实现过程 <a class="header-anchor" href="#实现过程" aria-label="Permalink to &quot;实现过程&quot;">​</a></h2><h3 id="配合github-action实现自动部署" tabindex="-1">配合github action实现自动部署 <a class="header-anchor" href="#配合github-action实现自动部署" aria-label="Permalink to &quot;配合github action实现自动部署&quot;">​</a></h3><p><strong style="color:red;">关键词: peaceiris/actions-gh-pages@v3配合GitHub Token自动部署</strong></p><p>参考资料: <a href="https://juejin.cn/post/7129540012009816100" target="_blank" rel="noreferrer">https://juejin.cn/post/7129540012009816100</a></p><h3 id="具体配置" tabindex="-1">具体配置 <a class="header-anchor" href="#具体配置" aria-label="Permalink to &quot;具体配置&quot;">​</a></h3><p><code>.github/workflows/deploy.yml</code></p><div class="language-yml line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Deploy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FF9CAC;">on</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">push</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">branches</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docs-deploy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">jobs</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">github-branch-update</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">runs-on</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ubuntu-latest</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">steps</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Checkout the repository</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">actions/checkout@v3</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">with</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">fetch-depth</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Use pnpm</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pnpm/action-setup@v2</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">with</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">8</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Use node</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">actions/setup-node@v3</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">with</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">node-version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">16</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">cache</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pnpm</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Install dependencies</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">run</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pnpm install --frozen-lockfile</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Build</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">run</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pnpm docs:build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Update the gh-pages branch</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">peaceiris/actions-gh-pages@v3</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">with</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">github_token</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">\${{ secrets.VITE_PRESS_GITHUB_TOKEN }}</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">publish_dir</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">docs/.vitepress/dist</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">user_name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">\${{ secrets.MY_USER_NAME }}</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">user_email</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">\${{ secrets.MY_USER_EMAIL }}</span></span>
<span class="line"><span style="color:#A6ACCD;">          </span><span style="color:#F07178;">commit_message</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vite-press更新就自动部署</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h5 id="设置参数配置项" tabindex="-1">设置参数配置项 <a class="header-anchor" href="#设置参数配置项" aria-label="Permalink to &quot;设置参数配置项&quot;">​</a></h5><p><img src="`+l+'" alt=""></p><h5 id="设置github-token" tabindex="-1">设置GitHub Token <a class="header-anchor" href="#设置github-token" aria-label="Permalink to &quot;设置GitHub Token&quot;">​</a></h5><p><img src="'+e+'" alt=""></p><p><img src="'+o+'" alt=""></p><p><img src="'+r+'" alt=""></p><h6 id="github-token-需要repo-workflow-admin-repo-hook这三项权限" tabindex="-1">GitHub Token 需要<code>repo,workflow,admin_repo_hook</code>这三项权限 <a class="header-anchor" href="#github-token-需要repo-workflow-admin-repo-hook这三项权限" aria-label="Permalink to &quot;GitHub Token 需要`repo,workflow,admin_repo_hook`这三项权限&quot;">​</a></h6><p><img src="'+t+'" alt=""></p><h4 id="如何设置用于显示github-pages的部署分支" tabindex="-1">如何设置用于显示GitHub Pages的部署分支 <a class="header-anchor" href="#如何设置用于显示github-pages的部署分支" aria-label="Permalink to &quot;如何设置用于显示GitHub Pages的部署分支&quot;">​</a></h4><p><img src="'+c+'" alt=""></p>',23),D=[y];function b(C,u,A,h,F,m){return a(),n("div",null,D)}const g=s(i,[["render",b]]);export{_ as __pageData,g as default};
