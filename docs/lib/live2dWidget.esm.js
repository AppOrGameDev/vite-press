var ne;(function(c){var i,s=function(){function V(){}return V.getVersion=function(){return D.ccall("csmGetVersion","number",[],[])},V.getLatestMocVersion=function(){return D.ccall("csmGetLatestMocVersion","number",[],[])},V.getMocVersion=function(A,G){return D.ccall("csmGetMocVersion","number",["number","number"],[A,G])},V.getSizeofModel=function(A){return D.ccall("csmGetSizeofModel","number",["number"],[A])},V.reviveMocInPlace=function(A,G){return D.ccall("csmReviveMocInPlace","number",["number","number"],[A,G])},V.initializeModelInPlace=function(A,G,W){return D.ccall("csmInitializeModelInPlace","number",["number","number","number"],[A,G,W])},V.hasMocConsistency=function(A,G){return D.ccall("csmHasMocConsistency","number",["number","number"],[A,G])},V.getParameterCount=function(A){return D.ccall("csmGetParameterCount","number",["number"],[A])},V.getParameterIds=function(A){return D.ccall("csmGetParameterIds","number",["number"],[A])},V.getParameterMinimumValues=function(A){return D.ccall("csmGetParameterMinimumValues","number",["number"],[A])},V.getParameterTypes=function(A){return D.ccall("csmGetParameterTypes","number",["number"],[A])},V.getParameterMaximumValues=function(A){return D.ccall("csmGetParameterMaximumValues","number",["number"],[A])},V.getParameterDefaultValues=function(A){return D.ccall("csmGetParameterDefaultValues","number",["number"],[A])},V.getParameterValues=function(A){return D.ccall("csmGetParameterValues","number",["number"],[A])},V.getParameterKeyCounts=function(A){return D.ccall("csmGetParameterKeyCounts","number",["number"],[A])},V.getParameterKeyValues=function(A){return D.ccall("csmGetParameterKeyValues","number",["number"],[A])},V.getPartCount=function(A){return D.ccall("csmGetPartCount","number",["number"],[A])},V.getPartIds=function(A){return D.ccall("csmGetPartIds","number",["number"],[A])},V.getPartOpacities=function(A){return D.ccall("csmGetPartOpacities","number",["number"],[A])},V.getPartParentPartIndices=function(A){return D.ccall("csmGetPartParentPartIndices","number",["number"],[A])},V.getDrawableCount=function(A){return D.ccall("csmGetDrawableCount","number",["number"],[A])},V.getDrawableIds=function(A){return D.ccall("csmGetDrawableIds","number",["number"],[A])},V.getDrawableConstantFlags=function(A){return D.ccall("csmGetDrawableConstantFlags","number",["number"],[A])},V.getDrawableDynamicFlags=function(A){return D.ccall("csmGetDrawableDynamicFlags","number",["number"],[A])},V.getDrawableTextureIndices=function(A){return D.ccall("csmGetDrawableTextureIndices","number",["number"],[A])},V.getDrawableDrawOrders=function(A){return D.ccall("csmGetDrawableDrawOrders","number",["number"],[A])},V.getDrawableRenderOrders=function(A){return D.ccall("csmGetDrawableRenderOrders","number",["number"],[A])},V.getDrawableOpacities=function(A){return D.ccall("csmGetDrawableOpacities","number",["number"],[A])},V.getDrawableMaskCounts=function(A){return D.ccall("csmGetDrawableMaskCounts","number",["number"],[A])},V.getDrawableMasks=function(A){return D.ccall("csmGetDrawableMasks","number",["number"],[A])},V.getDrawableVertexCounts=function(A){return D.ccall("csmGetDrawableVertexCounts","number",["number"],[A])},V.getDrawableVertexPositions=function(A){return D.ccall("csmGetDrawableVertexPositions","number",["number"],[A])},V.getDrawableVertexUvs=function(A){return D.ccall("csmGetDrawableVertexUvs","number",["number"],[A])},V.getDrawableIndexCounts=function(A){return D.ccall("csmGetDrawableIndexCounts","number",["number"],[A])},V.getDrawableIndices=function(A){return D.ccall("csmGetDrawableIndices","number",["number"],[A])},V.getDrawableMultiplyColors=function(A){return D.ccall("csmGetDrawableMultiplyColors","number",["number"],[A])},V.getDrawableScreenColors=function(A){return D.ccall("csmGetDrawableScreenColors","number",["number"],[A])},V.getDrawableParentPartIndices=function(A){return D.ccall("csmGetDrawableParentPartIndices","number",["number"],[A])},V.mallocMoc=function(A){return D.ccall("csmMallocMoc","number",["number"],[A])},V.mallocModelAndInitialize=function(A){return D.ccall("csmMallocModelAndInitialize","number",["number"],[A])},V.malloc=function(A){return D.ccall("csmMalloc","number",["number"],[A])},V.setLogFunction=function(A){D.ccall("csmSetLogFunction",null,["number"],[A])},V.updateModel=function(A){D.ccall("csmUpdateModel",null,["number"],[A])},V.readCanvasInfo=function(A,G,W,q){D.ccall("csmReadCanvasInfo",null,["number","number","number","number"],[A,G,W,q])},V.resetDrawableDynamicFlags=function(A){D.ccall("csmResetDrawableDynamicFlags",null,["number"],[A])},V.free=function(A){D.ccall("csmFree",null,["number"],[A])},V.initializeAmountOfMemory=function(A){D.ccall("csmInitializeAmountOfMemory",null,["number"],[A])},V}(),I=(c.AlignofMoc=64,c.AlignofModel=16,c.MocVersion_Unknown=0,c.MocVersion_30=1,c.MocVersion_33=2,c.MocVersion_40=3,c.MocVersion_42=4,c.ParameterType_Normal=0,c.ParameterType_BlendShape=1,function(){function V(){}return V.csmGetVersion=function(){return s.getVersion()},V.csmGetLatestMocVersion=function(){return s.getLatestMocVersion()},V.csmGetMocVersion=function(A,G){return s.getMocVersion(A._ptr,G.byteLength)},V}()),I=(c.Version=I,function(){function V(){}return V.csmSetLogFunction=function(A){V.logFunction=A,A=D.addFunction(V.wrapLogFunction,"vi"),s.setLogFunction(A)},V.csmGetLogFunction=function(){return V.logFunction},V.wrapLogFunction=function(A){A=D.UTF8ToString(A),V.logFunction(A)},V}()),I=(c.Logging=I,function(){function V(A){var G=s.mallocMoc(A.byteLength);G&&(new Uint8Array(D.HEAPU8.buffer,G,A.byteLength).set(new Uint8Array(A)),this._ptr=s.reviveMocInPlace(G,A.byteLength),this._ptr||s.free(G))}return V.prototype.hasMocConsistency=function(A){var G=s.mallocMoc(A.byteLength);if(G)return new Uint8Array(D.HEAPU8.buffer,G,A.byteLength).set(new Uint8Array(A)),A=s.hasMocConsistency(G,A.byteLength),s.free(G),A},V.fromArrayBuffer=function(A){return A?(A=new V(A),A._ptr?A:null):null},V.prototype._release=function(){s.free(this._ptr),this._ptr=0},V}()),I=(c.Moc=I,function(){function V(A){this._ptr=s.mallocModelAndInitialize(A._ptr),this._ptr&&(this.parameters=new m(this._ptr),this.parts=new w(this._ptr),this.drawables=new T(this._ptr),this.canvasinfo=new o(this._ptr))}return V.fromMoc=function(A){return A=new V(A),A._ptr?A:null},V.prototype.update=function(){s.updateModel(this._ptr)},V.prototype.release=function(){s.free(this._ptr),this._ptr=0},V}()),o=(c.Model=I,function(V){var A,G,W,q,et,K,gt;V&&(W=(A=new Float32Array(2)).length*A.BYTES_PER_ELEMENT,G=s.malloc(W),(G=new Uint8Array(D.HEAPU8.buffer,G,W)).set(new Uint8Array(A.buffer)),et=(W=new Float32Array(2)).length*W.BYTES_PER_ELEMENT,q=s.malloc(et),(q=new Uint8Array(D.HEAPU8.buffer,q,et)).set(new Uint8Array(W.buffer)),K=(et=new Float32Array(1)).length*et.BYTES_PER_ELEMENT,gt=s.malloc(K),(gt=new Uint8Array(D.HEAPU8.buffer,gt,K)).set(new Uint8Array(et.buffer)),s.readCanvasInfo(V,G.byteOffset,q.byteOffset,gt.byteOffset),A=new Float32Array(G.buffer,G.byteOffset,G.length),W=new Float32Array(q.buffer,q.byteOffset,q.length),et=new Float32Array(gt.buffer,gt.byteOffset,gt.length),this.CanvasWidth=A[0],this.CanvasHeight=A[1],this.CanvasOriginX=W[0],this.CanvasOriginY=W[1],this.PixelsPerUnit=et[0],s.free(G.byteOffset),s.free(q.byteOffset),s.free(gt.byteOffset))}),m=(c.CanvasInfo=o,function(V){this.count=s.getParameterCount(V),A=s.getParameterCount(V),this.ids=new Array(A);for(var A,G,W=new Uint32Array(D.HEAPU32.buffer,s.getParameterIds(V),A),q=0;q<W.length;q++)this.ids[q]=D.UTF8ToString(W[q]);A=s.getParameterCount(V),this.minimumValues=new Float32Array(D.HEAPF32.buffer,s.getParameterMinimumValues(V),A),A=s.getParameterCount(V),this.types=new Int32Array(D.HEAP32.buffer,s.getParameterTypes(V),A),A=s.getParameterCount(V),this.maximumValues=new Float32Array(D.HEAPF32.buffer,s.getParameterMaximumValues(V),A),A=s.getParameterCount(V),this.defaultValues=new Float32Array(D.HEAPF32.buffer,s.getParameterDefaultValues(V),A),A=s.getParameterCount(V),this.values=new Float32Array(D.HEAPF32.buffer,s.getParameterValues(V),A),A=s.getParameterCount(V),this.keyCounts=new Int32Array(D.HEAP32.buffer,s.getParameterKeyCounts(V),A),A=s.getParameterCount(V),G=new Int32Array(D.HEAP32.buffer,s.getParameterKeyCounts(V),A),this.keyValues=new Array(A);for(var et=new Uint32Array(D.HEAPU32.buffer,s.getParameterKeyValues(V),A),q=0;q<et.length;q++)this.keyValues[q]=new Float32Array(D.HEAPF32.buffer,et[q],G[q])}),w=(c.Parameters=m,function(V){this.count=s.getPartCount(V),A=s.getPartCount(V),this.ids=new Array(A);for(var A,G=new Uint32Array(D.HEAPU32.buffer,s.getPartIds(V),A),W=0;W<G.length;W++)this.ids[W]=D.UTF8ToString(G[W]);A=s.getPartCount(V),this.opacities=new Float32Array(D.HEAPF32.buffer,s.getPartOpacities(V),A),A=s.getPartCount(V),this.parentIndices=new Int32Array(D.HEAP32.buffer,s.getPartParentPartIndices(V),A)}),T=(c.Parts=w,function(){function V(A){this._modelPtr=A;for(var G,W=null,q=(this.count=s.getDrawableCount(A),G=s.getDrawableCount(A),this.ids=new Array(G),new Uint32Array(D.HEAPU32.buffer,s.getDrawableIds(A),G)),et=0;et<q.length;et++)this.ids[et]=D.UTF8ToString(q[et]);G=s.getDrawableCount(A),this.constantFlags=new Uint8Array(D.HEAPU8.buffer,s.getDrawableConstantFlags(A),G),G=s.getDrawableCount(A),this.dynamicFlags=new Uint8Array(D.HEAPU8.buffer,s.getDrawableDynamicFlags(A),G),G=s.getDrawableCount(A),this.textureIndices=new Int32Array(D.HEAP32.buffer,s.getDrawableTextureIndices(A),G),G=s.getDrawableCount(A),this.drawOrders=new Int32Array(D.HEAP32.buffer,s.getDrawableDrawOrders(A),G),G=s.getDrawableCount(A),this.renderOrders=new Int32Array(D.HEAP32.buffer,s.getDrawableRenderOrders(A),G),G=s.getDrawableCount(A),this.opacities=new Float32Array(D.HEAPF32.buffer,s.getDrawableOpacities(A),G),G=s.getDrawableCount(A),this.maskCounts=new Int32Array(D.HEAP32.buffer,s.getDrawableMaskCounts(A),G),G=s.getDrawableCount(A),this.vertexCounts=new Int32Array(D.HEAP32.buffer,s.getDrawableVertexCounts(A),G),G=s.getDrawableCount(A),this.indexCounts=new Int32Array(D.HEAP32.buffer,s.getDrawableIndexCounts(A),G),G=s.getDrawableCount(A),this.multiplyColors=new Float32Array(D.HEAPF32.buffer,s.getDrawableMultiplyColors(A),4*G),G=s.getDrawableCount(A),this.screenColors=new Float32Array(D.HEAPF32.buffer,s.getDrawableScreenColors(A),4*G),G=s.getDrawableCount(A),this.parentPartIndices=new Int32Array(D.HEAP32.buffer,s.getDrawableParentPartIndices(A),G),G=s.getDrawableCount(A),W=new Int32Array(D.HEAP32.buffer,s.getDrawableMaskCounts(A),G),this.masks=new Array(G);for(var K=new Uint32Array(D.HEAPU32.buffer,s.getDrawableMasks(A),G),et=0;et<K.length;et++)this.masks[et]=new Int32Array(D.HEAP32.buffer,K[et],W[et]);G=s.getDrawableCount(A),W=new Int32Array(D.HEAP32.buffer,s.getDrawableVertexCounts(A),G),this.vertexPositions=new Array(G);for(var gt=new Uint32Array(D.HEAPU32.buffer,s.getDrawableVertexPositions(A),G),et=0;et<gt.length;et++)this.vertexPositions[et]=new Float32Array(D.HEAPF32.buffer,gt[et],2*W[et]);G=s.getDrawableCount(A),W=new Int32Array(D.HEAP32.buffer,s.getDrawableVertexCounts(A),G),this.vertexUvs=new Array(G);for(var mt=new Uint32Array(D.HEAPU32.buffer,s.getDrawableVertexUvs(A),G),et=0;et<mt.length;et++)this.vertexUvs[et]=new Float32Array(D.HEAPF32.buffer,mt[et],2*W[et]);G=s.getDrawableCount(A),W=new Int32Array(D.HEAP32.buffer,s.getDrawableIndexCounts(A),G),this.indices=new Array(G);for(var dt=new Uint32Array(D.HEAPU32.buffer,s.getDrawableIndices(A),G),et=0;et<dt.length;et++)this.indices[et]=new Uint16Array(D.HEAPU16.buffer,dt[et],W[et])}return V.prototype.resetDynamicFlags=function(){s.resetDrawableDynamicFlags(this._modelPtr)},V}()),I=(c.Drawables=T,function(){function V(){}return V.hasBlendAdditiveBit=function(A){return(1&A)==1},V.hasBlendMultiplicativeBit=function(A){return(2&A)==2},V.hasIsDoubleSidedBit=function(A){return(4&A)==4},V.hasIsInvertedMaskBit=function(A){return(8&A)==8},V.hasIsVisibleBit=function(A){return(1&A)==1},V.hasVisibilityDidChangeBit=function(A){return(2&A)==2},V.hasOpacityDidChangeBit=function(A){return(4&A)==4},V.hasDrawOrderDidChangeBit=function(A){return(8&A)==8},V.hasRenderOrderDidChangeBit=function(A){return(16&A)==16},V.hasVertexPositionsDidChangeBit=function(A){return(32&A)==32},V.hasBlendColorDidChangeBit=function(A){return(64&A)==64},V}()),I=(c.Utils=I,function(){function V(){}return V.initializeAmountOfMemory=function(A){16777216<A&&s.initializeAmountOfMemory(A)},V}()),N=(c.Memory=I,i=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0,function(V){V=V||{};var A,G,Ce={};for(G in A=A||(V!==void 0?V:{}))A.hasOwnProperty(G)&&(Ce[G]=A[G]);var W,q,et,K,gt,dt=!1,mt=typeof window=="object",ut=typeof importScripts=="function",dt=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&!mt&&!ut,ct=!mt&&!dt&&!ut,Et="",Nt=(dt?(Et=__dirname+"/",K=function(j,$){var ot=ei(j);return ot||(q=q||require("fs"),j=(et=et||require("path")).normalize(j),ot=q.readFileSync(j)),$?ot:ot.toString()},gt=function(j){return ci((j=(j=K(j,!0)).buffer?j:new Uint8Array(j)).buffer),j},1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),process.on("uncaughtException",function(j){throw j}),process.on("unhandledRejection",ji),A.inspect=function(){return"[Emscripten Module object]"}):ct?(typeof read<"u"&&(K=function(j){var $=ei(j);return $?Gr($):read(j)}),gt=function(j){var $;if(!($=ei(j))){if(typeof readbuffer=="function")return new Uint8Array(readbuffer(j));ci(typeof($=read(j,"binary"))=="object")}return $},typeof print<"u"&&((console=typeof console>"u"?{}:console).log=print,console.warn=console.error=typeof printErr<"u"?printErr:print)):(mt||ut)&&(ut?Et=self.location.href:document.currentScript&&(Et=document.currentScript.src),Et=(Et=i||Et).indexOf("blob:")!==0?Et.substr(0,Et.lastIndexOf("/")+1):"",K=function(j){try{var $=new XMLHttpRequest;return $.open("GET",j,!1),$.send(null),$.responseText}catch(ot){if(j=ei(j))return Gr(j);throw ot}},ut&&(gt=function(j){try{var $=new XMLHttpRequest;return $.open("GET",j,!1),$.responseType="arraybuffer",$.send(null),new Uint8Array($.response)}catch(ot){if(j=ei(j))return j;throw ot}}),W=function(j){var $=Te,ot=m0,J=new XMLHttpRequest;J.open("GET",$,!0),J.responseType="arraybuffer",J.onload=function(){var $t;J.status==200||J.status==0&&J.response?ot(J.response):($t=ei($))?ot($t.buffer):j()},J.onerror=j,J.send(null)}),A.print||console.log.bind(console)),de=A.printErr||console.warn.bind(console);for(G in Ce)Ce.hasOwnProperty(G)&&(A[G]=Ce[G]);var Ce=null,he=Array(1),Ye=0,Gi=!1;function ci(j,$){j||ji("Assertion failed: "+$)}var wi,_0,ti,Xi,Vr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function Rr(j,$,ot){var J=$+ot;for(ot=$;j[ot]&&!(J<=ot);)++ot;if(16<ot-$&&j.subarray&&Vr)return Vr.decode(j.subarray($,ot));for(J="";$<ot;){var $t,t,Rt=j[$++];128&Rt?($t=63&j[$++],(224&Rt)==192?J+=String.fromCharCode((31&Rt)<<6|$t):(t=63&j[$++],(Rt=(240&Rt)==224?(15&Rt)<<12|$t<<6|t:(7&Rt)<<18|$t<<12|t<<6|63&j[$++])<65536?J+=String.fromCharCode(Rt):(Rt-=65536,J+=String.fromCharCode(55296|Rt>>10,56320|1023&Rt)))):J+=String.fromCharCode(Rt)}return J}function Tr(j,$){return j?Rr(ti,j,$):""}function Fr(j){return 0<j%16777216&&(j+=16777216-j%16777216),j}function br(j){wi=j,A.HEAP8=_0=new Int8Array(j),A.HEAP16=new Int16Array(j),A.HEAP32=Xi=new Int32Array(j),A.HEAPU8=ti=new Uint8Array(j),A.HEAPU16=new Uint16Array(j),A.HEAPU32=new Uint32Array(j),A.HEAPF32=new Float32Array(j),A.HEAPF64=new Float64Array(j)}function d0(j){for(;0<j.length;){var $,ot=j.shift();typeof ot=="function"?ot():typeof($=ot.C)=="number"?ot.w===void 0?A.dynCall_v($):A.dynCall_vi($,ot.w):$(ot.w===void 0?null:ot.w)}}typeof TextDecoder<"u"&&new TextDecoder("utf-16le"),mt=A.TOTAL_MEMORY||16777216,mt=(wi=A.buffer||new ArrayBuffer(mt)).byteLength,br(wi),Xi[1156]=5247712;var Er=[],mn=[],pn=[],Dr=[],fi=(Math.imul&&Math.imul(4294967295,5)===-5||(Math.imul=function(j,$){var ot=65535&j,J=65535&$;return ot*J+((j>>>16)*J+ot*($>>>16)<<16)|0}),Math.clz32||(Math.clz32=function(j){var $=32,ot=j>>16;return ot&&($-=16,j=ot),(ot=j>>8)&&($-=8,j=ot),(ot=j>>4)&&($-=4,j=ot),(ot=j>>2)&&($-=2,j=ot),j>>1?$-2:$-j}),Math.trunc||(Math.trunc=function(j){return j<0?Math.ceil(j):Math.floor(j)}),0),H0=null,Yi=null;function ji(j){throw A.onAbort&&A.onAbort(j),Nt(j),de(j),Gi=!0,"abort("+j+"). Build with -s ASSERTIONS=1 for more info."}A.preloadedImages={},A.preloadedAudios={};var Te=null,Hi="data:application/octet-stream;base64,";function Lr(j){return j.replace(/\b__Z[\w\d_]+/g,function($){return $==$?$:$+" ["+$+"]"})}function Or(){var j=Error();if(!j.stack){try{throw Error(0)}catch($){j=$}if(!j.stack)return"(no stack trace available)"}return j.stack.toString()}var W0=[null,[],[]];function Z0(j,$){var ot=W0[j];$===0||$===10?((j===1?Nt:de)(Rr(ot,0)),ot.length=0):ot.push($)}function Ur(j,$,ot,J){try{for(var $t=0,t=0;t<ot;t++){for(var Rt=Xi[$+8*t>>2],ce=Xi[$+(8*t+4)>>2],v=0;v<ce;v++)Z0(j,ti[Rt+v]);$t+=ce}return Xi[J>>2]=$t,0}catch(Xt){return typeof FS<"u"&&Xt instanceof FS.A||ji(Xt),Xt.B}}function Nr(){return _0.length}function zr(j){try{var $=new ArrayBuffer(j);if($.byteLength==j)return new Int8Array($).set(_0),xn($),br($),1}catch{}}var yn=!(Te="data:application/octet-stream;base64,AAAAAAAAAAARAAoAERERAAAAAAUAAAAAAAAJAAAAAAsAAAAAAAAAABEADwoREREDCgcAARMJCwsAAAkGCwAACwAGEQAAABEREQAAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAARAAoKERERAAoAAAIACQsAAAAJAAsAAAsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAMAAAAAAkMAAAAAAAMAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAA0AAAAEDQAAAAAJDgAAAAAADgAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAPAAAAAA8AAAAACRAAAAAAABAAABAAABIAAAASEhIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAABISEgAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAAAAAAoAAAAACgAAAAAJCwAAAAAACwAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAwAAAAACQwAAAAAAAwAAAwAADAxMjM0NTY3ODlBQkNERUYFAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAgAAALgLAAAABAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAK/////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD//////wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBbiBlcnJvciBvY2N1cnJlZCBpbiB0aGUgaW50ZXJwb2xhdGlvbiBmb3IgYmxlbmQgc2hhcGVzLiBDb21iaW5hdGlvbkNvdW50IGlzICVkLgBbQ1NNXSBbRV1XYXJwRGVmb3JtZXI6OlRyYW5zZm9ybVRhcmdldCgpIGVycm9yLiBbJWRdIHAwMT0oJS40ZiAsICUuNGYpCgBbQ1NNXSBbRV1Jbml0aWFsaXplRGVmb3JtZXJzKCk6IFVua25vd24gRGVmb3JtZXIgVHlwZS4KAFtDU01dIFtFXWNzbUhhc01vY0NvbnNpc3RlbmN5OiBUaGlzIG1vYzMgc2l6ZSBpcyBpbnZhbGlkLgoATU9DMwBbQ1NNXSBbRV1jc21IYXNNb2NDb25zaXN0ZW5jeTogRmlsZVR5cGUgaXMgaW52YWxpZC4KAFtDU01dIFtFXWNzbUhhc01vY0NvbnNpc3RlbmN5OiBUaGlzIG1vYzMgdmVyIGlzIGludmFsaWQgW3ZlcjolZF0uCgBbQ1NNXSBbRV1jc21IYXNNb2NDb25zaXN0ZW5jeTogVGhlIENvcmUgdW5zdXBwb3J0IGxhdGVyIHRoYW4gbW9jMyB2ZXI6WyVkXS4gVGhpcyBtb2MzIHZlciBpcyBbJWRdLgoAW0NTTV0gW0VdY3NtSGFzTW9jQ29uc2lzdGVuY3k6IEhlYWRlciBzZWN0aW9uIGlzIGludmFsaWQuCgBbQ1NNXSBbRV1jc21IYXNNb2NDb25zaXN0ZW5jeTogRGF0YSBzZWN0aW9uIGlzIGludmFsaWQuCgBMaXZlMkQgQ3ViaXNtIFNESyBDb3JlIFZlcnNpb24gJWQuJWQuJWQAW0NTTV0gW0VdY3NtUmV2aXZlTW9jSW5QbGFjZSBpcyBmYWlsZWQuIENvcnJ1cHRlZCAgbW9jMyBmaWxlLgoAW0NTTV0gW0VdY3NtUmV2aXZlTW9jSW5QbGFjZSBpcyBmYWlsZWQuIFRoZSBDb3JlIHVuc3VwcG9ydCBsYXRlciB0aGFuIG1vYzMgdmVyOlslZF0uIFRoaXMgbW9jMyB2ZXIgaXMgWyVkXS4KAFtDU01dIFtFXWNzbUdldE1vY1ZlcnNpb24gaXMgZmFpbGVkLiBDb3JydXB0ZWQgbW9jMyBmaWxlLgoAW0NTTV0gW0VdJXM6ICVzCgBjc21HZXRNb2NWZXJzaW9uACJhZGRyZXNzIiBpcyBudWxsLgBjc21IYXNNb2NDb25zaXN0ZW5jeQAiYWRkcmVzcyIgYWxpZ25tZW50IGlzIGludmFsaWQuACJzaXplIiBpcyBpbnZhbGlkLgBjc21SZXZpdmVNb2NJblBsYWNlAGNzbVJlYWRDYW52YXNJbmZvACJtb2RlbCIgaXMgaW52YWxpZC4AIm91dFNpemVJblBpeGVscyIgaXMgbnVsbC4AIm91dE9yaWdpbkluUGl4ZWxzIiBpcyBudWxsLgAib3V0UGl4ZWxzUGVyVW5pdCIgaXMgbnVsbC4AY3NtR2V0U2l6ZW9mTW9kZWwAIm1vYyIgaXMgaW52YWxpZC4AY3NtSW5pdGlhbGl6ZU1vZGVsSW5QbGFjZQAic2l6ZSIgaXMgaW52YWxpZABjc21VcGRhdGVNb2RlbABjc21HZXRQYXJhbWV0ZXJDb3VudABjc21HZXRQYXJhbWV0ZXJJZHMAY3NtR2V0UGFyYW1ldGVyVHlwZXMAY3NtR2V0UGFyYW1ldGVyTWluaW11bVZhbHVlcwBjc21HZXRQYXJhbWV0ZXJNYXhpbXVtVmFsdWVzAGNzbUdldFBhcmFtZXRlckRlZmF1bHRWYWx1ZXMAY3NtR2V0UGFyYW1ldGVyVmFsdWVzAGNzbUdldFBhcnRDb3VudABjc21HZXRQYXJ0SWRzAGNzbUdldFBhcnRPcGFjaXRpZXMAY3NtR2V0UGFydFBhcmVudFBhcnRJbmRpY2VzAGNzbUdldERyYXdhYmxlQ291bnQAY3NtR2V0RHJhd2FibGVJZHMAY3NtR2V0RHJhd2FibGVDb25zdGFudEZsYWdzAGNzbUdldERyYXdhYmxlRHluYW1pY0ZsYWdzAGNzbUdldERyYXdhYmxlVGV4dHVyZUluZGljZXMAY3NtR2V0RHJhd2FibGVEcmF3T3JkZXJzAGNzbUdldERyYXdhYmxlUmVuZGVyT3JkZXJzAGNzbUdldERyYXdhYmxlT3BhY2l0aWVzAGNzbUdldERyYXdhYmxlTWFza0NvdW50cwBjc21HZXREcmF3YWJsZU1hc2tzAGNzbUdldERyYXdhYmxlVmVydGV4Q291bnRzAGNzbUdldERyYXdhYmxlVmVydGV4UG9zaXRpb25zAGNzbUdldERyYXdhYmxlVmVydGV4VXZzAGNzbUdldERyYXdhYmxlSW5kZXhDb3VudHMAY3NtR2V0RHJhd2FibGVJbmRpY2VzAGNzbUdldERyYXdhYmxlTXVsdGlwbHlDb2xvcnMAY3NtR2V0RHJhd2FibGVTY3JlZW5Db2xvcnMAY3NtR2V0RHJhd2FibGVQYXJlbnRQYXJ0SW5kaWNlcwBjc21SZXNldERyYXdhYmxlRHluYW1pY0ZsYWdzAGNzbUdldFBhcmFtZXRlcktleUNvdW50cwBjc21HZXRQYXJhbWV0ZXJLZXlWYWx1ZXMAW0NTTV0gW1ddUm90YXRpb25EZWZvcm1lcjogTm90IGZvdW5kIHRyYW5zZm9ybWVkIERpcmVjdGlvbi4KAFtDU01dIFtFXVVwZGF0ZURlZm9ybWVySGllcmFyY2h5KCk6IFVua25vd24gRGVmb3JtZXIgVHlwZS4KACVzCgAtKyAgIDBYMHgAKG51bGwpAC0wWCswWCAwWC0weCsweCAweABpbmYASU5GAG5hbgBOQU4ALg==");function Gr(j){for(var $=[],ot=0;ot<j.length;ot++){var J=j[ot];255<J&&(yn&&ci(!1,"Character code "+J+" ("+String.fromCharCode(J)+")  at offset "+ot+" not in 0x00-0xFF."),J&=255),$.push(String.fromCharCode(J))}return $.join("")}var An=typeof atob=="function"?atob:function(j){var $="",ot=0;j=j.replace(/[^A-Za-z0-9\+\/=]/g,"");do var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(j.charAt(ot++)),Rt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(j.charAt(ot++)),J="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(j.charAt(ot++)),$t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(j.charAt(ot++)),t=t<<2|Rt>>4,Rt=(15&Rt)<<4|J>>2,ce=(3&J)<<6|$t;while($+=String.fromCharCode(t),J!==64&&($+=String.fromCharCode(Rt)),$t!==64&&($+=String.fromCharCode(ce)),ot<j.length);return $};function ei(j){if(String.prototype.startsWith?j.startsWith(Hi):j.indexOf(Hi)===0){if(j=j.slice(Hi.length),typeof dt=="boolean"&&dt){try{var $=Buffer.from(j,"base64")}catch{$=new Buffer(j,"base64")}var ot=new Uint8Array($.buffer,$.byteOffset,$.byteLength)}else try{for(var J=An(j),$t=new Uint8Array(J.length),$=0;$<J.length;++$)$t[$]=J.charCodeAt($);ot=$t}catch{throw Error("Converting base64 string to bytes failed.")}return ot}}var m0,J0,Wi,ut=function(j,$,ot){var J=new j.Int8Array(ot),$t=new j.Int16Array(ot),t=new j.Int32Array(ot),Rt=new j.Uint8Array(ot),ce=new j.Uint16Array(ot),v=new j.Float32Array(ot),Xt=new j.Float64Array(ot),fe=0|$.v,Le=j.Math.floor,ye=j.Math.pow,Oe=j.Math.cos,Mi=j.Math.sin,me=j.Math.atan2,ee=j.Math.imul,gi=j.Math.clz32,ki=$.a,le=$.b,ge=$.c,wn=$.d,Mn=$.e,kn=$.f,Bn=$.g,Pn=$.h,vn=$.i,In=$.j,Vn=$.k,Rn=$.l,Tn=$.m,C=4832;function Fn(e,r){e|=0;var a,d,f,n,x,y,u,l,g,p,k,M,b,B,E,S,z,O,H,U,it,ft,rt,st,ht,_t,Y,yt,at,nt,Pt,Mt,kt,Yt,Gt,Ot,Tt,jt,Qt,Ut,Ht,xt,Bt,X,re,zt,h=0,_=0,P=0,L=0,tt=0,lt=0,Ft=0,Zt=0,Kt=0,Jt=0,te=0,Vt=0,Ue=0,Ae=0,He=0,Be=0,F=0,$i=0,M0=0,bt=0,Ie=0,Pi=0,pi=0,Ki=0,Fe=0,vi=0,k0=0,We=0,ps=0,ii=0,Qi=0,vt=0,Dt=0,Ze=0,Lt=0,Z=0,R=0,t0=C,h=C=C+63&-64;if(C=C+624|0,zt=h+616|0,U=h+608|0,L=h+600|0,P=h+592|0,Z=h,(r|=0)>>>0<1280)return pt(0,993,h+576|0),C=t0,(R=0)|R;if(0|K0(e))return pt(0,1057,h+584|0),C=t0,(R=0)|R;if(_=255&(h=0|J[(pi=e+4|0)>>0]),!(h<<24>>24))return t[P>>2]=_,pt(0,1110,P),C=t0,(R=0)|R;if(4<(255&h))return t[L>>2]=4,t[L+4>>2]=_,pt(0,1177,L),C=t0,(R=0)|R;(M0=(0|J[($i=e+5|0)>>0])!=0)&&(je(pi,1),Q(e+64|0,4,160)),ke(0|Z,0,576),sr(e,Z),vi=0|J[pi>>0],F=e+r|0,h=128+(bt=0|t[Z>>2])|0;e:do if(bt>>>0<e>>>0|F>>>0<bt>>>0||h>>>0<e>>>0|F>>>0<h>>>0||(Jt=(Zt=0|t[Z+4>>2])+64|0,Zt>>>0<e>>>0|F>>>0<Zt>>>0)||Zt>>>0<h>>>0|Jt>>>0<e>>>0|F>>>0<Jt>>>0||!(-1<(0|(k0=0|t[bt>>2])))||(te=(Kt=0|t[Z+8>>2])+(Be=k0<<2)|0,Kt>>>0<e>>>0|F>>>0<Kt>>>0)||Kt>>>0<Jt>>>0|te>>>0<e>>>0|F>>>0<te>>>0||(Vt=(We=0|t[(ps=Z+12|0)>>2])+(k0<<6)|0,We>>>0<e>>>0|F>>>0<We>>>0)||We>>>0<te>>>0|Vt>>>0<e>>>0|F>>>0<Vt>>>0||(Ue=(tt=0|t[(ii=Z+16|0)>>2])+Be|0,tt>>>0<e>>>0|F>>>0<tt>>>0)||tt>>>0<Vt>>>0|Ue>>>0<e>>>0|F>>>0<Ue>>>0||(Ae=(lt=0|t[(Qi=Z+20|0)>>2])+Be|0,lt>>>0<e>>>0|F>>>0<lt>>>0)||lt>>>0<Ue>>>0|Ae>>>0<e>>>0|F>>>0<Ae>>>0||(He=(Ft=0|t[(vt=Z+24|0)>>2])+Be|0,Ft>>>0<e>>>0|F>>>0<Ft>>>0))R=319;else{if(Ft>>>0<Ae>>>0|He>>>0<e>>>0|F>>>0<He>>>0){R=319;break}if(_=(h=0|t[(O=Z+28|0)>>2])+Be|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<He>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(Jt=Z+32|0)>>2])+Be|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(L=(h=0|t[(H=Z+36|0)>>2])+Be|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if((0|(_=0|t[bt+4>>2]))<=-1){R=319;break}if(P=(h=0|t[Z+40>>2])+(r=_<<2)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<L>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(He=Z+44|0)>>2])+(_<<6)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(Kt=Z+48|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(Ie=Z+52|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(Be=Z+56|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(Ki=Z+60|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(Pi=Z+64|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(te=Z+68|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(Fe=Z+72|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if((0|(h=0|t[bt+8>>2]))<=-1){R=319;break}if(L=(_=0|t[Z+76>>2])+(Zt=h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(_>>>0<P>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if(_=(h=0|t[(ht=Z+80|0)>>2])+Zt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<L>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(Lt=Z+84|0)>>2])+Zt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(Dt=Z+92|0)>>2])+Zt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(Yt=Z+96|0)>>2])+Zt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(L=(h=0|t[(rt=Z+100|0)>>2])+Zt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if((0|(h=0|t[bt+12>>2]))<=-1){R=319;break}if(P=(_=0|t[Z+108>>2])+(Ft=h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(_>>>0<L>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(Qt=Z+112|0)>>2])+Ft|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(Ze=Z+116|0)>>2])+Ft|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[Z+124>>2])+Ft|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if((0|(L=0|t[bt+16>>2]))<=-1){R=319;break}if(P=(h=0|t[Z+128>>2])+(lt=L<<2)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[Z+132>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[Z+136>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[Z+140>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(it=Z+144|0)>>2])+(L<<6)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(st=Z+148|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(_t=Z+152|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(re=Z+156|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(jt=Z+164|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(Tt=Z+168|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(Ht=Z+172|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(Ut=Z+176|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(xt=Z+180|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[Z+184>>2])+L|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(X=Z+188|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(at=Z+192|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(kt=Z+196|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(yt=Z+200|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(Ot=Z+204|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(L=(h=0|t[(Gt=Z+208|0)>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if((0|(_=0|t[bt+20>>2]))<=-1){R=319;break}if(P=(h=0|t[Z+212>>2])+(tt=_<<2)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<L>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(Bt=Z+216|0)>>2])+(_<<6)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[Z+220>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[Z+224>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[Z+228>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(Pt=Z+232|0)>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(nt=Z+236|0)>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(Mt=Z+244|0)>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(Y=Z+248|0)>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if((0|(h=0|t[bt+24>>2]))<=-1){R=319;break}if(L=(_=0|t[Z+272>>2])+(h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(_>>>0<P>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if((0|(h=0|t[bt+28>>2]))<=-1){R=319;break}if(r=(_=0|t[Z+276>>2])+(P=h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(_>>>0<L>>>0|r>>>0<e>>>0|F>>>0<r>>>0){R=319;break}if(L=(h=0|t[(ft=Z+280|0)>>2])+P|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<r>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if((0|(h=0|t[bt+32>>2]))<=-1){R=319;break}if(P=(_=0|t[Z+284>>2])+(r=h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(_>>>0<L>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[Z+288>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[Z+292>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[Z+296>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[Z+300>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(Ue=Z+304|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(L=(h=0|t[(z=Z+308|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if((0|(h=0|t[bt+36>>2]))<=-1){R=319;break}if(P=(_=0|t[Z+312>>2])+(r=h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(_>>>0<L>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[Z+316>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(S=Z+320|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if((0|(h=0|t[bt+40>>2]))<=-1){R=319;break}if(L=(_=0|t[Z+324>>2])+(h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(_>>>0<P>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if((0|(h=0|t[bt+44>>2]))<=-1){R=319;break}if(r=(_=0|t[(E=Z+336|0)>>2])+(h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(_>>>0<L>>>0|r>>>0<e>>>0|F>>>0<r>>>0){R=319;break}if((0|(h=0|t[bt+48>>2]))<=-1){R=319;break}if(L=(_=0|t[Z+340>>2])+(P=h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(_>>>0<r>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if(r=(h=0|t[(B=Z+344|0)>>2])+P|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<L>>>0|r>>>0<e>>>0|F>>>0<r>>>0){R=319;break}if((0|(h=0|t[bt+52>>2]))<=-1){R=319;break}if(L=(_=0|t[Z+328>>2])+(P=h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(_>>>0<r>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if(P=(h=0|t[(Ae=Z+332|0)>>2])+P|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<L>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if((0|(h=0|t[bt+56>>2]))<=-1){R=319;break}if(L=(_=0|t[Z+428>>2])+(h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(_>>>0<P>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if((0|(h=0|t[bt+60>>2]))<=-1){R=319;break}if(P=(_=0|t[Z+432>>2])+(h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(_>>>0<L>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if((0|(h=0|t[bt+64>>2]))<=-1){R=319;break}if(L=(_=0|t[Z+436>>2])+(h<<1)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(_>>>0<P>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if((0|(h=0|t[bt+68>>2]))<=-1){R=319;break}if(P=(_=0|t[(b=Z+440|0)>>2])+(h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(_>>>0<L>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if((0|(h=0|t[bt+72>>2]))<=-1){R=319;break}if(L=(_=0|t[Z+444>>2])+(r=h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(_>>>0<P>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if(_=(h=0|t[(M=Z+448|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<L>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[Z+452>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[Z+456>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[Z+460>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if((0|(h=0|t[bt+76>>2]))<=-1){R=319;break}if(L=(_=0|t[Z+464>>2])+(r=h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(_>>>0<P>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if(_=(h=0|t[(x=Z+468|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<L>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(k=Z+472|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if((0|(_=0|t[bt+80>>2]))<=-1){R=319;break}if(L=(h=0|t[Z+476>>2])+(r=_<<2)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if(_=(h=0|t[(n=Z+480|0)>>2])+(_<<6)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<L>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(d=Z+484|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(f=Z+488|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(a=Z+492|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(y=Z+496|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(g=Z+500|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if(_=(h=0|t[(p=Z+504|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(P=(h=0|t[(u=Z+508|0)>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}if((0|(_=0|t[bt+84>>2]))<=-1){R=319;break}if(L=(h=0|t[Z+512>>2])+(_<<2)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<P>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break}if(r=(h=0|t[(l=Z+516|0)>>2])+(_<<1)|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break}if(h>>>0<L>>>0|r>>>0<e>>>0|F>>>0<r>>>0){R=319;break}if((0|(h=0|t[bt+88>>2]))<=-1){R=319;break}if(P=(_=0|t[Z+520>>2])+(h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break}if(_>>>0<r>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break}do if(1<(255&vi)){if(_=(h=0|t[Z+104>>2])+Zt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if((255&vi)<=3)break;if(P=(h=0|t[Z+260>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break e}if(_=(h=0|t[Z+264>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(L=(h=0|t[Z+268>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<_>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if(P=(h=0|t[Z+88>>2])+Zt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<L>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break e}if(_=(h=0|t[Z+120>>2])+Ft|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(L=(h=0|t[Z+160>>2])+lt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<_>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if((0|(h=0|t[bt+92>>2]))<=-1){R=319;break e}if(P=(_=0|t[Z+524>>2])+(r=h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(_>>>0<L>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break e}if(_=(h=0|t[Z+528>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(L=(h=0|t[Z+532>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<_>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if((0|(h=0|t[bt+96>>2]))<=-1){R=319;break e}if(P=(_=0|t[Z+536>>2])+(r=h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(_>>>0<L>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break e}if(L=(h=0|t[Z+540>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<P>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if(_=(h=0|t[Z+544>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<L>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(P=(h=0|t[Z+240>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break e}if(_=(h=0|t[Z+252>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(L=(h=0|t[Z+256>>2])+tt|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<_>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if((0|(h=0|t[bt+100>>2]))<=-1){R=319;break e}if(P=(_=0|t[Z+348>>2])+(r=h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(_>>>0<L>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break e}if(_=(h=0|t[Z+352>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(L=(h=0|t[Z+356>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<_>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if((0|(h=0|t[bt+104>>2]))<=-1){R=319;break e}if(P=(_=0|t[Z+360>>2])+(r=h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(_>>>0<L>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break e}if(_=(h=0|t[Z+364>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(P=(h=0|t[Z+368>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break e}if(_=(h=0|t[Z+372>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(L=(h=0|t[Z+376>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<_>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if((0|(h=0|t[bt+108>>2]))<=-1){R=319;break e}if(P=(_=0|t[Z+380>>2])+(r=h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(_>>>0<L>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break e}if(_=(h=0|t[Z+384>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(L=(h=0|t[Z+388>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<_>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if((0|(h=0|t[bt+112>>2]))<=-1){R=319;break e}if(P=(_=0|t[Z+392>>2])+(r=h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(_>>>0<L>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break e}if(_=(h=0|t[Z+396>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(P=(h=0|t[Z+400>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<_>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break e}if((0|(h=0|t[bt+116>>2]))<=-1){R=319;break e}if(L=(_=0|t[Z+404>>2])+(h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(_>>>0<P>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if((0|(h=0|t[bt+120>>2]))<=-1){R=319;break e}if(P=(_=0|t[Z+408>>2])+(r=h<<2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(_>>>0<L>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break e}if(_=(h=0|t[Z+412>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<P>>>0|_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(L=(h=0|t[Z+416>>2])+r|0,h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}if(h>>>0<_>>>0|L>>>0<e>>>0|F>>>0<L>>>0){R=319;break e}if((0|(h=0|t[bt+124>>2]))<=-1){R=319;break e}if(P=(_=0|t[Z+420>>2])+(h<<=2)|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(_>>>0<L>>>0|P>>>0<e>>>0|F>>>0<P>>>0){R=319;break e}if(h=(_=0|t[Z+424>>2])+h|0,_>>>0<e>>>0|F>>>0<_>>>0){R=319;break e}if(_>>>0<P>>>0|h>>>0<e>>>0|F>>>0<h>>>0){R=319;break e}}while(0);pi=M0?(Yr(e),We=(J[$i>>0]=0)|t[Z>>2],vi=0|J[pi>>0],Vt=0|t[We>>2],e=We,_=0|t[ps>>2],We):(Vt=k0,_=We,e=bt);t:do if(0<(0|Vt)){h=0;do if(63<(0|Ji(_+(h<<6)|0))>>>0)break t;while((0|(h=h+1|0))<(0|Vt));h=0|t[ii>>2],_=0|t[(P=e+48|0)>>2],L=0;do if(ii=0|t[h+(L<<2)>>2],L=L+1|0,(0|ii)<0|(0|_)<=(0|ii))break t;while((0|L)<(0|Vt));lt=0|t[Qi>>2],h=0|t[vt>>2],_=0|t[e+24>>2],tt=0;do if(0|(L=0|t[h+(tt<<2)>>2])&&((0|L)<0|(0|_)<(0|L)||!(-1<(0|(r=0|t[lt+(tt<<2)>>2]))&(0|r)<(0|_))||(vt=r+L|0)>>>31|(0|_)<(0|vt)|0))break t;while((0|(tt=tt+1|0))<(0|Vt));h=0|t[O>>2],_=0;do if(1<(0|t[h+(_<<2)>>2])>>>0)break t;while((0|(_=_+1|0))<(0|Vt));h=0|t[Jt>>2],_=0;do if(1<(0|t[h+(_<<2)>>2])>>>0)break t;while((0|(_=_+1|0))<(0|Vt));for(h=0|t[H>>2],_=0;;){if(vt=0|t[h+(_<<2)>>2],_=_+1|0,(0|vt)<-1|(0|Vt)<=(0|vt))break t;if((0|Vt)<=(0|_)){R=345;break}}}else P=e+48|0,R=345;while(0);t:do if((0|R)==345){Jt=0|t[e+4>>2],h=0|t[He>>2];i:do if(0<(0|Jt)){_=0;do if(63<(0|Ji(h+(_<<6)|0))>>>0)break t;while((0|(_=_+1|0))<(0|Jt));_=0|t[Kt>>2],Ft=0|t[P>>2],h=0;do if(vt=0|t[_+(h<<2)>>2],h=h+1|0,(0|vt)<0|(0|Ft)<=(0|vt))break t;while((0|h)<(0|Jt));h=0|t[Ie>>2],_=0;do if(1<(0|t[h+(_<<2)>>2])>>>0)break t;while((0|(_=_+1|0))<(0|Jt));h=0|t[Be>>2],_=0;do if(1<(0|t[h+(_<<2)>>2])>>>0)break t;while((0|(_=_+1|0))<(0|Jt));h=0|t[Ki>>2],_=0;do if(vt=0|t[h+(_<<2)>>2],_=_+1|0,(0|vt)<-1|(0|Vt)<=(0|vt))break t;while((0|_)<(0|Jt));h=0|t[Pi>>2],_=0;do if(vt=0|t[h+(_<<2)>>2],_=_+1|0,(0|vt)<-1|(0|Jt)<=(0|vt))break t;while((0|_)<(0|Jt));lt=0|t[te>>2],h=0;do if(1<(0|t[lt+(h<<2)>>2])>>>0)break t;while((0|(h=h+1|0))<(0|Jt));for(_=0|t[Fe>>2],h=e+8|0,L=e+12|0,tt=0;;){switch(P=0|t[_+(tt<<2)>>2],0|t[lt+(tt<<2)>>2]){case 0:r=h;break;case 1:r=L;break;default:break t}if((0|P)<=-1||(tt=tt+1|0,(0|P)>=(0|t[r>>2])))break t;if((0|Jt)<=(0|tt)){F=Ft;break i}}}else F=0|t[P>>2],h=e+8|0;while(0);if(Fe=0|t[h>>2],h=0|t[Z+76>>2],Pi=0<(0|Fe)){_=0;do if(vt=0|t[h+(_<<2)>>2],_=_+1|0,(0|vt)<0|(0|F)<=(0|vt))break t;while((0|_)<(0|Fe));h=0|t[ht>>2],_=0|t[Lt>>2],P=0|t[(lt=e+28|0)>>2],tt=0;do if(0|(L=0|t[_+(tt<<2)>>2])&&((0|L)<0|(0|P)<(0|L)||!(-1<(0|(r=0|t[h+(tt<<2)>>2]))&(0|r)<(0|P))||(vt=r+L|0)>>>31|(0|P)<(0|vt)|0))break t;while((0|(tt=tt+1|0))<(0|Fe));for(L=0|t[Yt>>2],h=0|t[rt>>2],_=0|t[Dt>>2],P=0;;){if(ii=0|t[L+(P<<2)>>2],Qi=0|t[h+(P<<2)>>2],vt=0|t[_+(P<<2)>>2],P=P+1|0,!((0|ee(Qi+1|0,ii+1|0))==(0|vt)&0<(0|ii)&0<(0|Qi)&0<(0|vt)))break t;if((0|Fe)<=(0|P)){Ki=lt;break}}}else Ki=e+28|0;if(bt=0|t[e+12>>2],h=0|t[Z+108>>2],M0=0<(0|bt)){_=0;do if(vt=0|t[h+(_<<2)>>2],_=_+1|0,(0|vt)<0|(0|F)<=(0|vt))break t;while((0|_)<(0|bt));for(h=0|t[Qt>>2],_=0|t[Ze>>2],P=0|t[(tt=e+32|0)>>2],lt=0;;){if(0|(L=0|t[_+(lt<<2)>>2])&&((0|L)<0|(0|P)<(0|L)||!(-1<(0|(r=0|t[h+(lt<<2)>>2]))&(0|r)<(0|P))||(vt=r+L|0)>>>31|(0|P)<(0|vt)|0))break t;if((0|bt)<=(0|(lt=lt+1|0))){Zt=tt;break}}}else Zt=e+32|0;if(te=0|t[(Be=e+16|0)>>2],h=0|t[it>>2],Kt=0<(0|te)){_=0;do if(63<(0|Ji(h+(_<<6)|0))>>>0)break t;while((0|(_=_+1|0))<(0|te));h=0|t[st>>2],_=0;do if(vt=0|t[h+(_<<2)>>2],_=_+1|0,(0|vt)<0|(0|F)<=(0|vt))break t;while((0|_)<(0|te));h=0|t[_t>>2],_=0|t[re>>2],P=0|t[(Ft=e+36|0)>>2],tt=0;do if(0|(L=0|t[_+(tt<<2)>>2])&&((0|L)<0|(0|P)<(0|L)||!(-1<(0|(r=0|t[h+(tt<<2)>>2]))&(0|r)<(0|P))||(vt=r+L|0)>>>31|(0|P)<(0|vt)|0))break t;while((0|(tt=tt+1|0))<(0|te));h=0|t[jt>>2],_=0;do if(1<(0|t[h+(_<<2)>>2])>>>0)break t;while((0|(_=_+1|0))<(0|te));h=0|t[Tt>>2],_=0;do if(1<(0|t[h+(_<<2)>>2])>>>0)break t;while((0|(_=_+1|0))<(0|te));h=0|t[Ht>>2],_=0;do if(vt=0|t[h+(_<<2)>>2],_=_+1|0,(0|vt)<-1|(0|Vt)<=(0|vt))break t;while((0|_)<(0|te));h=0|t[Ut>>2],_=0;do if(vt=0|t[h+(_<<2)>>2],_=_+1|0,(0|vt)<-1|(0|Jt)<=(0|vt))break t;while((0|_)<(0|te));h=0|t[xt>>2],_=0;do if((0|t[h+(_<<2)>>2])<0)break t;while((0|(_=_+1|0))<(0|te));L=0|t[X>>2],h=0;do if((0|t[L+(h<<2)>>2])<0)break t;while((0|(h=h+1|0))<(0|te));h=0|t[at>>2],_=0|t[e+60>>2],P=0;do if(vt=(0|t[h+(P<<2)>>2])+(t[L+(P<<2)>>2]<<1)|0,P=P+1|0,vt>>>31|(0|_)<(0|vt)|0)break t;while((0|P)<(0|te));tt=0|t[kt>>2],h=0|t[yt>>2],_=0|t[e+64>>2],r=0;do if(0|(P=0|t[h+(r<<2)>>2])&&((0|P)<0|(0|_)<(0|P)||!(-1<(0|(L=0|t[tt+(r<<2)>>2]))&(0|L)<(0|_))||(vt=L+P|0)>>>31|(0|_)<(0|vt)|0))break t;while((0|(r=r+1|0))<(0|te));for(tt=0|t[Ot>>2],h=0|t[Gt>>2],_=0|t[(lt=e+68|0)>>2],r=0;;){if(0|(P=0|t[h+(r<<2)>>2])&&((0|P)<0|(0|_)<(0|P)||!(-1<(0|(L=0|t[tt+(r<<2)>>2]))&(0|L)<(0|_))||(vt=L+P|0)>>>31|(0|_)<(0|vt)|0))break t;if((0|te)<=(0|(r=r+1|0))){$i=Ft;break}}}else $i=e+36|0,lt=e+68|0;if(Ie=0|t[e+20>>2],h=0|t[Bt>>2],He=0<(0|Ie)){_=0;do if(63<(0|Ji(h+(_<<6)|0))>>>0)break t;while((0|(_=_+1|0))<(0|Ie));h=0|t[Pt>>2],_=0;do if(1<(0|t[h+(_<<2)>>2])>>>0)break t;while((0|(_=_+1|0))<(0|Ie));h=0|t[nt>>2],_=0;do if((0|t[h+(_<<2)>>2])<0)break t;while((0|(_=_+1|0))<(0|Ie));for(tt=0|t[Mt>>2],h=0|t[Y>>2],_=0|t[e+52>>2],r=0;;){if(0|(P=0|t[h+(r<<2)>>2])&&((0|P)<0|(0|_)<(0|P)||!(-1<(0|(L=0|t[tt+(r<<2)>>2]))&(0|L)<(0|_))||(vt=L+P|0)>>>31|(0|_)<(0|vt)|0))break t;if((0|Ie)<=(0|(r=r+1|0))){Ft=_;break}}}else Ft=0|t[e+52>>2];if(P=0|t[Dt>>2],h=0|t[ft>>2],L=0|t[e+40>>2],Pi){_=0;do if(Dt=(0|t[h+(_<<2)>>2])+(t[P+(_<<2)>>2]<<1)|0,_=_+1|0,Dt>>>31|(0|L)<(0|Dt)|0)break t;while((0|_)<(0|Fe))}if(P=0|t[Zt>>2],h=0|t[Ue>>2],0<(0|P)){_=0;do if(1<(0|t[h+(_<<2)>>2])>>>0)break t;while((0|(_=_+1|0))<(0|P));h=0|t[z>>2],_=0;do if(1<(0|t[h+(_<<2)>>2])>>>0)break t;while((0|(_=_+1|0))<(0|P))}if(Ue=0|t[X>>2],_=0|t[S>>2],Kt){h=0;do if(Dt=(0|t[_+(h<<2)>>2])+(t[Ue+(h<<2)>>2]<<1)|0,h=h+1|0,Dt>>>31|(0|L)<(0|Dt)|0)break t;while((0|h)<(0|te))}if(tt=0|t[e+44>>2],h=0|t[E>>2],0<(0|tt)){_=0;do if(Dt=0|t[h+(_<<2)>>2],_=_+1|0,(0|Dt)<0|(0|Ft)<=(0|Dt))break t;while((0|_)<(0|tt))}if(r=0|t[Z+340>>2],h=0|t[B>>2],0<(0|F)){L=0;do if(0|(_=0|t[h+(L<<2)>>2])&&((0|_)<0|(0|tt)<(0|_)||!(-1<(0|(P=0|t[r+(L<<2)>>2]))&(0|P)<(0|tt))||(Dt=P+_|0)>>>31|(0|tt)<(0|Dt)|0))break t;while((0|(L=L+1|0))<(0|F))}if(r=0|t[Z+328>>2],h=0|t[Ae>>2],Ae=0|t[e+56>>2],0<(0|Ft)){L=0;do if(0|(_=0|t[h+(L<<2)>>2])&&((0|_)<0|(0|Ae)<(0|_)||!(-1<(0|(P=0|t[r+(L<<2)>>2]))&(0|P)<(0|Ae))||(Dt=P+_|0)>>>31|(0|Ae)<(0|Dt)|0))break t;while((0|(L=L+1|0))<(0|Ft))}if(P=0|t[lt>>2],h=0|t[b>>2],0<(0|P)){_=0;do if(Dt=0|t[h+(_<<2)>>2],_=_+1|0,(0|Dt)<-1|(0|te)<=(0|Dt))break t;while((0|_)<(0|P))}if(lt=0|t[e+72>>2],r=0|t[Z+444>>2],h=0|t[M>>2],tt=0|t[e+76>>2],0<(0|lt)){L=0;do if(0|(_=0|t[h+(L<<2)>>2])&&((0|_)<0|(0|tt)<(0|_)||!(-1<(0|(P=0|t[r+(L<<2)>>2]))&(0|P)<(0|tt))||(Dt=P+_|0)>>>31|(0|tt)<(0|Dt)|0))break t;while((0|(L=L+1|0))<(0|lt))}if(r=0|t[Z+464>>2],0<(0|tt)){h=0;do if(1<(0|t[r+(h<<2)>>2])>>>0)break t;while((0|(h=h+1|0))<(0|tt));h=0|t[x>>2],L=0;do{switch(_=0|t[h+(L<<2)>>2],0|t[r+(L<<2)>>2]){case 0:P=Be;break;case 1:P=pi;break;default:break t}if((0|_)<=-1||(L=L+1|0,(0|_)>=(0|t[P>>2])))break t}while((0|L)<(0|tt));h=0|t[k>>2],_=0;do if(Dt=0|t[h+(_<<2)>>2],_=_+1|0,(0|Dt)<-1|(0|lt)<=(0|Dt))break t;while((0|_)<(0|tt))}if(Vt=0|t[e+80>>2],h=0|t[n>>2],0<(0|Vt)){_=0;do if(63<(0|Ji(h+(_<<6)|0))>>>0)break t;while((0|(_=_+1|0))<(0|Vt));h=0|t[d>>2],_=0;do if(Dt=0|t[h+(_<<2)>>2],_=_+1|0,(0|Dt)<0|(0|F)<=(0|Dt))break t;while((0|_)<(0|Vt));tt=0|t[f>>2],h=0|t[a>>2],_=0|t[e+88>>2],r=0;do if(0|(P=0|t[h+(r<<2)>>2])&&((0|P)<0|(0|_)<(0|P)||!(-1<(0|(L=0|t[tt+(r<<2)>>2]))&(0|L)<(0|_))||(Dt=L+P|0)>>>31|(0|_)<(0|Dt)|0))break t;while((0|(r=r+1|0))<(0|Vt));te=0|t[y>>2],Jt=0|t[Be>>2],h=0;do if(Dt=0|t[te+(h<<2)>>2],h=h+1|0,(0|Dt)<0|(0|Jt)<=(0|Dt))break t;while((0|h)<(0|Vt));Kt=0|t[g>>2],h=0;do if(Dt=0|t[Kt+(h<<2)>>2],h=h+1|0,(0|Dt)<0|(0|Jt)<=(0|Dt))break t;while((0|h)<(0|Vt));Zt=0|t[p>>2],Ft=0|t[u>>2],h=0|t[e+84>>2],L=0;do if(0|(_=0|t[Ft+(L<<2)>>2])&&((0|_)<0|(0|h)<(0|_)||!(-1<(0|(P=0|t[Zt+(L<<2)>>2]))&(0|P)<(0|h))||(Dt=P+_|0)>>>31|(0|h)<(0|Dt)|0))break t;while((0|(L=L+1|0))<(0|Vt));h=0|t[l>>2],tt=0;do if(_=0|t[Ue+(t[te+(tt<<2)>>2]<<2)>>2],P=0|t[Ue+(t[Kt+(tt<<2)>>2]<<2)>>2],L=0|t[Ft+(tt<<2)>>2],r=h+(t[Zt+(tt<<2)>>2]<<1)|0,0<(0|L)){lt=0;do if(!((0|_)>(0|ce[r+(lt<<1)>>1])&&(0|P)>(0|ce[r+((1|lt)<<1)>>1])))break t;while((0|(lt=lt+2|0))<(0|L))}while((0|(tt=tt+1|0))<(0|Vt))}else Jt=0|t[Be>>2];if((255&vi)<=1){h=1;break e}if(h=0|t[Z+104>>2],Pi){_=0;do if(1<(0|t[h+(_<<2)>>2])>>>0)break t;while((0|(_=_+1|0))<(0|Fe))}if((255&vi)<=3){h=1;break e}if(h=0|t[Z+264>>2],_=0|t[Z+268>>2],He){r=0;do if(0|(P=0|t[_+(r<<2)>>2])&&((0|P)<0|(0|Ae)<(0|P)||!(-1<(0|(L=0|t[h+(r<<2)>>2]))&(0|L)<(0|Ae))||(Dt=L+P|0)>>>31|(0|Ae)<(0|Dt)|0))break t;while((0|(r=r+1|0))<(0|Ie))}if((0|(tt=0|t[e+92>>2]))!=(0|t[e+96>>2]))break;if(r=0|t[Z+88>>2],L=0|t[Lt>>2],Pi){P=0;do if(0|(h=0|t[L+(P<<2)>>2])&&((0|h)<0|(0|tt)<(0|h)||!(-1<(0|(_=0|t[r+(P<<2)>>2]))&(0|_)<(0|tt))||(Lt=_+h|0)>>>31|(0|tt)<(0|Lt)|0))break t;while((0|(P=P+1|0))<(0|Fe))}if(r=0|t[Z+120>>2],L=0|t[Ze>>2],M0){P=0;do if(0|(h=0|t[L+(P<<2)>>2])&&((0|h)<0|(0|tt)<(0|h)||!(-1<(0|(_=0|t[r+(P<<2)>>2]))&(0|_)<(0|tt))||(Lt=_+h|0)>>>31|(0|tt)<(0|Lt)|0))break t;while((0|(P=P+1|0))<(0|bt))}if(r=0|t[Z+160>>2],h=0|t[re>>2],0<(0|Jt)){L=0;do if(0|(_=0|t[h+(L<<2)>>2])&&((0|_)<0|(0|tt)<(0|_)||!(-1<(0|(P=0|t[r+(L<<2)>>2]))&(0|P)<(0|tt))||(Lt=P+_|0)>>>31|(0|tt)<(0|Lt)|0))break t;while((0|(L=L+1|0))<(0|Jt))}if(_=0|t[Z+240>>2],He){h=0;do if(1<(0|t[_+(h<<2)>>2])>>>0)break t;while((0|(h=h+1|0))<(0|Ie));for(h=0|t[Z+252>>2],_=0|t[Z+256>>2],P=0|t[e+100>>2],tt=0;;){if(0|(L=0|t[_+(tt<<2)>>2])&&((0|L)<0|(0|P)<(0|L)||!(-1<(0|(r=0|t[h+(tt<<2)>>2]))&(0|r)<(0|P))||(Lt=r+L|0)>>>31|(0|P)<(0|Lt)|0))break t;if((0|Ie)<=(0|(tt=tt+1|0))){tt=P;break}}}else tt=0|t[e+100>>2];if(h=0|t[Z+348>>2],r=0|t[Z+352>>2],0<(0|tt)){L=0;do if(0|(_=0|t[r+(L<<2)>>2])&&((0|_)<0|(0|Ae)<(0|_)||!(-1<(0|(P=0|t[h+(L<<2)>>2]))&(0|P)<(0|Ae))||(Lt=P+_|0)>>>31|(0|Ae)<(0|Lt)|0))break t;while((0|(L=L+1|0))<(0|tt));h=0|t[Z+356>>2],P=0;do if((0|(_=0|t[h+(P<<2)>>2]))<=-1||(0|_)>=(0|t[r+(P<<2)>>2]))break t;while((0|(P=P+1|0))<(0|tt))}if(Kt=0|t[e+104>>2],h=0|t[Z+360>>2],0<(0|Kt)){_=0;do if(Lt=0|t[h+(_<<2)>>2],_=_+1|0,(0|Lt)<0|(0|tt)<=(0|Lt))break t;while((0|_)<(0|Kt));for(h=0|t[Z+372>>2],_=0|t[Z+376>>2],P=0|t[e+116>>2],tt=0;;){if(0|(L=0|t[_+(tt<<2)>>2])&&((0|L)<0|(0|P)<(0|L)||!(-1<(0|(r=0|t[h+(tt<<2)>>2]))&(0|r)<(0|P))||(Lt=r+L|0)>>>31|(0|P)<(0|Lt)|0))break t;if((0|Kt)<=(0|(tt=tt+1|0))){Zt=P;break}}}else Zt=0|t[e+116>>2];if(Ft=0|t[e+108>>2],h=0|t[Z+380>>2],0<(0|Ft)){_=0;do if(Lt=0|t[h+(_<<2)>>2],_=_+1|0,(0|Lt)<0|(0|Fe)<=(0|Lt))break t;while((0|_)<(0|Ft));lt=0|t[Z+384>>2],h=0|t[Z+388>>2],L=0;do if(0|(_=0|t[h+(L<<2)>>2])&&((0|_)<0|(0|Kt)<(0|_)||!(-1<(0|(P=0|t[lt+(L<<2)>>2]))&(0|P)<(0|Kt))||(Lt=P+_|0)>>>31|(0|Kt)<(0|Lt)|0))break t;while((0|(L=L+1|0))<(0|Ft));tt=0|t[Z+364>>2],r=0|t[Z+368>>2],h=0|t[Ki>>2],L=0;do if(_=0|t[lt+(L<<2)>>2],0|(P=0|t[r+(_<<2)>>2])&&((0|P)<0|(0|h)<(0|P)||!(-1<(0|(Ze=0|t[tt+(_<<2)>>2]))&(0|Ze)<(0|h)&((Lt=Ze+P|0)>>>31|(0|h)<(0|Lt)|0)==0)))break t;while((0|(L=L+1|0))<(0|Ft))}else r=0|t[Z+368>>2],tt=0|t[Z+364>>2];if(Ft=0|t[e+112>>2],h=0|t[Z+392>>2],0<(0|Ft)){_=0;do if(Lt=0|t[h+(_<<2)>>2],_=_+1|0,(0|Lt)<0|(0|Jt)<=(0|Lt))break t;while((0|_)<(0|Ft));lt=0|t[Z+396>>2],h=0|t[Z+400>>2],L=0;do if(0|(_=0|t[h+(L<<2)>>2])&&((0|_)<0|(0|Kt)<(0|_)||!(-1<(0|(P=0|t[lt+(L<<2)>>2]))&(0|P)<(0|Kt))||(Lt=P+_|0)>>>31|(0|Kt)<(0|Lt)|0))break t;while((0|(L=L+1|0))<(0|Ft));h=0|t[$i>>2],L=0;do if(_=0|t[lt+(L<<2)>>2],0|(P=0|t[r+(_<<2)>>2])&&((0|P)<0|(0|h)<(0|P)||!(-1<(0|(Ze=0|t[tt+(_<<2)>>2]))&(0|Ze)<(0|h)&((Lt=Ze+P|0)>>>31|(0|h)<(0|Lt)|0)==0)))break t;while((0|(L=L+1|0))<(0|Ft))}if(h=0|t[Z+404>>2],lt=0|t[e+120>>2],0<(0|Zt)){_=0;do if(Lt=0|t[h+(_<<2)>>2],_=_+1|0,(0|Lt)<0|(0|lt)<=(0|Lt))break t;while((0|_)<(0|Zt))}if(h=0|t[Z+408>>2],(0|lt)<=0){h=1;break e}_=0;do if(Lt=0|t[h+(_<<2)>>2],_=_+1|0,(0|Lt)<-1|(0|Ie)<=(0|Lt))break t;while((0|_)<(0|lt));for(tt=0|t[Z+412>>2],r=0|t[Z+416>>2],h=0|t[e+124>>2],L=0;;){if(0|(_=0|t[r+(L<<2)>>2])&&((0|_)<0|(0|h)<(0|_)||!(-1<(0|(P=0|t[tt+(L<<2)>>2]))&(0|P)<(0|h))||(Z=P+_|0)>>>31|(0|h)<(0|Z)|0))break t;if((0|lt)<=(0|(L=L+1|0))){h=1;break e}}}while(0);pt(0,1336,zt),h=0}while(0);return(0|R)==319&&(pt(0,1277,U),je(pi,1),Q(e+64|0,4,160),h=0),C=t0,0|h}function Yr(e){var r,a,d=0|J[4+(e|=0)>>0];Q(0|t[(a=e+704|0)>>2],4,32),je(0|t[(r=e+708|0)>>2],4),je(4+(0|t[r>>2])|0,4),je(8+(0|t[r>>2])|0,4),je(12+(0|t[r>>2])|0,4),je(16+(0|t[r>>2])|0,4),je(20+(0|t[r>>2])|0,1),Q(0|t[e+720>>2],4,0|t[t[a>>2]>>2]),Q(0|t[e+724>>2],4,0|t[t[a>>2]>>2]),Q(0|t[e+728>>2],4,0|t[t[a>>2]>>2]),Q(0|t[e+732>>2],4,0|t[t[a>>2]>>2]),Q(0|t[e+736>>2],4,0|t[t[a>>2]>>2]),Q(0|t[e+740>>2],4,0|t[t[a>>2]>>2]),Q(0|t[e+752>>2],4,0|t[4+(0|t[a>>2])>>2]),Q(0|t[e+756>>2],4,0|t[4+(0|t[a>>2])>>2]),Q(0|t[e+760>>2],4,0|t[4+(0|t[a>>2])>>2]),Q(0|t[e+764>>2],4,0|t[4+(0|t[a>>2])>>2]),Q(0|t[e+768>>2],4,0|t[4+(0|t[a>>2])>>2]),Q(0|t[e+772>>2],4,0|t[4+(0|t[a>>2])>>2]),Q(0|t[e+776>>2],4,0|t[4+(0|t[a>>2])>>2]),Q(0|t[e+780>>2],4,0|t[8+(0|t[a>>2])>>2]),Q(0|t[e+784>>2],4,0|t[8+(0|t[a>>2])>>2]),Q(0|t[e+788>>2],4,0|t[8+(0|t[a>>2])>>2]),Q(0|t[e+796>>2],4,0|t[8+(0|t[a>>2])>>2]),Q(0|t[e+800>>2],4,0|t[8+(0|t[a>>2])>>2]),Q(0|t[e+804>>2],4,0|t[8+(0|t[a>>2])>>2]),Q(0|t[e+812>>2],4,0|t[12+(0|t[a>>2])>>2]),Q(0|t[e+816>>2],4,0|t[12+(0|t[a>>2])>>2]),Q(0|t[e+820>>2],4,0|t[12+(0|t[a>>2])>>2]),Q(0|t[e+828>>2],4,0|t[12+(0|t[a>>2])>>2]),Q(0|t[e+852>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+856>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+860>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+868>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+872>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+876>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+880>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+884>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+888>>2],1,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+892>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+896>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+900>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+904>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+908>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+912>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+924>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+928>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+932>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+936>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+940>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+948>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+952>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+976>>2],4,0|t[24+(0|t[a>>2])>>2]),Q(0|t[e+980>>2],4,0|t[28+(0|t[a>>2])>>2]),Q(0|t[e+984>>2],4,0|t[28+(0|t[a>>2])>>2]),Q(0|t[e+988>>2],4,0|t[32+(0|t[a>>2])>>2]),Q(0|t[e+992>>2],4,0|t[32+(0|t[a>>2])>>2]),Q(0|t[e+996>>2],4,0|t[32+(0|t[a>>2])>>2]),Q(0|t[e+1e3>>2],4,0|t[32+(0|t[a>>2])>>2]),Q(0|t[e+1004>>2],4,0|t[32+(0|t[a>>2])>>2]),Q(0|t[e+1008>>2],4,0|t[32+(0|t[a>>2])>>2]),Q(0|t[e+1012>>2],4,0|t[32+(0|t[a>>2])>>2]),Q(0|t[e+1016>>2],4,0|t[36+(0|t[a>>2])>>2]),Q(0|t[e+1020>>2],4,0|t[36+(0|t[a>>2])>>2]),Q(0|t[e+1024>>2],4,0|t[36+(0|t[a>>2])>>2]),Q(0|t[e+1028>>2],4,0|t[40+(0|t[a>>2])>>2]),Q(0|t[e+1040>>2],4,0|t[44+(0|t[a>>2])>>2]),Q(0|t[e+1044>>2],4,0|t[48+(0|t[a>>2])>>2]),Q(0|t[e+1048>>2],4,0|t[48+(0|t[a>>2])>>2]),Q(0|t[e+1032>>2],4,0|t[52+(0|t[a>>2])>>2]),Q(0|t[e+1036>>2],4,0|t[52+(0|t[a>>2])>>2]),Q(0|t[e+1132>>2],4,0|t[56+(0|t[a>>2])>>2]),Q(0|t[e+1136>>2],4,0|t[60+(0|t[a>>2])>>2]),Q(0|t[e+1140>>2],2,0|t[64+(0|t[a>>2])>>2]),Q(0|t[e+1144>>2],4,0|t[68+(0|t[a>>2])>>2]),Q(0|t[e+1148>>2],4,0|t[72+(0|t[a>>2])>>2]),Q(0|t[e+1152>>2],4,0|t[72+(0|t[a>>2])>>2]),Q(0|t[e+1156>>2],4,0|t[72+(0|t[a>>2])>>2]),Q(0|t[e+1160>>2],4,0|t[72+(0|t[a>>2])>>2]),Q(0|t[e+1164>>2],4,0|t[72+(0|t[a>>2])>>2]),Q(0|t[e+1168>>2],4,0|t[76+(0|t[a>>2])>>2]),Q(0|t[e+1172>>2],4,0|t[76+(0|t[a>>2])>>2]),Q(0|t[e+1176>>2],4,0|t[76+(0|t[a>>2])>>2]),Q(0|t[e+1188>>2],4,0|t[80+(0|t[a>>2])>>2]),Q(0|t[e+1192>>2],4,0|t[80+(0|t[a>>2])>>2]),Q(0|t[e+1196>>2],4,0|t[80+(0|t[a>>2])>>2]),Q(0|t[e+1200>>2],4,0|t[80+(0|t[a>>2])>>2]),Q(0|t[e+1204>>2],4,0|t[80+(0|t[a>>2])>>2]),Q(0|t[e+1208>>2],4,0|t[80+(0|t[a>>2])>>2]),Q(0|t[e+1212>>2],4,0|t[80+(0|t[a>>2])>>2]),Q(0|t[e+1216>>2],4,0|t[84+(0|t[a>>2])>>2]),Q(0|t[e+1220>>2],2,0|t[84+(0|t[a>>2])>>2]),Q(0|t[e+1224>>2],4,0|t[88+(0|t[a>>2])>>2]),(255&d)<=1||(Q(0|t[e+808>>2],4,0|t[8+(0|t[a>>2])>>2]),(255&d)<=3||(Q(0|t[e+968>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+972>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+792>>2],4,0|t[8+(0|t[a>>2])>>2]),Q(0|t[e+824>>2],4,0|t[12+(0|t[a>>2])>>2]),Q(0|t[e+864>>2],4,0|t[16+(0|t[a>>2])>>2]),Q(0|t[e+1228>>2],4,0|t[92+(0|t[a>>2])>>2]),Q(0|t[e+1232>>2],4,0|t[92+(0|t[a>>2])>>2]),Q(0|t[e+1236>>2],4,0|t[92+(0|t[a>>2])>>2]),Q(0|t[e+1240>>2],4,0|t[96+(0|t[a>>2])>>2]),Q(0|t[e+1244>>2],4,0|t[96+(0|t[a>>2])>>2]),Q(0|t[e+1248>>2],4,0|t[96+(0|t[a>>2])>>2]),Q(0|t[e+944>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+956>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+960>>2],4,0|t[20+(0|t[a>>2])>>2]),Q(0|t[e+1052>>2],4,0|t[100+(0|t[a>>2])>>2]),Q(0|t[e+1056>>2],4,0|t[100+(0|t[a>>2])>>2]),Q(0|t[e+1060>>2],4,0|t[100+(0|t[a>>2])>>2]),Q(0|t[e+1064>>2],4,0|t[104+(0|t[a>>2])>>2]),Q(0|t[e+1068>>2],4,0|t[104+(0|t[a>>2])>>2]),Q(0|t[e+1072>>2],4,0|t[104+(0|t[a>>2])>>2]),Q(0|t[e+1076>>2],4,0|t[104+(0|t[a>>2])>>2]),Q(0|t[e+1080>>2],4,0|t[104+(0|t[a>>2])>>2]),Q(0|t[e+1084>>2],4,0|t[108+(0|t[a>>2])>>2]),Q(0|t[e+1088>>2],4,0|t[108+(0|t[a>>2])>>2]),Q(0|t[e+1092>>2],4,0|t[108+(0|t[a>>2])>>2]),Q(0|t[e+1096>>2],4,0|t[112+(0|t[a>>2])>>2]),Q(0|t[e+1100>>2],4,0|t[112+(0|t[a>>2])>>2]),Q(0|t[e+1104>>2],4,0|t[112+(0|t[a>>2])>>2]),Q(0|t[e+1108>>2],4,0|t[116+(0|t[a>>2])>>2]),Q(0|t[e+1112>>2],4,0|t[120+(0|t[a>>2])>>2]),Q(0|t[e+1116>>2],4,0|t[120+(0|t[a>>2])>>2]),Q(0|t[e+1120>>2],4,0|t[120+(0|t[a>>2])>>2]),Q(0|t[e+1124>>2],4,0|t[124+(0|t[a>>2])>>2]),Q(0|t[e+1128>>2],4,0|t[124+(0|t[a>>2])>>2])))}function bn(e){e|=0;var r,a,B=0,d=0,f=0,n=0,x=0,y=0,u=0,l=0,g=0,p=0,k=0,M=0,b=C,B=C=C+63&-64;if(C=C+32|0,f=B+24|0,t[(M=B)>>2]=4,t[M+4>>2]=2,t[M+8>>2]=4,function(E,S){var z,O=C=(E=C)+63&-64;C=C+272|0,z=16+O|0,t[O>>2]=S|=0,qr(z,1393,O),function(H){var U,it=C=(U=C)+63&-64;C=C+16|0,t[it>>2]=H|=0,function(ft,rt,st){ft=C=(rt=C)+63&-64,C=C+16|0,t[ft>>2]=st|=0,$r(496,2934,ft),C=rt}(0,0,it),C=U}(z),C=E}(0,M),0|K0(e))return pt(0,1433,B+16|0),C=b,(M=0)|M;if(4<(255&(B=0|J[(d=e+4|0)>>0])))return t[f>>2]=4,t[f+4>>2]=255&B,pt(0,1496,f),C=b,(M=0)|M;if(0|J[(B=e+5|0)>>0]?(je(d,1),Q(e+64|0,4,160),sr(e,M=e+704|(J[B>>0]=0)),Yr(e)):sr(e,M=e+704|0),0|t[1009]||(t[1009]=1),B=0|t[M>>2],k=0|t[B+16>>2],g=(d=0|t[e+912>>2])+(k<<2)|0,0<(0|k)){for(u=e+1144|0,l=0|t[e+908>>2];;){y=(0|t[u>>2])+(t[l>>2]<<2)|0,f=(B=0|t[d>>2])-1|0;e:do if(1<(0|B))for(n=0,x=f;;){for(;!((0|t[(f=y+(n<<2)|0)>>2])<0);){if(!((0|(f=n+1|0))<(0|x))){f=x;break e}n=f}if(hs(0|f,f+4|0,(B-n<<2)-4|0),!((0|n)<(0|(f=x+-1|0)))){B=x;break}B=x,x=f}while(0);if(0<(0|B)&&(B=(0|t[y+(f<<2)>>2])<0?f:B),t[d>>2]=B,g>>>0<=(d=d+4|0)>>>0)break;l=l+4|0}B=0|t[M>>2]}if(0<(0|t[B>>2]))for(d=e+716|0,f=e+712|0,n=0;t[(0|t[f>>2])+(n<<2)>>2]=(0|t[d>>2])+(n<<6),B=0|t[M>>2],(0|(n=n+1|0))<(0|t[B>>2]););if(0<(0|t[B+4>>2]))for(d=e+748|0,f=e+744|0,n=0;t[(0|t[f>>2])+(n<<2)>>2]=(0|t[d>>2])+(n<<6),B=0|t[M>>2],(0|(n=n+1|0))<(0|t[B+4>>2]););if(0<(0|t[B+16>>2]))for(x=e+848|0,y=e+832|0,p=e+1136|0,r=e+896|0,a=e+836|0,u=e+1140|0,l=e+900|0,g=e+840|0,d=e+1144|0,f=e+908|0,n=e+844|0,k=0;t[(0|t[y>>2])+(k<<2)>>2]=(0|t[x>>2])+(k<<6),t[(0|t[a>>2])+(k<<2)>>2]=(0|t[p>>2])+(t[(0|t[r>>2])+(k<<2)>>2]<<2),t[(0|t[g>>2])+(k<<2)>>2]=(0|t[u>>2])+(t[(0|t[l>>2])+(k<<2)>>2]<<1),t[(0|t[n>>2])+(k<<2)>>2]=(0|t[d>>2])+(t[(0|t[f>>2])+(k<<2)>>2]<<2),B=0|t[M>>2],(0|(k=k+1|0))<(0|t[B+16>>2]););if(0<(0|t[B+20>>2]))for(d=e+920|0,f=e+916|0,n=0;t[(0|t[f>>2])+(n<<2)>>2]=(0|t[d>>2])+(n<<6),B=0|t[M>>2],(0|(n=n+1|0))<(0|t[B+20>>2]););if(0<(0|t[B+80>>2]))for(d=e+1184|0,f=e+1180|0,n=0;t[(0|t[f>>2])+(n<<2)>>2]=(0|t[d>>2])+(n<<6),B=0|t[M>>2],(0|(n=n+1|0))<(0|t[B+80>>2]););if(!(1&J[20+(0|t[e+708>>2])>>0]||(0|(l=0|t[B+16>>2]))<=0)){B=0|t[e+1140>>2],d=0|t[e+900>>2],f=0|t[e+904>>2],x=0;do if(n=B+(t[d+(x<<2)>>2]<<1)|0,u=(M=0|t[f+(x<<2)>>2])-1|0,1<(0|M))for(y=0;k=0|$t[(p=n+(y<<1)|0)>>1],$t[p>>1]=0|$t[(M=n+(y+2<<1)|0)>>1],$t[M>>1]=k,(0|(y=y+3|0))<(0|u););while((0|(x=x+1|0))!=(0|l));d=0|t[e+1136>>2],f=0|t[e+896>>2],n=0|t[e+892>>2],y=0;do if(x=(B=d+(t[f+(y<<2)>>2]<<2)|0)+((M=0|t[n+(y<<2)>>2])<<1<<2)|0,0<(0|M))for(B=B+4|0;v[B>>2]=1-+v[B>>2],(B=B+8|0)>>>0<x>>>0;);while((0|(y=y+1|0))!=(0|l))}return C=b,0|e}function En(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,0|K0(e|=0)?(pt(0,1605,a),C=r,(a=0)|a):(a=0|Rt[e+4>>0],C=r,0|a)}function Dn(e){var r,a,d,f,g=0,l=0,n=0,x=0,y=0,u=0,l=64+(e|=0)|0,g=e+144|0;if(ie(l,0|t[e+88>>2],0|t[e+148>>2],0|t[g>>2]),Hr(l,0|t[e+92>>2],0|t[e+152>>2],0|t[796+(0|t[e>>2])>>2],2,0|t[g>>2]),!((0|Rt[4+(0|t[e>>2])>>0])<4||(ie(l,0|t[e+96>>2],0|t[(f=e+120|0)>>2],0|t[g>>2]),ie(l,0|t[e+100>>2],0|t[(n=e+124|0)>>2],0|t[g>>2]),ie(l,0|t[e+104>>2],0|t[(x=e+128|0)>>2],0|t[g>>2]),ie(l,0|t[e+108>>2],0|t[(r=e+132|0)>>2],0|t[g>>2]),ie(l,0|t[e+112>>2],0|t[(a=e+136|0)>>2],0|t[g>>2]),ie(l,0|t[e+116>>2],0|t[(d=e+140|0)>>2],0|t[g>>2]),g=0|t[e+156>>2],l=0|t[f>>2],n=0|t[n>>2],x=0|t[x>>2],(0|(f=0|t[e+56>>2]))<=0))){for(u=y=0;t[g+(y<<2)>>2]=t[l+(u<<2)>>2],t[g+((1|y)<<2)>>2]=t[n+(u<<2)>>2],t[g+((2|y)<<2)>>2]=t[x+(u<<2)>>2],(0|(u=u+1|0))!=(0|f);)y=y+4|0;for(u=0|t[e+160>>2],y=0|t[r>>2],x=0|t[a>>2],g=0|t[d>>2],n=l=0;t[u+(l<<2)>>2]=t[y+(n<<2)>>2],t[u+((1|l)<<2)>>2]=t[x+(n<<2)>>2],t[u+((2|l)<<2)>>2]=t[g+(n<<2)>>2],(0|(n=n+1|0))!=(0|f);)l=l+4|0}}function Ln(e){var r,a,d,f,g=0,l=0,n=0,x=0,y=0,u=0,l=172+(e|=0)|0,g=e+264|0;if(ie(l,0|t[e+196>>2],0|t[e+268>>2],0|t[g>>2]),ie(l,0|t[e+200>>2],0|t[e+284>>2],0|t[g>>2]),ie(l,0|t[e+204>>2],0|t[e+276>>2],0|t[g>>2]),ie(l,0|t[e+208>>2],0|t[e+280>>2],0|t[g>>2]),ie(l,0|t[e+212>>2],0|t[e+272>>2],0|t[g>>2]),!((0|Rt[4+(0|t[e>>2])>>0])<4||(ie(l,0|t[e+216>>2],0|t[(f=e+240|0)>>2],0|t[g>>2]),ie(l,0|t[e+220>>2],0|t[(n=e+244|0)>>2],0|t[g>>2]),ie(l,0|t[e+224>>2],0|t[(x=e+248|0)>>2],0|t[g>>2]),ie(l,0|t[e+228>>2],0|t[(r=e+252|0)>>2],0|t[g>>2]),ie(l,0|t[e+232>>2],0|t[(a=e+256|0)>>2],0|t[g>>2]),ie(l,0|t[e+236>>2],0|t[(d=e+260|0)>>2],0|t[g>>2]),g=0|t[e+296>>2],l=0|t[f>>2],n=0|t[n>>2],x=0|t[x>>2],(0|(f=0|t[e+164>>2]))<=0))){for(u=y=0;t[g+(y<<2)>>2]=t[l+(u<<2)>>2],t[g+((1|y)<<2)>>2]=t[n+(u<<2)>>2],t[g+((2|y)<<2)>>2]=t[x+(u<<2)>>2],(0|(u=u+1|0))!=(0|f);)y=y+4|0;for(u=0|t[e+300>>2],y=0|t[r>>2],x=0|t[a>>2],g=0|t[d>>2],n=l=0;t[u+(l<<2)>>2]=t[y+(n<<2)>>2],t[u+((1|l)<<2)>>2]=t[x+(n<<2)>>2],t[u+((2|l)<<2)>>2]=t[g+(n<<2)>>2],(0|(n=n+1|0))!=(0|f);)l=l+4|0}}function On(e){var r,a,d,f,g=0,l=0,n=0,x=0,y=0,u=0,l=340+(e|=0)|0,g=e+424|0;if(ie(l,0|t[e+364>>2],0|t[e+448>>2],0|t[g>>2]),jr(l,0|t[e+368>>2],0|t[e+440>>2],0|t[g>>2]),Hr(l,0|t[e+372>>2],0|t[e+444>>2],0|t[892+(0|t[e>>2])>>2],2,0|t[g>>2]),!((0|Rt[4+(0|t[e>>2])>>0])<4||(ie(l,0|t[e+376>>2],0|t[(f=e+400|0)>>2],0|t[g>>2]),ie(l,0|t[e+380>>2],0|t[(n=e+404|0)>>2],0|t[g>>2]),ie(l,0|t[e+384>>2],0|t[(x=e+408|0)>>2],0|t[g>>2]),ie(l,0|t[e+388>>2],0|t[(r=e+412|0)>>2],0|t[g>>2]),ie(l,0|t[e+392>>2],0|t[(a=e+416|0)>>2],0|t[g>>2]),ie(l,0|t[e+396>>2],0|t[(d=e+420|0)>>2],0|t[g>>2]),g=0|t[e+452>>2],l=0|t[f>>2],n=0|t[n>>2],x=0|t[x>>2],(0|(f=0|t[e+332>>2]))<=0))){for(u=y=0;t[g+(y<<2)>>2]=t[l+(u<<2)>>2],t[g+((1|y)<<2)>>2]=t[n+(u<<2)>>2],t[g+((2|y)<<2)>>2]=t[x+(u<<2)>>2],(0|(u=u+1|0))!=(0|f);)y=y+4|0;for(u=0|t[e+456>>2],y=0|t[r>>2],x=0|t[a>>2],g=0|t[d>>2],n=l=0;t[u+(l<<2)>>2]=t[y+(n<<2)>>2],t[u+((1|l)<<2)>>2]=t[x+(n<<2)>>2],t[u+((2|l)<<2)>>2]=t[g+(n<<2)>>2],(0|(n=n+1|0))!=(0|f);)l=l+4|0}}function ie(e,r,a,d){r|=0,a|=0,d|=0;var f,n,x,y=0,u=0,l=0,g=0,p=0,k=0;if(0<(0|(y=0|t[8+(e|=0)>>2])))for(u=0|t[e+20>>2],l=0|t[e+12>>2],g=0;v[l+(g<<2)>>2]=+v[r+(g<<2)>>2]*+v[u+(g<<2)>>2],(0|(g=g+1|0))!=(0|y););if(!((0|(n=0|t[e>>2]))<=0))if(k=e+16|0,x=0|t[e+4>>2],f=e+12|0,d)for(r=g=0;;){if(0|t[d>>2]){if(u=(e=0|t[(0|t[k>>2])+(r<<2)>>2])+g|0,0<(0|e))for(y=0|t[f>>2],l=g,p=0;p+=+v[y+(l<<2)>>2],(0|(l=l+1|0))<(0|u););else p=0;v[a+(r<<2)>>2]=p}if((0|(y=r+1|0))==(0|n))break;d=d+4|0,g=(0|t[x+(r<<2)>>2])+g|0,r=y}else for(g=0|t[k>>2],e=r=0;;){if(u=(k=0|t[g+(e<<2)>>2])+r|0,0<(0|k))for(y=0|t[f>>2],l=r,p=0;p+=+v[y+(l<<2)>>2],(0|(l=l+1|0))<(0|u););else p=0;if(v[a+(e<<2)>>2]=p,(0|(y=e+1|0))==(0|n))break;r=(0|t[x+(e<<2)>>2])+r|0,e=y}}function jr(e,r,a,d){r|=0,a|=0,d|=0;var f,n,x=0,y=0,u=0,l=0,g=0,p=0;if(0<(0|(x=0|t[8+(e|=0)>>2])))for(y=0|t[e+20>>2],u=0|t[e+12>>2],l=0;v[u+(l<<2)>>2]=+v[r+(l<<2)>>2]*+v[y+(l<<2)>>2],(0|(l=l+1|0))!=(0|x););if(!((0|(x=0|t[e>>2]))<=0))if(p=e+16|0,f=0|t[e+4>>2],n=e+12|0,d)for(r=l=0;;){if(0|t[d>>2]){if(y=(u=0|t[(0|t[p>>2])+(r<<2)>>2])+l|0,0<(0|u))for(x=0|t[n>>2],u=l,g=0;g+=+v[x+(u<<2)>>2],(0|(u=u+1|0))<(0|y););else g=0;t[a+(r<<2)>>2]=~~(g+.0010000000474974513),x=0|t[e>>2]}if(!((0|(y=r+1|0))<(0|x)))break;d=d+4|0,l=(0|t[f+(r<<2)>>2])+l|0,r=y}else for(l=0|t[p>>2],d=r=0;;){if(y=(p=0|t[l+(d<<2)>>2])+r|0,0<(0|p))for(x=0|t[n>>2],u=r,g=0;g+=+v[x+(u<<2)>>2],(0|(u=u+1|0))<(0|y););else g=0;if(t[a+(d<<2)>>2]=~~(g+.0010000000474974513),!((0|(x=d+1|0))<(0|t[e>>2])))break;r=(0|t[f+(d<<2)>>2])+r|0,d=x}}function Hr(e,r,a,d,f,n){r|=0,a|=0,d|=0,f|=0,n|=0;var x,y,u,l,g,p=0,k=0,M=0,b=0,B=0,E=0,S=0,z=0,O=0,H=0|t[(e|=0)>>2];if(!((0|H)<=0))if(l=e+16|0,u=0|t[e+4>>2],y=e+20|0,x=f<<2,n)for(z=S=0;;){if(0|t[n>>2]&&(b=0|t[a+(z<<2)>>2],e=0|t[d+(z<<2)>>2],E=0|ee(e,f),B=(p=0|t[(0|t[l>>2])+(z<<2)>>2])+S|0,(M=0<(0|E))&&ke(0|b,0,0|ee(x,e)),0<(0|p)&&(O=0|t[y>>2],M))){p=S;do for(e=0|t[r+(p<<2)>>2],k=+v[O+(p<<2)>>2],M=0;v[(g=b+(M<<2)|0)>>2]=+v[g>>2]+k*+v[e+(M<<2)>>2],(0|(M=M+1|0))!=(0|E););while((0|(p=p+1|0))<(0|B))}if((0|(e=z+1|0))==(0|H))break;n=n+4|0,S=(0|t[u+(z<<2)>>2])+S|0,z=e}else for(S=E=0;;){if(M=0|t[a+(S<<2)>>2],e=0|t[d+(S<<2)>>2],B=0|ee(e,f),b=(n=0|t[(0|t[l>>2])+(S<<2)>>2])+E|0,(p=0<(0|B))&&ke(0|M,0,0|ee(x,e)),0<(0|n)&&(z=0|t[y>>2],p)){n=E;do for(e=0|t[r+(n<<2)>>2],k=+v[z+(n<<2)>>2],p=0;v[(O=M+(p<<2)|0)>>2]=+v[O>>2]+k*+v[e+(p<<2)>>2],(0|(p=p+1|0))!=(0|B););while((0|(n=n+1|0))<(0|b))}if((0|(e=S+1|0))==(0|H))break;E=(0|t[u+(S<<2)>>2])+E|0,S=e}}function Wr(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|function(d){d|=0;var f,n,x;return C=(n=C)+560|0,f=(x=n)+548|0,ke(0|x,0,548),_s(d,x,f),C=n,0|t[f>>2]}(e),C=r,0|a):(t[a>>2]=1931,t[a+4>>2]=1949,pt(0,1664,a),C=r,(a=0)|a)}function Zr(e,r,a){r|=0,a|=0;var d,f=0,n=0,x=C,y=C=C+63&-64;return C=C+32|0,n=24+y|0,d=16+y|0,f=8+y|0,(e|=0)?r?((f=r)+15&-16|0)!=(0|f)?(t[d>>2]=1967,t[4+d>>2]=1738,pt(0,1664,d),C=x,(n=0)|n):(r=0|ro(e,r,a))?(C=x,0|r):(t[n>>2]=1967,t[n+4>>2]=1993,pt(0,1664,n),C=x,(n=0)|n):(t[f>>2]=1967,t[f+4>>2]=1698,pt(0,1664,f),C=x,(n=0)|n):(t[y>>2]=1967,t[4+y>>2]=1949,pt(0,1664,y),C=x,(n=0)|n)}function Un(e,r,a,d){if(a=+a,d=+d,(r=+me(r=+r,e=+e)-+me(+d,+a))<-3.1415927410125732)for(;(r+=6.2831854820251465)<-3.1415927410125732;);if(3.1415927410125732<r)for(;3.1415927410125732<(r+=-6.2831854820251465););return+r}function je(e,r){var a;if(!((r=(e|=0)+(r|=0)+-1|0)>>>0<=e>>>0))for(;a=0|J[e>>0],J[e>>0]=0|J[r>>0],e=e+1|0,J[r>>0]=a,e>>>0<(r=r+-1|0)>>>0;);}function Q(e,r,a){e|=0,r|=0;var d,f=0,n=0;if(a|=0)do if(a=a+-1|0,(n=e)>>>0<(f=(e=e+r|0)-1|0)>>>0)for(;d=0|J[n>>0],J[n>>0]=0|J[f>>0],n=n+1|0,J[f>>0]=d,n>>>0<(f=f+-1|0)>>>0;);while(0|a)}function Nn(e){var r,a,d,f=0,n=0,x=0,y=0,E=0,S=0,z=0,u=0,B=0,l=0,g=0,p=0,k=0,M=0,b=(f=0|t[(a=336+(e|=0)|0)>>2])+(20*(u=0|t[(d=e+332|0)>>2])|0)|0,B=e+424|0,E=0|t[e+48>>2],S=0|t[e+316>>2],z=0|t[e+308>>2];if(0<(0|u))for(u=0|t[B>>2],x=0|t[e+448>>2],y=0|t[e+444>>2];0|t[u>>2]&&((0|(n=0|t[f+4>>2]))!=-1&&(v[x>>2]=+v[E+(n<<2)>>2]*+v[x>>2]),(0|(n=0|t[f+8>>2]))!=-1&&(v[x>>2]=+v[S+(n<<2)>>2]*+v[x>>2],g=0|t[y>>2],mi[3&t[z+(n<<5)+24>>2]](e,n,g,g,0|t[f+16>>2]))),!(b>>>0<=(f=f+20|0)>>>0);)u=u+4|0,x=x+4|0,y=y+4|0;if(!((0|Rt[4+(0|t[e>>2])>>0])<4||(z=(f=0|t[a>>2])+(20*(g=0|t[d>>2])|0)|0,E=0|t[e+324>>2],S=0|t[e+328>>2],(0|g)<=0)))for(y=0|t[B>>2],n=f,x=0|t[e+452>>2],f=0|t[e+456>>2];0|t[y>>2]&&(0|(l=0|t[n+8>>2]))!=-1&&(p=+v[x>>2]*+v[(d=E+((B=l<<2)<<2)|0)>>2],v[x>>2]=p,k=+v[(g=x+4|0)>>2]*+v[4+d>>2],v[g>>2]=k,M=+v[(e=x+8|0)>>2]*+v[8+d>>2],v[x>>2]=p<0?0:1<p?1:p,v[g>>2]=k<0?0:1<k?1:k,v[e>>2]=M<0?0:1<M?1:M,v[x+12>>2]=1,M=+v[f>>2],k=+v[(B=S+(B<<2)|0)>>2],v[f>>2]=k=M+k-M*k,M=+v[(e=f+4|0)>>2],p=+v[B+4>>2],v[e>>2]=p=M+p-M*p,r=(M=+v[(g=f+8|0)>>2])+(r=+v[B+8>>2])-M*r,v[f>>2]=k<0?0:1<k?1:k,v[e>>2]=p<0?0:1<p?1:p,v[g>>2]=r<0?0:1<r?1:r,v[f+12>>2]=1),!(z>>>0<=(n=n+20|0)>>>0);)y=y+4|0,x=x+16|0,f=f+16|0}function zn(e){var r,a=0|t[332+(e|=0)>>2];0|t[e+428>>2]&&(ve(0|t[e+460>>2],0|t[e+436>>2],0|(r=a<<2)),ve(0|t[e+464>>2],0|t[e+440>>2],0|r),ve(0|t[e+468>>2],0|t[e+448>>2],0|r),(0|Rt[4+(0|t[e>>2])>>0])<=3||(ve(0|t[e+472>>2],0|t[e+452>>2],0|(r=a<<4)),ve(0|t[e+476>>2],0|t[e+456>>2],0|r)))}function Gn(e){var r,a,d,f,n,x,y,u,l,g,p,U=0,O=0,k=0,M=0,b=0,B=0,E=0,S=0,z=0,O=0|J[4+(0|t[(e|=0)>>2])>>0],H=0|t[e+332>>2],U=e+428|0;if(0|t[e+620>>2]){if(!(((t[U>>2]=0)|H)<=0))for(M=e+424|0,b=e+432|0,U=e+448|0,O=0;k=0|t[(0|t[M>>2])+(O<<2)>>2]&&+v[(0|t[U>>2])+(O<<2)>>2]!=0?127:126,J[(0|t[b>>2])+O>>0]=k,(0|(O=O+1|0))!=(0|H););}else if(0|t[U>>2]){if(!(((t[U>>2]=0)|H)<=0))if(d=e+424|0,x=e+432|0,n=e+448|0,u=e+468|0,f=e+440|0,y=e+464|0,g=e+436|0,l=e+460|0,r=e+452|0,B=e+472|0,a=e+456|0,b=e+476|0,(255&O)<=3)for(U=0;B=(0|t[(0|t[d>>2])+(U<<2)>>2])==0,z=+v[(0|t[n>>2])+(U<<2)>>2],S=(0|t[x>>2])+U|0,E=(1&J[S>>0])==(E=z!=0&(1^B)&1)<<24>>24?E:2|E,E=z!=+v[(0|t[u>>2])+(U<<2)>>2]?4|E:E,E=(0|t[(0|t[f>>2])+(U<<2)>>2])==(0|t[(0|t[y>>2])+(U<<2)>>2])?E:8|E,E=(0|t[(0|t[g>>2])+(U<<2)>>2])==(0|t[(0|t[l>>2])+(U<<2)>>2])?E:16|E,J[S>>0]=B?E:32|E,(0|(U=U+1|0))!=(0|H););else for(M=k=0;p=(0|t[(0|t[d>>2])+(k<<2)>>2])==0,z=+v[(0|t[n>>2])+(k<<2)>>2],O=(0|t[x>>2])+k|0,U=(1&J[O>>0])==(U=z!=0&(1^p)&1)<<24>>24?U:2|U,U=z!=+v[(0|t[u>>2])+(k<<2)>>2]?4|U:U,U=(0|t[(0|t[f>>2])+(k<<2)>>2])==(0|t[(0|t[y>>2])+(k<<2)>>2])?U:8|U,U=(0|t[(0|t[g>>2])+(k<<2)>>2])==(0|t[(0|t[l>>2])+(k<<2)>>2])?U:16|U,U=p?U:32|U,p=(0|t[r>>2])+(M<<2)|0,e=(0|t[B>>2])+(M<<2)|0,+v[p>>2]==+v[e>>2]&&+v[4+p>>2]==+v[e+4>>2]&&+v[8+p>>2]==+v[e+8>>2]&&+v[12+p>>2]==+v[e+12>>2]&&(E=(0|t[a>>2])+(M<<2)|0,S=(0|t[b>>2])+(M<<2)|0,+v[E>>2]==+v[S>>2])&&+v[E+4>>2]==+v[S+4>>2]&&+v[E+8>>2]==+v[S+8>>2]&&+v[E+12>>2]==+v[S+12>>2]||(U|=64),J[O>>0]=U,(0|(k=k+1|0))!=(0|H);)M=M+4|0}else if(!((0|H)<=0))for(k=e+424|0,M=e+432|0,U=e+448|0,O=0;0|t[(0|t[k>>2])+(O<<2)>>2]&&+v[(0|t[U>>2])+(O<<2)>>2]!=0?(S=(0|t[M>>2])+O|0,J[S>>0]=1|J[S>>0]):(S=(0|t[M>>2])+O|0,J[S>>0]=-2&J[S>>0]),(0|(O=O+1|0))!=(0|H););}function Xn(e){var r,a,d,f,n,x,y,nt=0,u=0,l=0,g=0,p=0,k=0,M=0,at=0,Pt=0,Mt=0,kt=0,b=0,B=0,E=0,S=0,z=0,O=0,H=0,U=0,it=0,ft=0,rt=0,st=0,ht=0,_t=0,Y=0,yt=0,at=0|t[(x=60+(e|=0)|0)>>2],nt=0|t[e>>2],Pt=0|t[nt+784>>2],Mt=0|t[(y=e+56|0)>>2],kt=0|t[nt+1028>>2];if(0<(0|Mt)){for(z=e+80|0,U=e+92|0,H=e+88|0,it=e+84|0,O=nt+984|0,p=nt+980|0,M=k=0;;){if(g=0|t[at+(24*k|0)>>2],(0|(st=0|t[(nt=g+24|0)>>2]||0|t[g+28>>2]?15:st))==15&&(t[((st=0)|t[z>>2])+(k<<2)>>2]=t[(S=g+12|0)>>2],0|t[nt>>2])&&(b=0|t[Pt+(k<<2)>>2],ft=(B=0|t[g+16>>2])+((ht=0|t[S>>2])<<2)|0,0<(0|ht)))for(nt=B,u=(0|t[H>>2])+(M<<2)|0,l=(0|t[U>>2])+(M<<2)|0;ht=(0|t[nt>>2])+b|0,t[l>>2]=kt+(t[(0|t[O>>2])+(ht<<2)>>2]<<2),t[u>>2]=t[(0|t[p>>2])+(ht<<2)>>2],!(ft>>>0<=(nt=nt+4|0)>>>0);)u=u+4|0,l=l+4|0;if(0|t[g+28>>2]&&(rt=(E=0|t[g+20>>2])+((ht=0|t[g+12>>2])<<2)|0,0<(0|ht)))for(nt=(0|t[it>>2])+(M<<2)|0,u=E;t[nt>>2]=t[u>>2],!(rt>>>0<=(u=u+4|0)>>>0);)nt=nt+4|0;if((0|(k=k+1|0))==(0|Mt))break;M=(0|t[g+8>>2])+M|0}nt=0|t[e>>2]}if(!((0|Rt[nt+4>>0])<4||(n=0|t[x>>2],ht=0|t[nt+792>>2],(0|(x=0|t[y>>2]))<=0)))for(a=e+96|0,r=e+100|0,y=e+104|0,f=e+108|0,d=e+112|0,st=e+116|0,ft=nt+1228|0,U=nt+1232|0,H=nt+1236|0,rt=nt+1240|0,it=nt+1244|0,at=nt+1248|0,Mt=Pt=0;;){if(nt=0|t[n+(24*Pt|0)>>2],0|t[nt+24>>2]&&(_t=0|t[ht+(Pt<<2)>>2],yt=(Y=0|t[nt+16>>2])+((e=0|t[nt+12>>2])<<2)|0,0<(0|e)))for(u=0|t[ft>>2],l=0|t[U>>2],g=0|t[H>>2],p=0|t[rt>>2],k=0|t[it>>2],M=0|t[at>>2],kt=Y,b=(0|t[y>>2])+(Mt<<2)|0,B=(0|t[r>>2])+(Mt<<2)|0,E=(0|t[a>>2])+(Mt<<2)|0,S=(0|t[st>>2])+(Mt<<2)|0,z=(0|t[d>>2])+(Mt<<2)|0,O=(0|t[f>>2])+(Mt<<2)|0;e=(0|t[kt>>2])+_t|0,t[E>>2]=t[u+(e<<2)>>2],t[B>>2]=t[l+(e<<2)>>2],t[b>>2]=t[g+(e<<2)>>2],t[O>>2]=t[p+(e<<2)>>2],t[z>>2]=t[k+(e<<2)>>2],t[S>>2]=t[M+(e<<2)>>2],!(yt>>>0<=(kt=kt+4|0)>>>0);)b=b+4|0,B=B+4|0,E=E+4|0,S=S+4|0,z=z+4|0,O=O+4|0;if((0|(Pt=Pt+1|0))==(0|x))break;Mt=(0|t[nt+8>>2])+Mt|0}}function Yn(e){var r,a,d,f,n,x,y=0,u=0,l=0,g=0,p=0,k=0,M=0,b=0,B=0,E=0,S=0,z=0,O=0,H=0,re=0,U=0,it=0,ft=0,rt=0,st=0,ht=0,_t=0,Y=0,yt=0,at=0,nt=0,Pt=0,Mt=0,kt=0,Yt=0,Gt=0,Ot=0,Tt=0,jt=0,Qt=0,Ut=0,Ht=0,xt=0,Bt=0|t[168+(e|=0)>>2],X=0|t[e>>2],re=0|t[816+X>>2];if(0<(0|(U=0|t[(x=e+164|0)>>2])))for(yt=e+188|0,st=e+200|0,Mt=e+204|0,Yt=e+208|0,f=e+212|0,at=e+196|0,n=e+192|0,rt=992+X|0,Pt=996+X|0,kt=1e3+X|0,d=1004+X|0,nt=988+X|0,r=1008+X|0,ht=e+288|0,a=1012+X|0,_t=e+292|0,Tt=Ot=0;;){if(it=0|t[Bt+(12*Ot|0)>>2],(0|(jt=0|t[(y=it+24|0)>>2]||0|t[it+28>>2]?14:jt))==14&&(t[((jt=0)|t[yt>>2])+(Ot<<2)>>2]=t[(Y=it+12|0)>>2],0|t[y>>2])){if(y=0|t[re+(Ot<<2)>>2],b=(u=0|t[it+16>>2])+((H=0|t[Y>>2])<<2)|0,0<(0|H))for(l=0|t[rt>>2],g=0|t[Pt>>2],p=0|t[kt>>2],k=0|t[d>>2],M=0|t[nt>>2],B=(0|t[st>>2])+(Tt<<2)|0,E=u,S=(0|t[at>>2])+(Tt<<2)|0,z=(0|t[Mt>>2])+(Tt<<2)|0,O=(0|t[Yt>>2])+(Tt<<2)|0,H=(0|t[f>>2])+(Tt<<2)|0;xt=(0|t[E>>2])+y|0,t[B>>2]=t[l+(xt<<2)>>2],t[z>>2]=t[g+(xt<<2)>>2],t[O>>2]=t[p+(xt<<2)>>2],t[H>>2]=t[k+(xt<<2)>>2],t[S>>2]=t[M+(xt<<2)>>2],!(b>>>0<=(E=E+4|0)>>>0);)B=B+4|0,S=S+4|0,z=z+4|0,O=O+4|0,H=H+4|0;xt=(0|t[u>>2])+y|0,t[(0|t[ht>>2])+(Ot<<2)>>2]=t[(0|t[r>>2])+(xt<<2)>>2],t[(0|t[_t>>2])+(Ot<<2)>>2]=t[(0|t[a>>2])+(xt<<2)>>2]}if(0|t[it+28>>2]&&(Gt=(ft=0|t[it+20>>2])+((xt=0|t[it+12>>2])<<2)|0,0<(0|xt)))for(y=(0|t[n>>2])+(Tt<<2)|0,u=ft;t[y>>2]=t[u>>2],!(Gt>>>0<=(u=u+4|0)>>>0);)y=y+4|0;if((0|(Ot=Ot+1|0))==(0|U))break;Tt=(0|t[it+8>>2])+Tt|0}if(!((0|Rt[4+X>>0])<4||(Yt=0|t[824+X>>2],(0|(yt=0|t[x>>2]))<=0)))for(Pt=e+216|0,nt=e+220|0,at=e+224|0,kt=e+228|0,Mt=e+232|0,Y=e+236|0,ht=1228+X|0,rt=1232+X|0,ft=1236+X|0,_t=1240+X|0,st=1244+X|0,b=1248+X|0,E=B=0;;){if(M=0|t[Bt+(12*B|0)>>2],0|t[M+24>>2]&&(Ut=0|t[Yt+(B<<2)>>2],Ht=(Qt=0|t[M+16>>2])+((xt=0|t[M+12>>2])<<2)|0,0<(0|xt)))for(y=0|t[ht>>2],u=0|t[rt>>2],l=0|t[ft>>2],g=0|t[_t>>2],p=0|t[st>>2],k=0|t[b>>2],S=Qt,z=(0|t[at>>2])+(E<<2)|0,O=(0|t[nt>>2])+(E<<2)|0,H=(0|t[Pt>>2])+(E<<2)|0,re=(0|t[Y>>2])+(E<<2)|0,U=(0|t[Mt>>2])+(E<<2)|0,it=(0|t[kt>>2])+(E<<2)|0;xt=(0|t[S>>2])+Ut|0,t[H>>2]=t[y+(xt<<2)>>2],t[O>>2]=t[u+(xt<<2)>>2],t[z>>2]=t[l+(xt<<2)>>2],t[it>>2]=t[g+(xt<<2)>>2],t[U>>2]=t[p+(xt<<2)>>2],t[re>>2]=t[k+(xt<<2)>>2],!(Ht>>>0<=(S=S+4|0)>>>0);)z=z+4|0,O=O+4|0,H=H+4|0,re=re+4|0,U=U+4|0,it=it+4|0;if((0|(B=B+1|0))==(0|yt))break;E=(0|t[M+8>>2])+E|0}}function jn(e){var r,a,d,f,nt=0,n=0,x=0,y=0,u=0,l=0,g=0,p=0,at=0,Pt=0,Mt=0,kt=0,k=0,M=0,b=0,B=0,E=0,S=0,z=0,O=0,H=0,U=0,it=0,ft=0,rt=0,st=0,ht=0,_t=0,Y=0,yt=0,at=0|t[(d=336+(e|=0)|0)>>2],nt=0|t[e>>2],Pt=0|t[nt+856>>2],Mt=0|t[(f=e+332|0)>>2],kt=0|t[nt+1028>>2];if(0<(0|Mt)){for(E=e+356|0,U=e+372|0,O=e+364|0,S=e+368|0,it=e+360|0,z=nt+1024|0,H=nt+1016|0,l=nt+1020|0,p=g=0;;){if(u=0|t[at+(20*g|0)>>2],(0|(st=0|t[(nt=u+24|0)>>2]||0|t[u+28>>2]?15:st))==15&&(t[((st=0)|t[E>>2])+(g<<2)>>2]=t[(B=u+12|0)>>2],0|t[nt>>2])&&(k=0|t[Pt+(g<<2)>>2],ft=(M=0|t[u+16>>2])+((ht=0|t[B>>2])<<2)|0,0<(0|ht)))for(nt=(0|t[S>>2])+(p<<2)|0,n=M,x=(0|t[O>>2])+(p<<2)|0,y=(0|t[U>>2])+(p<<2)|0;ht=(0|t[n>>2])+k|0,t[y>>2]=kt+(t[(0|t[z>>2])+(ht<<2)>>2]<<2),t[x>>2]=t[(0|t[H>>2])+(ht<<2)>>2],t[nt>>2]=t[(0|t[l>>2])+(ht<<2)>>2],!(ft>>>0<=(n=n+4|0)>>>0);)nt=nt+4|0,x=x+4|0,y=y+4|0;if(0|t[u+28>>2]&&(rt=(b=0|t[u+20>>2])+((ht=0|t[u+12>>2])<<2)|0,0<(0|ht)))for(nt=(0|t[it>>2])+(p<<2)|0,n=b;t[nt>>2]=t[n>>2],!(rt>>>0<=(n=n+4|0)>>>0);)nt=nt+4|0;if((0|(g=g+1|0))==(0|Mt))break;p=(0|t[u+8>>2])+p|0}nt=0|t[e>>2]}if(!((0|Rt[nt+4>>0])<4||(a=0|t[d>>2],ht=0|t[nt+864>>2],(0|(ft=0|t[f>>2]))<=0)))for(d=e+376|0,st=e+380|0,rt=e+384|0,r=e+388|0,f=e+392|0,it=e+396|0,H=nt+1228|0,z=nt+1232|0,S=nt+1236|0,U=nt+1240|0,O=nt+1244|0,p=nt+1248|0,Pt=at=0;;){if(nt=0|t[a+(20*at|0)>>2],0|t[nt+24>>2]&&(_t=0|t[ht+(at<<2)>>2],yt=(Y=0|t[nt+16>>2])+((e=0|t[nt+12>>2])<<2)|0,0<(0|e)))for(n=0|t[H>>2],x=0|t[z>>2],y=0|t[S>>2],u=0|t[U>>2],l=0|t[O>>2],g=0|t[p>>2],Mt=Y,kt=(0|t[rt>>2])+(Pt<<2)|0,k=(0|t[st>>2])+(Pt<<2)|0,M=(0|t[d>>2])+(Pt<<2)|0,b=(0|t[it>>2])+(Pt<<2)|0,B=(0|t[f>>2])+(Pt<<2)|0,E=(0|t[r>>2])+(Pt<<2)|0;e=(0|t[Mt>>2])+_t|0,t[M>>2]=t[n+(e<<2)>>2],t[k>>2]=t[x+(e<<2)>>2],t[kt>>2]=t[y+(e<<2)>>2],t[E>>2]=t[u+(e<<2)>>2],t[B>>2]=t[l+(e<<2)>>2],t[b>>2]=t[g+(e<<2)>>2],!(yt>>>0<=(Mt=Mt+4|0)>>>0);)kt=kt+4|0,k=k+4|0,M=M+4|0,b=b+4|0,B=B+4|0,E=E+4|0;if((0|(at=at+1|0))==(0|ft))break;Pt=(0|t[nt+8>>2])+Pt|0}}function Jr(e){var r,a,d,f=0;if(zn(e|=0),function(n){var x,y,u=0,l=0,g=0,p=0,k=0,M=(u=0|t[(n|=0)+4>>2])+(52*(g=0|t[n>>2])|0)|0;if(!((0|g)<=0))for(g=0|t[n+12>>2];l=+v[g>>2],n=u+4|0,l=(y=(0|t[u+16>>2])==0)?(k=+v[n>>2],p=+v[u+8>>2],l<k?k:p<l?p:l):(k=+v[u+12>>2],(p=+v[n>>2])+k*((l=(l-p)/k)-(0|~~+Le(+l)))),n=u+48|0,+v[(x=u+44|0)>>2]!=l?(t[n>>2]=1,v[x>>2]=l):t[n>>2]=0,y&&(v[g>>2]=l),!(M>>>0<=(u=u+52|0)>>>0);)g=g+4|0}(e+540|0),function(n){var x,y=0,u=0,l=0,g=0,p=0,k=0,M=0,b=0,B=0,E=0,S=0,z=0,O=0,H=0,U=0,it=0,ft=(y=0|t[(n|=0)+544>>2])+(52*(x=0|t[n+540>>2])|0)|0;if(!((0|x)<=0)){x=(0|t[n+620>>2])==0;do e:do if(!(0|t[y>>2])&&(S=+v[y+44>>2],z=+v[y+20>>2],O=+v[y+24>>2],U=(H=0|t[y+28>>2])+(28*(B=0|t[y+32>>2])|0)|0,0<(0|B))){if(!x)for(B=H;;){p=0|t[B>>2];do if(1<=(0|p)){if(g=0|t[B+4>>2],u=(l=+v[g>>2])-z,(0|p)==1){p=!(S<z+l)|!(u<S),u=n=0,E=41;break}if(S<u){g=B+16|0,k=1,u=n=0,E=43;break}if(S<z+l)u=n=p=0,E=41;else{for(n=1;!(S<z+(u=+v[g+(n<<2)>>2]));){if(!((0|(n=n+1|0))<(0|p))){E=40;break}l=u}if((0|E)==40){g=B+16|0,n=p+-(k=1)|0,u=0,E=43;break}u=u-z<S?p=0:(n=n+-1|0,(u-=l)<O?p=0:(p=0,(S-l)/u)),E=41}}else u=n=p=0,E=41;while(0);if((0|E)==41&&(p|(E=0)==(0|t[(g=B+16|0)>>2])?(k=1&p,E=43):(t[B+24>>2]=1,t[B+20>>2]=1,b=B+8|0,M=B+12|0,p=0)),(0|E)==43&&(l=+v[(M=B+12|(E=0))>>2],p=1&((0|t[(b=B+8|0)>>2])!=(0|n)|(it=l!=u)&(u==0|l==0)),t[B+24>>2]=1&it,t[B+20>>2]=p,p=k),v[M>>2]=u,t[b>>2]=n,t[g>>2]=p,U>>>0<=(B=B+28|0)>>>0)break e}if(!(0|t[y+48>>2])){for(n=H;;)if(t[n+24>>2]=0,U>>>(t[n+20>>2]=0)<=(n=n+28|0)>>>0)break e}B=H;do{p=0|t[B>>2];do if(1<=(0|p)){if(g=0|t[B+4>>2],u=(l=+v[g>>2])-z,(0|p)==1){p=!(S<z+l)|!(u<S),u=n=0,E=24;break}if(S<u){g=B+16|0,k=1,u=n=0,E=26;break}if(S<z+l)u=n=p=0,E=24;else{for(n=1;!(S<z+(u=+v[g+(n<<2)>>2]));){if(!((0|(n=n+1|0))<(0|p))){E=21;break}l=u}if((0|E)==21){g=B+16|0,n=p+-(k=1)|0,u=0,E=26;break}u=u-z<S?p=0:(n=n+-1|0,(u-=l)<O?p=0:(p=0,(S-l)/u)),E=24}}else u=n=p=0,E=24;while(0)}while((0|E)==24&&(p|(E=0)==(0|t[(g=B+16|0)>>2])?(k=1&p,E=26):(t[B+24>>2]=1,t[B+20>>2]=1,b=B+8|0,M=B+12|0,p=0)),(0|E)==26&&(l=+v[(M=B+12|(E=0))>>2],p=1&((0|t[(b=B+8|0)>>2])!=(0|n)|(it=l!=u)&(u==0|l==0)),t[B+24>>2]=1&it,t[B+20>>2]=p,p=k),v[M>>2]=u,t[b>>2]=n,t[g>>2]=p,(B=B+28|0)>>>0<U>>>0)}while(0);while((y=y+52|0)>>>0<ft>>>0)}}(e),Hn(e),function(n){var x,y,u,l,g,p=0,k=0,M=0,b=0,B=0,E=0,S=0,z=0,O=0,H=0,U=0,it=0,ft=0,rt=0,st=0,ht=0,_t=(p=0|t[(n|=0)+568>>2])+(36*(g=0|t[n+564>>2])|0)|0;if(!((0|g)<=0)){g=(0|t[n+620>>2])==0;do{y=0|t[p+4>>2];e:do if(0<(0|y))for(E=0|t[p>>2],M=n=k=S=0;;){if(b=0|t[E+(S<<2)>>2],0|t[b+16>>2]){M=1,n=k=0;break e}if(M=M||0|t[b+24>>2],n=n||0|t[b+20>>2],k=k+(+v[b+12>>2]!=0&1)|0,(0|y)<=(0|(S=S+1|0))){E=k,ht=11;break}}else M=n=E=0,ht=11;while(0);e:do if((0|ht)==11)if(k=g?n:1,(ht=0)!=((n=g?M:1)|k|0)&&(t[p+12>>2]=st=1<<E,U=0|t[p>>2],it=0|t[p+16>>2],ft=0|t[p+20>>2],rt=it+(st<<2)|0,(0|E)!=31)){for(ke(0|it,0,((M=it+4|0)>>>0<rt>>>0?rt:M)+~it+4&-4|0),M=ft+(st<<2)|0,b=ft;v[b>>2]=1,(b=b+4|0)>>>0<M>>>0;);if(1<=(0|y)){if(!E)for(E=0,z=1;;){if(b=0|t[U+(E<<2)>>2],S=0|ee(0|t[b+8>>2],z),(B=+v[b+12>>2])==0)for(M=0;t[(H=it+(M<<2)|0)>>2]=(0|t[H>>2])+S,(0|(M=M+1|0))!=(0|st););else t[it>>2]=(0|t[it>>2])+S,v[ft>>2]=(1-B)*+v[ft>>2];if(z=0|ee(0|t[b>>2],z),(0|(E=E+1|0))==(0|y)){M=0;break e}}O=0,H=M=1;do if(x=0|t[U+(O<<2)>>2],b=0|t[8+x>>2],z=0|ee(b,H),(B=+v[(S=12+x|0)>>2])==0)for(b=0;t[(S=it+(b<<2)|0)>>2]=(0|t[S>>2])+z,(0|(b=b+1|0))!=(0|st););else{for(E=0|ee(b+1|0,H),t[it>>2]=(0|t[it>>2])+z,v[ft>>2]=(1-B)*+v[ft>>2],b=1;B=+v[S>>2],t[(u=it+(b<<2)|0)>>2]=((l=(b&M|0)!=0)?E:z)+(0|t[u>>2]),v[(u=ft+(b<<2)|0)>>2]=(l?B:1-B)*+v[u>>2],(0|(b=b+1|0))!=(0|st););M<<=1}while(H=0|ee(0|t[x>>2],H),(0|(O=O+1|0))!=(0|y));M=0}else M=0}else M=0;while(0)}while(t[p+28>>2]=n,t[p+24>>2]=k,t[p+32>>2]=M,(p=p+36|0)>>>0<_t>>>0)}}(e),Wn(e),a=0|t[e+4>>2],r=(f=0|t[e+52>>2])+(a<<2)|0,0<(0|a))for(;d=+v[f>>2],v[f>>2]=d<0?0:1<d?1:d,(f=f+4|0)>>>0<r>>>0;);(function(n,x,y){y|=0;var u=0,l=(x|=0)+(12*(n|=0)|0)|0;if(!((0|n)<=0))for(u=y;;){do if(0|t[x+8>>2]){if((0|(n=0|t[x+4>>2]))!=-1&&!(0|t[y+(n<<2)>>2])){n=0;break}n=(0|t[32+(0|t[x>>2])>>2])==0}else n=0;while(0);if(t[u>>2]=1&n,l>>>0<=(x=x+12|0)>>>0)break;u=u+4|0}})(a,0|t[e+8>>2],0|t[e+40>>2]),function(n){var x,y,u,l,g,it=0,p=0,k=0,M=0,b=0,B=0,E=0,S=0,z=0,O=0,H=0,U=0|t[8+(n|=0)>>2],it=0|t[n>>2],ft=0|t[it+724>>2],rt=0|t[n+4>>2];if(!((0|rt)<=0))for(l=n+28|0,g=n+36|0,u=n+32|0,y=it+976|0,M=k=0;;){if(x=0|t[U+(12*k|0)>>2],(0|(H=0|t[(n=24+x|0)>>2]||0|t[28+x>>2]?6:H))==6&&(t[((H=0)|t[l>>2])+(k<<2)>>2]=t[(S=12+x|0)>>2],0|t[n>>2])&&(E=0|t[ft+(k<<2)>>2],z=(b=0|t[16+x>>2])+((p=0|t[S>>2])<<2)|0,0<(0|p)))for(n=0|t[y>>2],it=(0|t[g>>2])+(M<<2)|0,p=b;t[it>>2]=t[n+((0|t[p>>2])+E<<2)>>2],!(z>>>0<=(p=p+4|0)>>>0);)it=it+4|0;if(0|t[28+x>>2]&&(O=(B=0|t[20+x>>2])+((p=0|t[12+x>>2])<<2)|0,0<(0|p)))for(n=(0|t[u>>2])+(M<<2)|0,it=B;t[n>>2]=t[it>>2],!(O>>>0<=(it=it+4|0)>>>0);)n=n+4|0;if((0|(k=k+1|0))==(0|rt))break;M=(0|t[8+x>>2])+M|0}}(e),function(n){jr(12+(n|=0)|0,0|t[36+n>>2],0|t[44+n>>2],0|t[40+n>>2])}(e),function(n){var x,y,u,l,g,p,k=0,M=0,b=C=(p=C)+63&-64;if(C=C+16|0,g=(k=0|t[308+(n|=0)>>2])+((M=0|t[n+304>>2])<<5)|0,y=0|t[n+40>>2],u=0|t[n+312>>2],l=0|t[n+144>>2],x=0|t[n+264>>2],(0|M)<=0)C=p;else{for(M=u;;){do if(0|t[k+28>>2]){if((0|(n=0|t[k+4>>2]))!=-1&&!(0|t[y+(n<<2)>>2])){n=0;break}if((0|(n=0|t[k+8>>2]))!=-1&&!(0|t[u+(n<<2)>>2])){n=0;break}n=(0|t[32+(0|t[k>>2])>>2])==0}else n=0;while(0);switch(n&=1,t[M>>2]=n,0|t[k+12>>2]){case 0:t[l+(t[k+16>>2]<<2)>>2]=n;break;case 1:t[x+(t[k+16>>2]<<2)>>2]=n;break;default:pt(0,2874,b)}if(g>>>0<=(k=k+32|0)>>>0)break;M=M+4|0}C=p}}(e),Xn(e),Yn(e),Dn(e),Ln(e),function(n){var x=0,y=0,u=(x=0|t[(n|=0)+336>>2])+(20*(y=0|t[n+332>>2])|0)|0,l=0|t[n+40>>2],g=0|t[n+312>>2];if(!((0|y)<=0))for(y=0|t[n+424>>2];;){do if(0|t[x+12>>2]){if((0|(n=0|t[x+4>>2]))!=-1&&!(0|t[l+(n<<2)>>2])){n=0;break}if((0|(n=0|t[x+8>>2]))!=-1&&!(0|t[g+(n<<2)>>2])){n=0;break}n=(0|t[32+(0|t[x>>2])>>2])==0}else n=0;while(0);if(t[y>>2]=1&n,u>>>0<=(x=x+20|0)>>>0)break;y=y+4|0}}(e),jn(e),On(e),function(n){var x,y,u,l,g,it=0,p=0,k=0,M=0,b=0,B=0,E=0,S=0,z=0,O=0,H=0,U=0|t[504+(n|=0)>>2],it=0|t[n>>2],ft=0|t[it+1192>>2],rt=0|t[n+500>>2];if(!((0|rt)<=0))for(l=n+524|0,g=n+532|0,u=n+528|0,y=it+1224|0,M=k=0;;){if(x=0|t[U+(24*k|0)>>2],(0|(H=0|t[(n=24+x|0)>>2]||0|t[28+x>>2]?6:H))==6&&(t[((H=0)|t[l>>2])+(k<<2)>>2]=t[(S=12+x|0)>>2],0|t[n>>2])&&(E=0|t[ft+(k<<2)>>2],z=(b=0|t[16+x>>2])+((p=0|t[S>>2])<<2)|0,0<(0|p)))for(n=0|t[y>>2],it=(0|t[g>>2])+(M<<2)|0,p=b;t[it>>2]=t[n+((0|t[p>>2])+E<<2)>>2],!(z>>>0<=(p=p+4|0)>>>0);)it=it+4|0;if(0|t[28+x>>2]&&(O=(B=0|t[20+x>>2])+((p=0|t[12+x>>2])<<2)|0,0<(0|p)))for(n=(0|t[u>>2])+(M<<2)|0,it=B;t[n>>2]=t[it>>2],!(O>>>0<=(it=it+4|0)>>>0);)n=n+4|0;if((0|(k=k+1|0))==(0|rt))break;M=(0|t[8+x>>2])+M|0}}(e),function(n){ie(508+(n|=0)|0,0|t[532+n>>2],0|t[536+n>>2],0)}(e),eo(e),io(e),function(n){var x=0,y=0,u=0,l=0,g=0,p=(x=0|t[8+(n|=0)>>2])+(12*(g=0|t[n+4>>2])|0)|0,k=0|t[n+48>>2];if(!((0|g)<=0))for(g=0|t[n+40>>2],y=k,n=0|t[n+52>>2];0|t[g>>2]&&(u=+v[n>>2],v[y>>2]=u,(0|(l=0|t[x+4>>2]))!=-1)&&(v[y>>2]=u*+v[k+(l<<2)>>2]),!(p>>>0<=(x=x+12|0)>>>0);)g=g+4|0,y=y+4|0,n=n+4|0}(e),function(n){var x=0,y=0,u=0,l=0|t[304+(n|=0)>>2];if(!((0|l)<=0))for(x=0|t[312+n>>2],y=0|t[308+n>>2],u=0;0|t[x>>2]&&ms[3&t[y+20>>2]](n,u),(0|(u=u+1|0))!=(0|l);)x=x+4|0,y=y+32|0}(e),Nn(e),to(e),function(n){var x,y,u=0,l=0,g=0,p=0,k=0;if(!(0|t[(n|=0)+624>>2]||(x=(u=0|t[n+336>>2])+(20*(p=0|t[n+332>>2])|0)|0,(0|p)<=0)))for(p=0|t[n+424>>2],n=0|t[n+444>>2];;){if(0|t[p>>2]&&(g=0|t[n>>2],k=(l=0|t[u+16>>2])<<1,0<(0|l)))for(l=1;v[(y=g+(l<<2)|0)>>2]=-+v[y>>2],(0|(l=l+2|0))<(0|k););if(x>>>0<=(u=u+20|0)>>>0)break;p=p+4|0,n=n+4|0}}(e),function(n){var x,y,z=0,O=0,H=0,U=0,u=0,l=0,g=0,S=0,p=0,k=0,M=0,b=0,B=0,E=0|t[(n|=0)+480>>2],S=(y=0|t[n+484>>2])+(28*E|0)|0,z=0|t[n+440>>2],O=0|t[n+44>>2],H=0|t[n+40>>2],U=0|t[n+424>>2];if(!((0|E)<=0)){p=y;do if(0<(0|(u=0|t[p+4>>2])))for(l=0|t[p+12>>2],g=p+20|0,k=0;B=0|t[l+(k<<4)+4>>2],b=(0|t[l+(k<<4)>>2])==1,t[l+(k<<4)+12>>2]=t[(0|t[(b?H:U)+(B<<2)>>2]?(b?O:z)+(B<<2)|0:g)>>2],(0|(k=k+1|0))!=(0|u););while((p=p+28|0)>>>0<S>>>0);x=0|t[n+436>>2],b=n+488|0,B=n+492|0,k=n+496|0,M=0;do{if(0<(0|t[(n=y+(28*M|0)+24|0)>>2])){for(z=0|t[b>>2],H=0;t[z+(H<<2)>>2]=-1,(0|(H=H+1|0))<(0|(O=0|t[n>>2])););if(0<(0|O))for(z=0|t[k>>2],O=0;t[z+(O<<2)>>2]=-1,(0|(O=O+1|0))<(0|t[n>>2]););}if(0<(0|t[(p=y+(28*M|0)+4|0)>>2])){for(S=0|t[B>>2],O=0;t[S+(O<<2)>>2]=-1,(0|(O=O+1|0))<(0|(z=0|t[p>>2])););if(0<(0|z))for(H=0|t[y+(28*M|0)+12>>2],u=y+(28*M|0)+20|0,U=0|t[k>>2],g=0;O=(0|t[H+(g<<4)+12>>2])-(0|t[u>>2])|0,z=(0|(z=0|t[(l=U+(O<<2)|0)>>2]))==-1?(0|t[b>>2])+(O<<2)|0:S+(z<<2)|0,t[z>>2]=g,(0|(g=(t[l>>2]=g)+1|0))<(0|t[p>>2]););}if(0<(0|(z=0|t[n>>2]))){g=0|t[b>>2],S=y+(28*M|0)+12|0,O=(l=0)|t[y+(28*M|0)+8>>2];do if((0|(H=0|t[g+(l<<2)>>2]))!=-1){for(U=0|t[S>>2],u=0|t[B>>2];O=(z=(0|t[U+(H<<4)>>2])==1?(z=0|t[U+(H<<4)+8>>2],t[y+(28*z|0)+8>>2]=O,0|t[y+(28*z|0)>>2]):(t[x+(t[U+(H<<4)+4>>2]<<2)>>2]=O,1))+O|0,!((0|(H=0|t[u+((p=H)<<2)>>2]))<=(0|p)|(0|H)==-1););z=0|t[n>>2]}while((0|(l=l+1|0))<(0|z))}}while((0|(M=M+1|0))!=(0|E))}}(e),Gn(e),t[e+620>>2]=0}function Hn(e){var r,a,d=0,f=0,n=0,x=0,y=0,u=0,l=0,g=0,p=0,k=0,M=0,b=0,B=0,E=0,S=0;if(!((0|Rt[4+(0|t[(e|=0)>>2])>>0])<4||(a=(d=0|t[e+544>>2])+(52*(r=0|t[e+540>>2])|0)|0,(0|r)<=0))){r=(0|t[e+620>>2])==0;do e:do if((0|t[d>>2])==1&&(b=+v[d+44>>2],E=(B=0|t[d+36>>2])+(28*(l=0|t[d+40>>2])|0)|0,0<(0|l))){if(!r)for(u=B;;){n=0|t[u>>2];do if(2<=(0|n)&&(k=0|t[u+4>>2],!(b<=(M=+v[k>>2])))){for(x=1,y=M;;){if(e=x+1|0,b<(f=+v[k+(x<<2)>>2])){l=25;break}if(!((0|e)<(0|n))){l=26;break}x=e,y=f}if((0|l)==25){e=x+-1|0,f=(b-y)/(f-y);break}if((0|l)==26){e=n+-1|0,f=0;break}}else f=e=0;while(0);if(y=+v[(x=u+16|0)>>2],n=1&((0|t[(l=u+12|0)>>2])!=(0|e)|(S=y!=f)&(f==0|y==0)),t[u+24>>2]=1&S,t[u+20>>2]=n,v[x>>2]=f,t[l>>2]=e,E>>>0<=(u=u+28|0)>>>0)break e}if(!(0|t[d+48>>2])){for(e=B;;)if(t[e+24>>2]=0,E>>>(t[e+20>>2]=0)<=(e=e+28|0)>>>0)break e}u=B;do{n=0|t[u>>2];do if(2<=(0|n)&&(g=0|t[u+4>>2],!(b<=(p=+v[g>>2])))){for(x=1,y=p;;){if(e=x+1|0,b<(f=+v[g+(x<<2)>>2])){l=17;break}if(!((0|e)<(0|n))){l=18;break}x=e,y=f}if((0|l)==17){e=x+-1|0,f=(b-y)/(f-y);break}if((0|l)==18){e=n+-1|0,f=0;break}}else f=e=0;while(0)}while(y=+v[(l=u+16|0)>>2],x=1&((0|t[(S=u+12|0)>>2])!=(0|e)|(n=y!=f)&(f==0|y==0)),t[u+24>>2]=1&n,t[u+20>>2]=x,v[l>>2]=f,t[S>>2]=e,(u=u+28|0)>>>0<E>>>0)}while(0);while((d=d+52|0)>>>0<a>>>0)}}function Wn(e){var r,a,d,f,n,x,y=0,u=0,l=0,g=0,p=0,k=0,M=0,b=0,B=0,E=0,S=0,z=0,O=0,H=0,U=0;if(!((0|Rt[4+(0|t[(e|=0)>>2])>>0])<4||(x=(y=0|t[e+592>>2])+(48*(n=0|t[e+588>>2])|0)|0,(0|n)<=0))){n=(0|t[e+620>>2])==0;do{if(e=0|t[y>>2],l=n?0|t[e+24>>2]:1,(B=n?0|t[e+20>>2]:1)|l){M=0|t[e+12>>2],u=+v[e+16>>2],k=(0|M)==(0|(e=0|t[e+8>>2]));do if(u!=0){if(p=M+1|0,k){u=(l=e=t[y+8>>2]=1)-u,S=11;break}e=(0|p)==(0|e)?1:2,S=10;break}while(e=1&(1^k),S=10,0);(0|S)==10&&(S=0,t[y+8>>2]=e,l?(p=M,e=B,S=11):(p=M,e=B,l=0)),(0|S)==11&&(v[y+20>>2]=1-u,v[y+24>>2]=u),e?(t[y+12>>2]=p,t[y+16>>2]=p+1):e=0}else e=B;d=0|t[y+36>>2];e:do if(0<(0|d)){if(f=0|t[y+40>>2],!n)for(M=0,u=1;;){k=0|t[f+(M<<2)>>2],p=0|t[k>>2];do if(0|p&&(z=0|t[k+4>>2],O=0|t[k+8>>2],H=0|t[k+12>>2],U=+v[p+44>>2],1<=(0|H))){if((0|H)==1){g=+v[O>>2];break}if(U<=(g=+v[z>>2])){g=+v[O>>2];break}for(p=1;;){if(U<(b=+v[z+(p<<2)>>2])){S=43;break}if(!((0|(p=p+1|0))<(0|H))){S=44;break}g=b}if((0|S)==43){g=(1-(g=(U-g)/(b-g)))*+v[O+(p+-1<<2)>>2]+g*+v[O+(p<<2)>>2];break}if((0|S)==44){g=+v[O+(H+-1<<2)>>2];break}}else g=1;while(0);if(u=u<(v[k+16>>2]=g)?u:g,(0|(M=M+1|0))==(0|d))break e}E=0,u=1;do{a=0|t[f+(E<<2)>>2],p=0|t[a>>2];do if(p){if(!(0|t[p+48>>2])){g=+v[16+a>>2];break}k=0|t[4+a>>2],M=0|t[8+a>>2],B=0|t[12+a>>2],r=+v[p+44>>2];do if(1<=(0|B)){if((0|B)==1){g=+v[M>>2];break}if(r<=(g=+v[k>>2])){g=+v[M>>2];break}for(p=1;;){if(r<(b=+v[k+(p<<2)>>2])){S=29;break}if(!((0|(p=p+1|0))<(0|B))){S=28;break}g=b}if((0|S)==28){g=+v[M+(B+-1<<2)>>2];break}if((0|S)==29){g=(1-(g=(r-g)/(b-g)))*+v[M+(p+-1<<2)>>2]+g*+v[M+(p<<2)>>2];break}}else g=1;while(0);v[16+a>>2]=g}else g=v[16+a>>2]=1;while(0)}while(u=u<g?u:g,(0|(E=E+1|0))!=(0|d))}else u=1;while(0)}while(v[y+44>>2]=u,t[y+28>>2]=e,t[y+32>>2]=l,(y=y+48|0)>>>0<x>>>0)}}function qr(e,r,a){e|=0,r|=0,a|=0;var d,f,n=0,x=C,y=C=C+63&-64;C=C+144|0,ve(0|y,640,144),t[48+y>>2]=n=(n=-2-e|0)>>>0<256?n:256,t[(d=20+y|0)>>2]=e,f=(t[44+y>>2]=e)+n|0,t[(e=16+y|0)>>2]=f,t[28+y>>2]=f,$r(y,r,a),0|n&&(f=0|t[d>>2],J[f+(((0|f)==(0|t[e>>2]))<<31>>31)>>0]=0),C=x}function $r(e,r,a){Jn(e|=0,r|=0,a|=0)}function Zn(e,r,a,d,f,n){e|=0,r=+r,a|=0,d|=0,f|=0,n|=0;var x,y,u=0,l=0,Y=0,g=0,p=0,k=0,M=0,b=0,B=0,E=0,S=0,z=0,O=0,H=0,U=0,it=0,ft=0,rt=0,st=0,ht=0,_t=C,Y=C=C+63&-64;C=C+560|0,g=Y+32|0,S=Y+536|0,rt=12+(Y=(st=ht=Y)+540|0)|(t[S>>2]=0),is(r),y=(0|(u=0|ge()))<0?(is(r=-r),u=0|ge(),ft=1,2955):(ft=(2049&f|0)!=0&1,2048&f|0?2958:1&f|0?2961:2956);do if(!0&(2146435072&u|0)==2146435072)ht=(32&n|0)!=0,_e(e,32,a,u=ft+3|0,-65537&f),ue(e,y,ft),ue(e,r!=r|!1?ht?2982:2986:ht?2974:2978,3),_e(e,32,a,u,8192^f);else{if((u=(b=2*+rs(r,S))!=0)&&(t[S>>2]=(0|t[S>>2])-1),(0|(O=32|n))==97){B=0|(k=32&n)?9+y|0:y,M=2|ft,u=12-d|0;do if(!(11<d>>>0|(0|u)==0)){for(r=8;r*=16,(0|(u=u+-1|0))!=0;);if((0|J[B>>0])==45){r=-(r+(-b-r));break}r=b+r-r;break}while(r=b,0);for((0|(u=0|Bi(u=(0|(l=0|t[S>>2]))<0?0-l|0:l,((0|u)<0)<<31>>31,rt)))==(0|rt)&&(J[(u=Y+11|0)>>0]=48),J[u+-1>>0]=43+(l>>31&2),J[(p=u+-2|0)>>0]=n+15,l=(0|d)<1,Y=(8&f|0)==0,u=ht;g=u+1|0,J[u>>0]=k|Rt[480+(ft=~~r)>>0],r=16*(r-(0|ft)),(g-st|0)!=1||Y&l&r==0||(J[g>>0]=46,g=u+2|0),r!=0;)u=g;_e(e,32,a,rt=(u=0|d&&(-2-st+g|0)<(0|d)?d+2+(l=rt)-(Y=p)|0:(l=rt)-st-(Y=p)+g|0)+M|0,f),ue(e,B,M),_e(e,48,a,rt,65536^f),ue(e,ht,st=g-st|0),_e(e,48,u-(st+(ht=l-Y|0))|0,0,0),ue(e,p,ht),_e(e,32,a,rt,8192^f),u=rt;break}for(l=(0|d)<0?6:d,r=u?(Y=(0|t[S>>2])-28|0,t[S>>2]=Y,268435456*b):(Y=0|t[S>>2],b),g=x=(0|Y)<0?g:g+288|0;t[g>>2]=U=~~r>>>0,g=g+4|0,(r=1e9*(r-(U>>>0)))!=0;);if(U=x,0<(0|Y)){u=x;do{if(k=(0|Y)<29?Y:29,u>>>0<=(Y=g+-4|0)>>>0){for(p=0;E=0|qi(0|(E=0|us(0|t[Y>>2],0,0|k)),0|ge(),0|p,0),H=0|qi(0|E,0|(z=0|ge()),0|(H=0|ir(0|(p=0|rr(0|E,0|z,1e9,0)),0|ge(),-1e9,-1)),0|ge()),ge(),t[Y>>2]=H,u>>>0<=(Y=Y+-4|0)>>>0;);p&&(t[(u=u+-4|0)>>2]=p)}e:do if(u>>>0<g>>>0)for(;;){if(0|t[(Y=g+-4|0)>>2])break e;if(!(u>>>0<Y>>>0)){g=Y;break}g=Y}while(0)}while(Y=(0|t[S>>2])-k|0,0<(0|(t[S>>2]=Y)))}else u=x;if((0|Y)<0){d=1+((l+25|0)/9|0)|0,E=(0|O)==102;do if(B=(0|(B=0-Y|0))<9?B:9,u>>>0<g>>>0){for(k=(1<<B)-1|0,p=B?1e9>>>B:1e9,M=0,Y=u;H=0|t[Y>>2],t[Y>>2]=(B?H>>>B:H)+M,M=0|ee(H&k,p),(Y=Y+4|0)>>>0<g>>>0;);u=0|t[u>>2]?u:u+4|0,M&&(t[g>>2]=M,g=g+4|0)}else u=0|t[u>>2]?u:u+4|0;while(g=(0|d)<((H=g-(Y=E?x:u)|0)>>2|0)?Y+(d<<2)|0:g,Y=(0|t[S>>2])+B|0,(0|(t[S>>2]=Y))<0);E=g}else E=g;if(u>>>0<E>>>0){if(Y=9*((U-u|0)>>2)|0,10<=(p=0|t[u>>2])>>>0)for(g=10;Y=Y+1|0,(g=10*g|0)>>>0<=p>>>0;);}else Y=0;if((0|(g=l-((0|O)==102?0:Y)+(((z=(0|l)!=0)&(S=(0|O)==103))<<31>>31)|0))<((9*((H=E-U|0)>>2)|0)-9|0)){if(d=x+4+((g=(0|(H=g+9216|0))/9|0)-1024<<2)|0,(0|(g=H+(0|ee(g,-9))|0))<8)for(p=10;p=10*p|0,(0|g)<7;)g=g+1|0;else p=10;if((M=(d+4|0)==(0|E))&(0|(k=(k=0|t[d>>2])-(B=0|ee(g=(k>>>0)/(p>>>0)|0,p))|0))==0)g=d;else if(b=1&g|0?9007199254740994:9007199254740992,r=k>>>0<(H=p>>>1)>>>0?.5:M&(0|k)==(0|H)?1:1.5,ft&&(b=(H=(0|J[y>>0])==45)?-b:b,r=H?-r:r),t[d>>2]=B,b+r!=b){if(999999999<(t[d>>2]=H=B+p|0)>>>0)for(Y=d;(g=Y+-4|0)>>>(t[Y>>2]=0)<u>>>0&&(t[(u=u+-4|0)>>2]=0),H=1+(0|t[g>>2])|0,999999999<(t[g>>2]=H)>>>0;)Y=g;else g=d;if(Y=9*((U-u|0)>>2)|0,10<=(k=0|t[u>>2])>>>0)for(p=10;Y=Y+1|0,(p=10*p|0)>>>0<=k>>>0;);}else g=d;H=u,u=(O=g+4|0)>>>0<E>>>0?O:E}else H=u,u=E;B=0-Y|0;e:do if(H>>>0<u>>>0)for(;;){if(0|t[(g=u+-4|0)>>2]){E=1,O=u;break e}if(!(H>>>0<g>>>0)){E=0,O=g;break}u=g}else E=0,O=u;while(0);do if(S){if(p=(0|Y)<(0|(u=l+(1&(1^z))|0))&-5<(0|Y)?(l=u+-1-Y|0,n+-1|0):(l=u+-1|0,n+-2|0),!(8&f)){if(E&&0|(it=0|t[O+-4>>2]))if((it>>>0)%10|0)g=0;else for(u=10,g=0;g=g+1|0,!((it>>>0)%((u=10*u|0)>>>0)|0););else g=9;if(u=(9*((O-U|0)>>2)|0)-9|0,(32|p)==102){l=(0|l)<(0|(n=0<(0|(n=u-g|0))?n:0))?l:n;break}l=(0|l)<(0|(n=0<(0|(n=u+Y-g|0))?n:0))?l:n;break}}else p=n;while(0);if(k=(d=(0|l)!=0)?1:f>>>3&1,M=(32|p)==102)u=(z=0)<(0|Y)?Y:0;else{if(((g=rt)-(u=0|Bi(u=(0|Y)<0?B:Y,((0|u)<0)<<31>>31,rt))|0)<2)for(;J[(u=u+-1|0)>>0]=48,(g-u|0)<2;);J[u+-1>>0]=43+(Y>>31&2),J[(u=u+-2|0)>>0]=p,u=g-(z=u)|0}if(_e(e,32,a,u=ft+1+l+k+u|0,f),ue(e,y,ft),_e(e,48,a,u,65536^f),M){M=B=ht+9|0,p=ht+8|0,g=k=x>>>0<H>>>0?x:H;do if(Y=0|Bi(0|t[g>>2],0,B),(0|g)==(0|k))(0|Y)==(0|B)&&(J[p>>0]=48,Y=p);else if(ht>>>0<Y>>>0)for(ke(0|ht,48,Y-st|0);ht>>>0<(Y=Y+-1|0)>>>0;);while(ue(e,Y,M-Y|0),(g=g+4|0)>>>0<=x>>>0);if((8&f|0)==0&(1^d)||ue(e,2990,1),g>>>0<O>>>0&0<(0|l))for(;;){if(ht>>>0<(Y=0|Bi(0|t[g>>2],0,B))>>>0)for(ke(0|ht,48,Y-st|0);ht>>>0<(Y=Y+-1|0)>>>0;);if(ue(e,Y,(0|l)<9?l:9),Y=l+-9|0,!((g=g+4|0)>>>0<O>>>0&9<(0|l))){l=Y;break}l=Y}_e(e,48,l+9|0,9,0)}else{if(H>>>0<(d=E?O:H+4|0)>>>0&-1<(0|l)){S=(8&f|0)==0,E=B=ht+9|0,p=0-st|0,M=ht+8|0,k=H;do{(0|(Y=0|Bi(0|t[k>>2],0,B)))==(0|B)&&(J[M>>0]=48,Y=M);do if((0|k)==(0|H)){if(g=Y+1|0,ue(e,Y,1),S&(0|l)<1){Y=g;break}ue(e,2990,1),Y=g}else{if(Y>>>0<=ht>>>0)break;for(ke(0|ht,48,Y+p|0);ht>>>0<(Y=Y+-1|0)>>>0;);}while(0)}while(ue(e,Y,(0|(st=E-Y|0))<(0|l)?st:l),(k=k+4|0)>>>0<d>>>0&-1<(0|(l=l-st|0)))}_e(e,48,l+18|0,18,0),ue(e,z,rt-z|0)}_e(e,32,a,u,8192^f)}while(0);return C=_t,0|((0|u)<(0|a)?a:u)}function Jn(e,r,a){e|=0,r|=0,a|=0;var d,f,n,x,y,u,l,g=0,p=0,k=C,M=C=C+63&-64;for(C=C+224|0,y=208+M|0,u=80+M|0,p=40+(g=l=160+M|0)|0;(0|(g=g+4|(t[g>>2]=0)))<(0|p););t[y>>2]=t[a>>2],0<=(0|$0(0,r,y,u,l))&&(x=32&(a=0|t[e>>2]),(0|J[e+74>>0])<1&&(t[e>>2]=-33&a),0|t[(p=e+48|0)>>2]?$0(e,r,y,u,l):(a=0|t[(g=e+44|0)>>2],t[g>>2]=M,t[(d=e+28|0)>>2]=M,t[(n=e+20|0)>>2]=M,t[p>>2]=80,t[(f=e+16|0)>>2]=80+M,$0(e,r,y,u,l),0|a&&(w0[3&t[e+36>>2]](e,0,0),t[g>>2]=a,t[p>>2]=0,t[f>>2]=0,t[d>>2]=0,t[n>>2]=0)),t[e>>2]=t[e>>2]|x),C=k}function $0(e,r,a,d,f){e|=0,a|=0,d|=0,f|=0;var n,x,y,u,l,g,p,k,M=0,b=0,B=0,E=0,S=0,z=0,O=0,H=0,U=0,it=0,ft=0,rt=0,st=0,ht=C,_t=C=C+63&-64;C=C+64|0,p=56+_t|0,g=40+_t|0,k=48+(x=_t)|0,_t=60+_t|0,t[p>>2]=r|=0,l=(0|e)!=0,u=n=40+x|0,x=39+x|0,y=4+k|0,E=M=r=0;e:for(;;){do{do if(-1<(0|r)){if((2147483647-r|0)<(0|M)){t[1026]=61,r=-1;break}r=M+r|0;break}while(0);if(O=0|t[p>>2],!((M=0|J[O>>0])<<24>>24)){rt=91;break e}b=O;t:for(;;){switch(M<<24>>24){case 37:rt=10;break t;case 0:M=b;break t}t[p>>2]=ft=b+1|0,M=0|J[ft>>0],b=ft}t:do if((0|rt)==10){rt=0,M=B=b;do if((0|J[B+1>>0])!=37)break t;while(M=M+1|0,t[p>>2]=B=B+2|0,(0|J[B>>0])==37)}while(0)}while(M=M-O|0,l&&ue(e,O,M),(0|M)!=0);if(B=0|t[p>>2],z=0|Zi(M=0|J[B+1>>0])?(b=(z=(0|J[B+2>>0])==36)?3:1,U=z?M+-48|0:-1,z?1:E):(U=-(b=1),E),t[p>>2]=b=B+b|0,31<(B=((M=0|J[b>>0])<<24>>24)-32|0)>>>0|(1<<B&75913|0)==0)S=0;else for(M=0;;){if(E=1<<B|M,t[p>>2]=b=b+1|0,31<(B=((M=0|J[b>>0])<<24>>24)-32|0)>>>0|(1<<B&75913|0)==0){S=E;break}M=E}if(M<<24>>24==42){if(0|Zi(M=0|J[(B=b+1|0)>>0])&&(0|J[b+2>>0])==36)t[f+(M+-48<<2)>>2]=10,E=1,M=b+3|0,b=0|t[d+((0|J[B>>0])-48<<3)>>2];else{if(0|z){r=-1;break}l?(E=3+(0|t[a>>2])&-4,b=0|t[E>>2],t[a>>2]=E+4,E=0,M=B):(M=B,b=E=0)}B=t[p>>2]=M,H=(it=(0|b)<0)?8192|S:S,ft=E,it=it?0-b|0:b}else{if((0|(M=0|Kr(p)))<0){r=-1;break}B=0|t[p>>2],H=S,ft=z,it=M}do if((0|J[B>>0])==46){if((0|J[(M=B+1|0)>>0])!=42){t[p>>2]=M,S=0|Kr(p),M=0|t[p>>2];break}if(0|Zi(b=0|J[(M=B+2|0)>>0])&&(0|J[B+3>>0])==36){t[f+(b+-48<<2)>>2]=10,S=0|t[d+((0|J[M>>0])-48<<3)>>2],t[p>>2]=M=B+4|0;break}if(0|ft){r=-1;break e}l?(z=3+(0|t[a>>2])&-4,b=0|t[z>>2],t[a>>2]=z+4):b=0,t[p>>2]=M,S=b}else M=B,S=-1;while(0);for(z=0;;){if(57<((0|J[M>>0])-65|0)>>>0){r=-1;break e}if(t[p>>2]=b=M+1|0,!(((E=255&(B=0|J[(0|J[M>>0])-65+(16+(58*z|0))>>0]))-1|0)>>>0<8))break;M=b,z=E}if(!(B<<24>>24)){r=-1;break}b=-1<(0|U);do if(B<<24>>24==19){if(b){r=-1;break e}rt=52}else{if(b){t[f+(U<<2)>>2]=E,U=0|t[4+(E=d+(U<<3)|0)>>2],t[(rt=g)>>2]=t[E>>2],t[rt+4>>2]=U,rt=52;break}if(!l){r=0;break e}Qr(g,E,a),rt=53}while(0);(0|rt)==52&&(rt=0,l?rt=53:M=0);t:do if((0|rt)==53){B=(rt=0)!=(0|z)&(15&(B=0|J[M>>0])|0)==3?-33&B:B,M=-65537&H,U=8192&H|0?M:H;i:do switch(0|B){case 110:switch((255&z)<<24>>24){case 0:case 1:t[t[g>>2]>>2]=r,M=0;break t;case 2:M=0|t[g>>2],t[M>>2]=r,t[M+4>>2]=((0|r)<0)<<31>>31,M=0;break t;case 3:$t[t[g>>2]>>1]=r,M=0;break t;case 4:J[t[g>>2]>>0]=r,M=0;break t;case 6:t[t[g>>2]>>2]=r,M=0;break t;case 7:M=0|t[g>>2],t[M>>2]=r,t[M+4>>2]=((0|r)<0)<<31>>31,M=0;break t;default:M=0;break t}case 112:M=8|U,b=8<S>>>0?S:8,E=120,rt=65;break;case 88:case 120:M=U,b=S,E=B,rt=65;break;case 111:S=(8&(M=U)|0)==0|(0|(B=u-(z=0|function(Y,yt,at){if(at|=0,!((0|(Y|=0))==0&(0|(yt|=0))==0))for(;J[(at=at+-1|0)>>0]=7&Y|48,!((0|(Y=0|C0(0|Y,0|yt,3)))==0&(0|(yt=0|ge()))==0););return 0|at}(O=0|t[(H=g)>>2],H=0|t[H+4>>2],n))|0))<(0|S)?S:B+1|0,B=0,b=2938,rt=71;break;case 105:case 100:if(M=0|t[(b=g)>>2],(0|(b=0|t[b+4>>2]))<0){M=0|S0(0,0,0|M,0|b),b=0|ge(),t[(B=g)>>2]=M,t[B+4>>2]=b,B=1,E=2938,rt=70;break i}B=(2049&U|0)!=0&1,E=2048&U|0?2939:1&U|0?2940:2938,rt=70;break i;case 117:M=0|t[(b=g)>>2],b=0|t[b+4>>2],B=0,E=2938,rt=70;break;case 99:J[x>>0]=t[g>>2],O=x,z=M,E=1,B=0,b=2938,M=u;break;case 115:O=H=0|(H=0|t[g>>2])?H:2948,z=M,E=(st=(0|(U=0|ts(H,S)))==0)?S:U-H|0,B=0,b=2938,M=st?H+S|0:U;break;case 67:t[k>>2]=t[g>>2],t[y>>2]=0,B=t[g>>2]=k,S=-1,rt=78;break;case 83:if(S){B=0|t[g>>2],rt=78;break i}_e(e,32,it,0,U),M=0,rt=88;break i;case 65:case 71:case 70:case 69:case 97:case 103:case 102:case 101:M=0|Zn(e,+Xt[g>>3],it,S,U,B);break t;default:z=U,E=S,B=0,b=2938,M=u}while(0);i:do if((0|rt)==65)z=0|qn(O=0|t[(H=g)>>2],H=0|t[H+4>>2],n,32&E),S=b,B=(st=(8&M|0)==0|(0|O)==0&(0|H)==0)?0:2,b=st?2938:2938+(E>>>4)|0,rt=71;else if((0|rt)==70)z=0|Bi(O=M,H=b,n),M=U,b=E,rt=71;else if((0|rt)==78){for(M=rt=0,z=B;b=0|t[z>>2];){if((E=(0|(b=0|es(_t,b)))<0)|(S-M|0)>>>0<b>>>0){rt=82;break}if(!((M=b+M|0)>>>0<S>>>0))break;z=z+4|0}if((0|rt)==82&&(rt=0,E)){r=-1;break e}if(_e(e,32,it,M,U),M)for(E=0;;){if(!(b=0|t[B>>2])){rt=88;break i}if((0|M)<(0|(E=(b=0|es(_t,b))+E|0))){rt=88;break i}if(ue(e,_t,b),M>>>0<=E>>>0){rt=88;break}B=B+4|0}else M=0,rt=88}while(0);if((0|rt)==71)st=(rt=0)!=(0|S)|(E=(0|O)!=0|(0|H)!=0),E=u-z+(1&(1^E))|0,O=st?z:n,z=-1<(0|S)?-65537&M:M,E=st?(0|E)<(0|S)?S:E:0,M=u;else if((0|rt)==88){rt=0,_e(e,32,it,M,8192^U),M=(0|M)<(0|it)?it:M;break}_e(e,32,M=(0|it)<(0|(st=(H=(0|E)<(0|(U=M-O|0))?U:E)+B|0))?st:it,st,z),ue(e,b,B),_e(e,48,M,st,65536^z),_e(e,48,H,U,0),ue(e,O,U),_e(e,32,M,st,8192^z)}while(0);E=ft}e:do if((0|rt)==91&&!e)if(E){for(r=1;M=0|t[f+(r<<2)>>2];)if(Qr(d+(r<<3)|0,M,a),10<=(r=r+1|0)>>>0){r=1;break e}for(M=0;;){if(r=r+1|0,0|M){r=-1;break e}if(10<=r>>>0){r=1;break e}M=0|t[f+(r<<2)>>2]}}else r=0;while(0);return C=ht,0|r}function ue(e,r,a){r|=0,a|=0,32&t[(e|=0)>>2]||Kn(r,a,e)}function Zi(e){return((0|e)-48|0)>>>0<10|0}function Kr(e){var r=0,d=0,a=0,d=0|t[(e|=0)>>2];if(0|Zi((r=0|J[d>>0])<<24>>24))for(a=r,r=0;r=(10*r|0)-48+(a<<24>>24)|0,t[e>>2]=d=d+1|0,(0|Zi((a=0|J[d>>0])<<24>>24))!=0;);else r=0;return 0|r}function Qr(e,r,a){e|=0,r|=0,a|=0;var d,f=0,n=0;e:do if(r>>>0<=20)switch(0|r){case 9:f=3+(0|t[a>>2])&-4,r=0|t[f>>2],t[a>>2]=f+4,t[e>>2]=r;break e;case 10:f=3+(0|t[a>>2])&-4,r=0|t[f>>2],t[a>>2]=f+4,t[(f=e)>>2]=r,t[f+4>>2]=((0|r)<0)<<31>>31;break e;case 11:f=3+(0|t[a>>2])&-4,r=0|t[f>>2],t[a>>2]=f+4,t[(f=e)>>2]=r,t[f+4>>2]=0;break e;case 12:f=7+(0|t[a>>2])&-8,n=0|t[(r=f)>>2],r=0|t[r+4>>2],t[a>>2]=f+8,t[(f=e)>>2]=n,t[f+4>>2]=r;break e;case 13:n=3+(0|t[a>>2])&-4,f=0|t[n>>2],t[a>>2]=n+4,t[(n=e)>>2]=f=(65535&f)<<16>>16,t[n+4>>2]=((0|f)<0)<<31>>31;break e;case 14:n=3+(0|t[a>>2])&-4,f=0|t[n>>2],t[a>>2]=n+4,t[(n=e)>>2]=65535&f,t[n+4>>2]=0;break e;case 15:n=3+(0|t[a>>2])&-4,f=0|t[n>>2],t[a>>2]=n+4,t[(n=e)>>2]=f=(255&f)<<24>>24,t[n+4>>2]=((0|f)<0)<<31>>31;break e;case 16:n=3+(0|t[a>>2])&-4,f=0|t[n>>2],t[a>>2]=n+4,t[(n=e)>>2]=255&f,t[n+4>>2]=0;break e;case 17:n=7+(0|t[a>>2])&-8,d=+Xt[n>>3],t[a>>2]=n+8,Xt[e>>3]=d;break e;case 18:(function(x,y){x|=0;var u=7+(0|t[(y|=0)>>2])&-8,l=+Xt[u>>3];t[y>>2]=8+u,Xt[x>>3]=l})(e,a);break e;default:break e}while(0)}function qn(e,r,a,d){if(a|=0,d|=0,!((0|(e|=0))==0&(0|(r|=0))==0))for(;J[(a=a+-1|0)>>0]=0|Rt[480+(15&e)>>0]|d,!((0|(e=0|C0(0|e,0|r,4)))==0&(0|(r=0|ge()))==0););return 0|a}function Bi(e,r,a){a|=0;var d,f=0,n=0;if(0<(r|=0)>>>0|(0|r)==0&4294967295<(e|=0)>>>0)for(;n=0|qi(0|(d=e),0|(f=r),0|(n=0|ir(0|(e=0|rr(0|e,0|r,10,0)),0|(r=0|ge()),-10,-1)),0|ge()),ge(),J[(a=a+-1|0)>>0]=255&n|48,9<f>>>0|(0|f)==9&4294967295<d>>>0;);if(e)for(;f=255&((n=e)+(0|ee(e=(e>>>0)/10|0,-10))|48),J[(a=a+-1|0)>>0]=f,10<=n>>>0;);return 0|a}function ts(e,r){e|=0;var d=0,a=0,d=(0|(r|=0))!=0;e:do if(d&(3&e|0)!=0)for(;;){if(!(0|J[e>>0]))break e;if(!((d=(0|(r=r+-1|0))!=0)&(3&(e=e+1|0)|0)!=0)){a=5;break}}else a=5;while(0);e:do if((0|a)==5){do if(d){if(!(0|J[e>>0])){if(r)break e;break}t:do if(3<r>>>0)for(;;){if((-2139062144&(d=0|t[e>>2])^-2139062144)&d+-16843009|0)break t;if(e=e+4|0,(r=r+-4|0)>>>0<=3){a=11;break}}else a=11;while(0);if((0|a)==11&&!r)break;for(;;){if(!(0|J[e>>0]))break e;if(!(r=r+-1|0))break;e=e+1|0}}while(0);e=0}while(0);return 0|e}function _e(e,r,a,d,f){e|=0,r|=0;var n=C,x=C=C+63&-64;if(C=C+256|0,(0|(d|=0))<(0|(a|=0))&(73728&(f|=0)|0)==0){if(ke(0|x,r<<24>>24|0,0|((f=a-d|0)>>>0<256?f:256)),255<f>>>0){for(d=f;ue(e,x,256),255<(d=d+-256|0)>>>0;);f&=255}ue(e,x,f)}C=n}function es(e,r){return r|=0,0|((e|=0)?0|$n(e,r):0)}function $n(e,r){e|=0,r|=0;do if(e){if(r>>>0<128){J[e>>0]=r,e=1;break}if(!(0|t[1020])){if((-128&r|0)==57216){J[e>>0]=r,e=1;break}t[1026]=25,e=-1;break}if(r>>>0<2048){J[e>>0]=r>>>6|192,J[e+1>>0]=63&r|128,e=2;break}if(r>>>0<55296|(-8192&r|0)==57344){J[e>>0]=r>>>12|224,J[e+1>>0]=r>>>6&63|128,J[e+2>>0]=63&r|128,e=3;break}if((r+-65536|0)>>>0<1048576){J[e>>0]=r>>>18|240,J[e+1>>0]=r>>>12&63|128,J[e+2>>0]=r>>>6&63|128,J[e+3>>0]=63&r|128,e=4;break}t[1026]=25,e=-1;break}while(e=1,0);return 0|e}function Kn(e,r,a){e|=0,r|=0;var d,f=0,n=0,x=0;(f=0|t[(n=16+(a|=0)|0)>>2])?x=5:0|function(y){var u=0,l=0|J[(u=74+(y|=0)|0)>>0];return J[u>>0]=255+l|l,0|(u=8&(u=0|t[y>>2])?(t[y>>2]=32|u,-1):(t[8+y>>2]=0,u=(t[4+y>>2]=0)|t[44+y>>2],t[28+y>>2]=u,t[20+y>>2]=u,t[16+y>>2]=u+(0|t[48+y>>2]),0))}(a)||(f=0|t[n>>2],x=5);e:do if((0|x)==5){if((f-(n=x=0|t[(d=a+20|0)>>2])|0)>>>0<r>>>0){w0[3&t[a+36>>2]](a,e,r);break}t:do if((0|J[a+75>>0])<0|(0|r)==0)f=r;else{for(x=r;(0|J[e+(f=x+-1|0)>>0])!=10;){if(!f){f=r;break t}x=f}if((0|w0[3&t[a+36>>2]](a,e,x))>>>0<x>>>0)break e;n=0|t[d>>2],f=r-x|0,e=e+x|0}while(0);ve(0|n,0|e,0|f),t[d>>2]=(0|t[d>>2])+f}while(0)}function is(e){Xt[fe>>3]=e=+e,e=0|t[fe>>2],le(0|t[fe+4>>2])}function rs(e,r){r|=0;var a,d,f=0;switch(Xt[fe>>3]=e=+e,d=0|C0(0|(f=0|t[fe>>2]),0|(a=0|t[fe+4>>2]),52),ge(),2047&d){case 0:f=e!=0?(e=+rs(18446744073709552e3*e,r),(0|t[r>>2])-64|0):0,t[r>>2]=f;break;case 2047:break;default:t[r>>2]=(2047&d)-1022,t[fe>>2]=f,t[fe+4>>2]=-2146435073&a|1071644672,e=+Xt[fe>>3]}return+e}function K0(e){var r,f=0,a=0,d=0,f=0|J[(e|=0)>>0];e:do if(f<<24>>24)for(a=e,d=4,e=1052;;){if(!(f<<24>>24==(r=0|J[e>>0])<<24>>24&(0|(d=d+-1|0))!=0&r<<24>>24!=0))break e;if(e=e+1|0,!((f=0|J[(a=a+1|0)>>0])<<24>>24)){f=0;break}}else f=0,e=1052;while(0);return(255&f)-(0|Rt[e>>0])|0}function Ji(e){var r;return 0|(0|(r=0|ts(e|=0,64))?r-e|0:64)}function Q0(e,r,a){r|=0,a|=0;var d,f,n=0,x=0,y=C,u=C=C+63&-64;C=C+240|0,t[u>>2]=e|=0;e:do if(1<(0|r))for(x=n=e,e=1;;){if(-1<(0|di(n,d=(x=x+-4|0)+(0-(0|t[a+((f=r+-2|0)<<2)>>2]))|0))&&-1<(0|di(n,x))||(n=u+(e<<2)|0,e=e+1|0,(0|(r=-1<(0|di(d,x))?(x=t[n>>2]=d,r+-1|0):(t[n>>2]=x,f)))<=1))break e;n=0|t[u>>2]}else e=1;while(0);ns(u,e),C=y}function p0(e,r){var a=0,d=0,f=4+(e|=0)|0;31<(r|=0)>>>0?(a=0|t[f>>2],t[e>>2]=a,r=r+-32|(d=t[f>>2]=0)):(a=0|t[e>>2],d=0|t[f>>2]),t[e>>2]=d<<32-r|(r?a>>>r:a),t[f>>2]=r?d>>>r:d}function y0(e,r,a,d,f,n){e|=0,a|=0,d|=0,f|=0,n|=0;var x,y,u=0,l=0,g=C,p=C=C+63&-64;C=C+240|0,t[(y=232+p|0)>>2]=r|=0,t[(x=4+y|0)>>2]=a,t[p>>2]=e;e:do if((0|r)!=1|(0|a)!=0&&1<=(0|di(u=e+(0-(0|t[n+(d<<2)>>2]))|0,e)))for(r=u,l=1,u=(0|f)==0;;){if(u&1<(0|d)){if(-1<(0|di(u=e+-4|0,r))){r=e,u=l,a=10;break e}if(-1<(0|di(u+(0-(0|t[n+(d+-2<<2)>>2]))|0,r))){r=e,u=l,a=10;break e}}if(a=l+1|0,t[p+(l<<2)>>2]=r,p0(y,f=0|ss(y)),d=f+d|0,!((0|t[y>>2])!=1|(0|t[x>>2])!=0)){u=a,a=10;break e}if((0|di(u=r+(0-(0|t[n+(d<<2)>>2]))|0,0|t[p>>2]))<1){u=a,a=10;break}e=r,r=u,l=a,u=1}else a=9;while(0);(0|a)==9&&!(0|f)&&(r=e,u=1,a=10),(0|a)==10&&(ns(p,u),Q0(r,d,n)),C=g}function A0(e,r){var a=0,d=0,f=4+(e|=0)|0;31<(r|=0)>>>0?(a=0|t[e>>2],t[f>>2]=a,r=r+-32|(d=t[e>>2]=0)):(a=0|t[f>>2],d=0|t[e>>2]),t[f>>2]=((f=32-r|0)?d>>>f:d)|a<<r,t[e>>2]=d<<r}function ss(e){var r;return(r=0|as((0|t[(e|=0)>>2])-1|0))?0|r:0|(0|(e=0|as(0|t[e+4>>2]))?e+32|0:0)}function as(e){var r=0;if(e|=0)if(1&e)r=0;else for(r=0;r=r+1|0,!(2&e);)e>>>=1;else r=32;return 0|r}function ns(e,r){e|=0;var a,f=0,d=C,f=C=C+63&-64;if(C=C+256|0,2<=(0|(r|=0)))for(ve(0|(t[e+(r<<2)>>2]=f),0|t[e>>2],4),f=0;ve(0|t[(a=e+(f<<2)|0)>>2],0|t[e+((f=f+1|0)<<2)>>2],4),t[a>>2]=4+(0|t[a>>2]),(0|f)!=(0|r););C=d}function tr(e){e|=0;var r=0,a=0,d=0,f=0,n=0,x=0,y=0,u=0,l=0,g=0,p=0,U=0,k=0,M=0,b=0,B=0,E=0,S=0,z=0,O=0,H=C,U=C=C+63&-64;C=C+16|0;do if(e>>>0<245){if(p=0|t[1027],3&(a=(e=(l=e>>>0<11?16:e+11&-8)>>>3)?p>>>e:p)|0)return e=0|t[(r=8+(f=4148+((d=(1&a^1)+e|0)<<1<<2)|0)|0)>>2],(0|(a=0|t[(n=e+8|0)>>2]))==(0|f)?t[1027]=p&~(1<<d):(t[a+12>>2]=f,t[r>>2]=a),t[e+4>>2]=3|(O=d<<3),t[(O=e+O+4|0)>>2]=1|t[O>>2],C=H,0|n;if((g=0|t[1029])>>>0<l>>>0){if(0|a)return n=0|t[(r=8+(a=4148+((d=((e=(d=(y=(d=((d=a<<e&((d=2<<e)|0-d))&0-d)-1|0)>>>12&16)?d>>>y:d)>>>5&8)|y|(n=(d=e?d>>>e:d)>>>2&4)|(r=(d=n?d>>>n:d)>>>1&2)|(a=(d=r?d>>>r:d)>>>1&1))+(a?d>>>a:d)|0)<<1<<2)|0)|0)>>2],(0|(e=0|t[(y=n+8|0)>>2]))==(0|a)?t[1027]=e=p&~(1<<d):(t[e+12>>2]=a,t[r>>2]=e,e=p),x=(O=d<<3)-l|0,t[n+4>>2]=3|l,t[4+(f=n+l|0)>>2]=1|x,t[n+O>>2]=x,0|g&&(d=0|t[1032],a=4148+((r=g>>>3)<<1<<2)|0,e=e&(r=1<<r)?0|t[(r=e=a+8|0)>>2]:(t[1027]=e|r,r=a+8|0,a),t[r>>2]=d,t[e+12>>2]=d,t[d+8>>2]=e,t[d+12>>2]=a),t[1029]=x,t[1032]=f,C=H,0|y;if(n=0|t[1028]){for(u=0|t[4412+(((d=(u=(f=(u=(n&0-n)-1|0)>>>12&16)?u>>>f:u)>>>5&8)|f|(x=(u=d?u>>>d:u)>>>2&4)|(a=(u=x?u>>>x:u)>>>1&2)|(y=(u=a?u>>>a:u)>>>1&1))+(y?u>>>y:u)<<2)>>2],y=(-8&t[u+4>>2])-l|0,a=u;(e=0|t[a+16>>2])||(e=0|t[a+20>>2]);)y=(x=(a=(-8&t[e+4>>2])-l|0)>>>0<y>>>0)?a:y,a=e,u=x?e:u;if(u>>>0<(x=u+l|0)>>>0){f=0|t[u+24>>2],r=0|t[u+12>>2];do if((0|r)==(0|u)){if(!(r=0|t[(e=u+20|0)>>2])&&!(r=0|t[(e=u+16|0)>>2])){a=0;break}for(;;)if(a=0|t[(d=r+20|0)>>2])r=a,e=d;else{if(!(a=0|t[(d=r+16|0)>>2]))break;r=a,e=d}t[e>>2]=0,a=r}else a=0|t[u+8>>2],t[a+12>>2]=r,t[r+8>>2]=a,a=r;while(0);do if(0|f){if(r=0|t[u+28>>2],(0|u)==(0|t[(e=4412+(r<<2)|0)>>2])){if(!(t[e>>2]=a)){t[1028]=n&~(1<<r);break}}else if(!(t[((0|t[(O=f+16|0)>>2])==(0|u)?O:f+20|0)>>2]=a))break;t[a+24>>2]=f,0|(r=0|t[u+16>>2])&&(t[a+16>>2]=r,t[r+24>>2]=a),0|(r=0|t[u+20>>2])&&(t[a+20>>2]=r,t[r+24>>2]=a)}while(0);return y>>>0<16?(t[u+4>>2]=3|(O=y+l|0),t[(O=u+O+4|0)>>2]=1|t[O>>2]):(t[u+4>>2]=3|l,t[x+4>>2]=1|y,t[x+y>>2]=y,0|g&&(d=0|t[1032],a=4148+((r=g>>>3)<<1<<2)|0,e=(r=1<<r)&p?0|t[(r=e=a+8|0)>>2]:(t[1027]=r|p,r=a+8|0,a),t[r>>2]=d,t[e+12>>2]=d,t[d+8>>2]=e,t[d+12>>2]=a),t[1029]=y,t[1032]=x),C=H,u+8|0}p=l}else p=l}else p=l}else if(e>>>0<=4294967231)if(l=-8&(e=e+11|0),d=0|t[1028]){a=0-l|0,u=(e>>>=8)?16777215<l>>>0?31:1&((B=7+(u=14-((y=(520192+(u=e<<(p=(e+1048320|0)>>>16&8))|0)>>>16&4)|p|(B=(245760+(u<<=y)|0)>>>16&2))+(u<<B>>>15)|0)|0)?l>>>B:l)|u<<1:0,e=0|t[4412+(u<<2)>>2];e:do if(e)for(x=l<<(((f=0)|u)==31?0:25-(u>>>1)|0),y=e,e=0;;){if((n=(-8&t[y+4>>2])-l|0)>>>0<a>>>0){if(!n){a=0,e=f=y,B=65;break e}a=n,e=y}if(f=(0|(B=0|t[y+20>>2]))==0|(0|B)==(0|(y=0|t[y+16+(x>>>31<<2)>>2]))?f:B,!y){B=61;break}x<<=1}else e=f=0,B=61;while(0);if((0|B)==61){if((0|f)==0&(0|e)==0){if(!(e=((e=2<<u)|0-e)&d)){p=l;break}f=0|t[4412+(((x=(f=(y=(f=(e&0-e)-1|0)>>>12&16)?f>>>y:f)>>>5&8)|y|(u=(f=x?f>>>x:f)>>>2&4)|(p=(f=u?f>>>u:f)>>>1&2)|(e=(f=p?f>>>p:f)>>>1&1))+(e?f>>>e:f)<<2)>>2],e=0}f?B=65:(y=a,n=e)}if((0|B)==65)for(;;){if(a=(n=(p=(-8&t[f+4>>2])-l|0)>>>0<a>>>0)?p:a,n=n?f:e,!(e=(e=0|t[f+16>>2])||0|t[f+20>>2])){y=a;break}f=e,e=n}if(0|n&&y>>>0<((0|t[1029])-l|0)>>>0&&n>>>0<(g=n+l|0)>>>0){x=0|t[n+24>>2],r=0|t[n+12>>2];do if((0|r)==(0|n)){if(!(r=0|t[(e=n+20|0)>>2])&&!(r=0|t[(e=n+16|0)>>2])){r=0;break}for(;;)if(a=0|t[(f=r+20|0)>>2])r=a,e=f;else{if(!(a=0|t[(f=r+16|0)>>2]))break;r=a,e=f}t[e>>2]=0}else O=0|t[n+8>>2],t[O+12>>2]=r,t[r+8>>2]=O;while(0);do if(x){if(e=0|t[n+28>>2],(0|n)==(0|t[(a=4412+(e<<2)|0)>>2])){if(!(t[a>>2]=r)){d&=~(1<<e),t[1028]=d;break}}else if(!(t[((0|t[(O=x+16|0)>>2])==(0|n)?O:x+20|0)>>2]=r))break;t[r+24>>2]=x,0|(e=0|t[n+16>>2])&&(t[r+16>>2]=e,t[e+24>>2]=r),(e=0|t[n+20>>2])&&(t[r+20>>2]=e,t[e+24>>2]=r)}while(0);e:do if(y>>>0<16)t[n+4>>2]=3|(O=y+l|0),t[(O=n+O+4|0)>>2]=1|t[O>>2];else{if(t[n+4>>2]=3|l,t[g+4>>2]=1|y,r=(t[g+y>>2]=y)>>>3,y>>>0<256){a=4148+(r<<1<<2)|0,e=(e=0|t[1027])&(r=1<<r)?0|t[(r=e=a+8|0)>>2]:(t[1027]=e|r,r=a+8|0,a),t[r>>2]=g,t[e+12>>2]=g,t[g+8>>2]=e,t[g+12>>2]=a;break}if(r=4412+((a=(r=y>>>8)?16777215<y>>>0?31:1&((O=7+(a=14-((S=(520192+(a=r<<(z=(r+1048320|0)>>>16&8))|0)>>>16&4)|z|(O=(245760+(a<<=S)|0)>>>16&2))+(a<<O>>>15)|0)|0)?y>>>O:y)|a<<1:0)<<2)|0,t[g+28>>2]=a,t[4+(e=g+16|0)>>2]=0,t[e>>2]=0,!(d&(e=1<<a))){t[1028]=d|e,t[r>>2]=g,t[g+24>>2]=r,t[g+12>>2]=g,t[g+8>>2]=g;break}r=0|t[r>>2];t:do if((-8&t[r+4>>2]|0)!=(0|y)){for(d=y<<((0|a)==31?0:25-(a>>>1)|0);e=0|t[(a=r+16+(d>>>31<<2)|0)>>2];){if((-8&t[e+4>>2]|0)==(0|y)){r=e;break t}d<<=1,r=e}t[a>>2]=g,t[g+24>>2]=r,t[g+12>>2]=g,t[g+8>>2]=g;break e}while(0);O=0|t[(z=r+8|0)>>2],t[O+12>>2]=g,t[z>>2]=g,t[g+8>>2]=O,t[g+12>>2]=r,t[g+24>>2]=0}while(0);return C=H,n+8|0}p=l}else p=l;else p=-1;while(0);if(p>>>0<=(a=0|t[1029])>>>0)return r=0|t[1032],15<(e=a-p|0)>>>0?(t[1032]=O=r+p|0,t[1029]=e,t[O+4>>2]=1|e,t[r+a>>2]=e,t[r+4>>2]=3|p):(t[1029]=0,t[1032]=0,t[r+4>>2]=3|a,t[(O=r+a+4|0)>>2]=1|t[O>>2]),C=H,r+8|0;if(p>>>0<(x=0|t[1030])>>>0)return t[1030]=S=x-p|0,O=0|t[1033],t[1033]=z=O+p|0,t[z+4>>2]=1|S,t[O+4>>2]=3|p,C=H,O+8|0;if(y=p+48|0,(l=(n=(e=0|t[1145]?0|t[1147]:(t[1147]=4096,t[1146]=4096,t[1148]=-1,t[1149]=-1,t[1150]=0,t[1138]=0,t[1145]=-16&U^1431655768,4096))+(u=p+47|0)|0)&(d=0-e|0))>>>0<=p>>>0||0|(e=0|t[1137])&&(U=(g=0|t[1135])+l|0)>>>0<=g>>>0|e>>>0<U>>>0)return C=H,(O=0)|O;e:do if(4&t[1138])r=0,B=143;else{a=0|t[1033];t:do if(a){for(f=4556;!((e=0|t[f>>2])>>>0<=a>>>0&&(e+(0|t[(b=f+4|0)>>2])|0)>>>0>a>>>0);){if(!(e=0|t[f+8>>2])){B=128;break t}f=e}if((r=n-x&d)>>>0<2147483647)if((0|(e=0|_i(r)))==((0|t[f>>2])+(0|t[b>>2])|0)){if((0|e)!=-1){x=e,n=r,B=145;break e}}else d=e,B=136;else r=0}else B=128;while(0);do if((0|B)==128)if((0|(a=0|_i(0)))!=-1&&(r=a,M=(r=((M=(k=0|t[1146])-1|0)&r|0?(M+r&0-k)-r|0:0)+l|0)+(k=0|t[1135])|0,p>>>0<r>>>0&r>>>0<2147483647)){if(0|(b=0|t[1137])&&M>>>0<=k>>>0|b>>>0<M>>>0){r=0;break}if((0|(e=0|_i(r)))==(0|a)){x=a,n=r,B=145;break e}d=e,B=136}else r=0;while(0);do if((0|B)==136){if(a=0-r|0,!(r>>>0<y>>>0&r>>>0<2147483647&(0|d)!=-1)){if((0|d)==-1){r=0;break}x=d,n=r,B=145;break e}if(2147483647<=(e=u-r+(e=0|t[1147])&0-e)>>>0){x=d,n=r,B=145;break e}if((0|_i(e))==-1){_i(a),r=0;break}x=d,n=e+r|0,B=145;break e}while(0);t[1138]=4|t[1138],B=143}while(0);if((0|B)==143&&l>>>0<2147483647&&!((0|(E=0|_i(l)))==-1|1^(S=(p+40|0)>>>0<(z=(b=0|_i(0))-E|0)>>>0)|E>>>0<b>>>0&(0|E)!=-1&(0|b)!=-1^1)&&(x=E,n=S?z:r,B=145),(0|B)==145){r=(0|t[1135])+n|0,(t[1135]=r)>>>0>(0|t[1136])>>>0&&(t[1136]=r),u=0|t[1033];e:do if(u){for(f=4556;;){if((0|x)==((r=0|t[f>>2])+(e=0|t[(d=f+4|0)>>2])|0)){B=154;break}if(!(a=0|t[f+8>>2]))break;f=a}if((0|B)==154&&!(8&t[f+12>>2]|0)&&u>>>0<x>>>0&r>>>0<=u>>>0){t[d>>2]=e+n,z=u+(S=7&(S=u+8|0)|0?0-S&7:0)|0,S=(O=(0|t[1030])+n|0)-S|0,t[1033]=z,t[1030]=S,t[z+4>>2]=1|S,t[u+O+4>>2]=40,t[1034]=t[1149];break}for(x>>>0<(0|t[1031])>>>0&&(t[1031]=x),a=x+n|0,e=4556;;){if((0|t[e>>2])==(0|a)){B=162;break}if(!(r=0|t[e+8>>2]))break;e=r}if((0|B)==162&&!(8&t[e+12>>2]|0)){t[e>>2]=x,t[(g=e+4|0)>>2]=(0|t[g>>2])+n,l=(g=x+(7&(g=x+8|0)|0?0-g&7:0)|0)+p|0,y=(r=a+(7&(r=a+8|0)|0?0-r&7:0)|0)-g-p|0,t[g+4>>2]=3|p;t:do if((0|u)==(0|r))O=(0|t[1030])+y|0,t[1030]=O,t[1033]=l,t[l+4>>2]=1|O;else{if((0|t[1032])==(0|r)){O=(0|t[1029])+y|0,t[1029]=O,t[1032]=l,t[l+4>>2]=1|O,t[l+O>>2]=O;break}if((3&(e=0|t[r+4>>2])|0)==1){x=-8&e,d=e>>>3;i:do{if(e>>>0<256){if(e=0|t[r+8>>2],(0|(a=0|t[r+12>>2]))==(0|e)){t[1027]=t[1027]&~(1<<d);break}t[e+12>>2]=a,t[a+8>>2]=e;break}n=0|t[r+24>>2],e=0|t[r+12>>2];do if((0|e)==(0|r)){if(!(e=0|t[(a=4+(d=r+16|0)|0)>>2])){if(!(e=0|t[d>>2])){e=0;break}a=d}for(;;)if(d=0|t[(f=e+20|0)>>2])e=d,a=f;else{if(!(d=0|t[(f=e+16|0)>>2]))break;e=d,a=f}t[a>>2]=0}else O=0|t[r+8>>2],t[O+12>>2]=e,t[e+8>>2]=O;while(0);if(!n)break;d=4412+((a=0|t[r+28>>2])<<2)|0;do{if((0|t[d>>2])==(0|r)){if(0|(t[d>>2]=e))break;t[1028]=t[1028]&~(1<<a);break i}if(!(t[((0|t[(O=n+16|0)>>2])==(0|r)?O:n+20|0)>>2]=e))break i}while(0)}while(t[e+24>>2]=n,0|(a=0|t[(d=r+16|0)>>2])&&(t[e+16>>2]=a,t[a+24>>2]=e),(a=0|t[d+4>>2])&&(t[e+20>>2]=a,t[a+24>>2]=e,0));r=r+x|0,f=x+y|0}else f=y;if(t[(r=r+4|0)>>2]=-2&t[r>>2],t[l+4>>2]=1|f,r=(t[l+f>>2]=f)>>>3,f>>>0<256){a=4148+(r<<1<<2)|0,e=(e=0|t[1027])&(r=1<<r)?0|t[(r=e=a+8|0)>>2]:(t[1027]=e|r,r=a+8|0,a),t[r>>2]=l,t[e+12>>2]=l,t[l+8>>2]=e,t[l+12>>2]=a;break}r=f>>>8;do if(r){if(16777215<f>>>0){d=31;break}d=1&((O=7+(d=14-((S=(520192+(d=r<<(z=(r+1048320|0)>>>16&8))|0)>>>16&4)|z|(O=(245760+(d<<=S)|0)>>>16&2))+(d<<O>>>15)|0)|0)?f>>>O:f)|d<<1}else d=0;while(0);if(e=4412+(d<<2)|0,t[l+28>>2]=d,t[4+(r=l+16|0)>>2]=0,!((r=(t[r>>2]=0)|t[1028])&(a=1<<d))){t[1028]=r|a,t[e>>2]=l,t[l+24>>2]=e,t[l+12>>2]=l,t[l+8>>2]=l;break}r=0|t[e>>2];i:do if((-8&t[r+4>>2]|0)!=(0|f)){for(d=f<<((0|d)==31?0:25-(d>>>1)|0);e=0|t[(a=r+16+(d>>>31<<2)|0)>>2];){if((-8&t[e+4>>2]|0)==(0|f)){r=e;break i}d<<=1,r=e}t[a>>2]=l,t[l+24>>2]=r,t[l+12>>2]=l,t[l+8>>2]=l;break t}while(0);O=0|t[(z=r+8|0)>>2],t[O+12>>2]=l,t[z>>2]=l,t[l+8>>2]=O,t[l+12>>2]=r,t[l+24>>2]=0}while(0);return C=H,g+8|0}for(e=4556;!((r=0|t[e>>2])>>>0<=u>>>0&&u>>>0<(O=r+(0|t[e+4>>2])|0)>>>0);)e=0|t[e+8>>2];for(r=(e=(e=(f=O+-47|0)+(7&(e=f+8|0)|0?0-e&7:0)|0)>>>0<(f=u+16|0)>>>0?u:e)+8|0,z=x+(S=7&(S=x+8|0)|0?0-S&7:0)|0,S=(a=n+-40|0)-S|0,t[1033]=z,t[1030]=S,t[z+4>>2]=1|S,t[x+a+4>>2]=40,t[1034]=t[1149],t[(a=e+4|0)>>2]=27,t[r>>2]=t[1139],t[r+4>>2]=t[1140],t[r+8>>2]=t[1141],t[r+12>>2]=t[1142],t[1139]=x,t[1140]=n,t[1142]=0,t[1141]=r,r=e+24|0;t[(r=(z=r)+4|0)>>2]=7,(z+8|0)>>>0<O>>>0;);if((0|e)!=(0|u)){if(n=e-u|0,t[a>>2]=-2&t[a>>2],t[u+4>>2]=1|n,r=(t[e>>2]=n)>>>3,n>>>0<256){a=4148+(r<<1<<2)|0,e=(e=0|t[1027])&(r=1<<r)?0|t[(r=e=a+8|0)>>2]:(t[1027]=e|r,r=a+8|0,a),t[r>>2]=u,t[e+12>>2]=u,t[u+8>>2]=e,t[u+12>>2]=a;break}if(a=4412+((d=(r=n>>>8)?16777215<n>>>0?31:1&((O=7+(d=14-((S=(520192+(d=r<<(z=(r+1048320|0)>>>16&8))|0)>>>16&4)|z|(O=(245760+(d<<=S)|0)>>>16&2))+(d<<O>>>15)|0)|0)?n>>>O:n)|d<<1:0)<<2)|0,t[u+28>>2]=d,t[u+20>>2]=0,!((r=(t[f>>2]=0)|t[1028])&(e=1<<d))){t[1028]=r|e,t[a>>2]=u,t[u+24>>2]=a,t[u+12>>2]=u,t[u+8>>2]=u;break}r=0|t[a>>2];t:do if((-8&t[r+4>>2]|0)!=(0|n)){for(d=n<<((0|d)==31?0:25-(d>>>1)|0);e=0|t[(a=r+16+(d>>>31<<2)|0)>>2];){if((-8&t[e+4>>2]|0)==(0|n)){r=e;break t}d<<=1,r=e}t[a>>2]=u,t[u+24>>2]=r,t[u+12>>2]=u,t[u+8>>2]=u;break e}while(0);O=0|t[(z=r+8|0)>>2],t[O+12>>2]=u,t[z>>2]=u,t[u+8>>2]=O,t[u+12>>2]=r,t[u+24>>2]=0}}else(0|(O=0|t[1031]))==0|x>>>0<O>>>0&&(t[1031]=x),t[1139]=x,t[1140]=n,t[1142]=0,t[1036]=t[1145],t[1035]=-1,t[1040]=4148,t[1039]=4148,t[1042]=4156,t[1041]=4156,t[1044]=4164,t[1043]=4164,t[1046]=4172,t[1045]=4172,t[1048]=4180,t[1047]=4180,t[1050]=4188,t[1049]=4188,t[1052]=4196,t[1051]=4196,t[1054]=4204,t[1053]=4204,t[1056]=4212,t[1055]=4212,t[1058]=4220,t[1057]=4220,t[1060]=4228,t[1059]=4228,t[1062]=4236,t[1061]=4236,t[1064]=4244,t[1063]=4244,t[1066]=4252,t[1065]=4252,t[1068]=4260,t[1067]=4260,t[1070]=4268,t[1069]=4268,t[1072]=4276,t[1071]=4276,t[1074]=4284,t[1073]=4284,t[1076]=4292,t[1075]=4292,t[1078]=4300,t[1077]=4300,t[1080]=4308,t[1079]=4308,t[1082]=4316,t[1081]=4316,t[1084]=4324,t[1083]=4324,t[1086]=4332,t[1085]=4332,t[1088]=4340,t[1087]=4340,t[1090]=4348,t[1089]=4348,t[1092]=4356,t[1091]=4356,t[1094]=4364,t[1093]=4364,t[1096]=4372,t[1095]=4372,t[1098]=4380,t[1097]=4380,t[1100]=4388,t[1099]=4388,t[1102]=4396,t[1101]=4396,z=x+(S=7&(S=x+8|0)|0?0-S&7:0)|0,S=(O=n+-40|0)-S|0,t[1033]=z,t[1030]=S,t[z+4>>2]=1|S,t[x+O+4>>2]=40,t[1034]=t[1149];while(0);if(p>>>0<(r=0|t[1030])>>>0)return t[1030]=S=r-p|0,O=0|t[1033],t[1033]=z=O+p|0,t[z+4>>2]=1|S,t[O+4>>2]=3|p,C=H,O+8|0}return t[1026]=48,C=H,(O=0)|O}function x0(e){var r=0,a=0,d=0,f=0,n=0,x=0,y=0,u=0,l=0;if(e|=0){d=0|t[1031],l=(a=e+-8|0)+(r=-8&(e=0|t[e+-4>>2]))|0;do if(1&e)u=y=a;else{if(f=0|t[a>>2],!(3&e)||(x=f+r|0,(n=a+(0-f)|0)>>>0<d>>>0))return;if((0|t[1032])==(0|n)){if((3&(e=0|t[(r=l+4|0)>>2])|0)==3)return t[1029]=x,t[r>>2]=-2&e,t[n+4>>2]=1|x,void(t[n+x>>2]=x);u=y=n,r=x;break}if(a=f>>>3,f>>>0<256){if(e=0|t[n+8>>2],(0|(r=0|t[n+12>>2]))==(0|e)){t[1027]=t[1027]&~(1<<a),u=y=n,r=x;break}t[e+12>>2]=r,t[r+8>>2]=e,u=y=n,r=x;break}f=0|t[n+24>>2],e=0|t[n+12>>2];do if((0|e)==(0|n)){if(!(e=0|t[(r=4+(a=n+16|0)|0)>>2])){if(!(e=0|t[a>>2])){a=0;break}r=a}for(;;)if(a=0|t[(d=e+20|0)>>2])e=a,r=d;else{if(!(a=0|t[(d=e+16|0)>>2]))break;e=a,r=d}t[r>>2]=0,a=e}else a=0|t[n+8>>2],t[a+12>>2]=e,t[e+8>>2]=a,a=e;while(0);if(f){if(e=0|t[n+28>>2],(0|t[(r=4412+(e<<2)|0)>>2])==(0|n)){if(!(t[r>>2]=a)){t[1028]=t[1028]&~(1<<e),u=y=n,r=x;break}}else if(!(t[((0|t[(u=f+16|0)>>2])==(0|n)?u:f+20|0)>>2]=a)){u=y=n,r=x;break}t[a+24>>2]=f,0|(e=0|t[(r=n+16|0)>>2])&&(t[a+16>>2]=e,t[e+24>>2]=a),(e=0|t[r+4>>2])&&(t[a+20>>2]=e,t[e+24>>2]=a),u=y=n,r=x}else u=y=n,r=x}while(0);if(!(l>>>0<=y>>>0)&&1&(a=0|t[(e=l+4|0)>>2])){if(2&a)t[e>>2]=-2&a,t[u+4>>2]=1|r,f=t[y+r>>2]=r;else{if((0|t[1033])==(0|l))return l=(0|t[1030])+r|0,t[1030]=l,t[1033]=u,t[u+4>>2]=1|l,void((0|u)==(0|t[1032])&&(t[1032]=0,t[1029]=0));if((0|t[1032])==(0|l))return l=(0|t[1029])+r|0,t[1029]=l,t[1032]=y,t[u+4>>2]=1|l,void(t[y+l>>2]=l);f=(-8&a)+r|0,d=a>>>3;do{if(a>>>0<256){if(r=0|t[l+8>>2],(0|(e=0|t[l+12>>2]))==(0|r)){t[1027]=t[1027]&~(1<<d);break}t[r+12>>2]=e,t[e+8>>2]=r;break}n=0|t[l+24>>2],e=0|t[l+12>>2];do if((0|e)==(0|l)){if(!(e=0|t[(r=4+(a=l+16|0)|0)>>2])){if(!(e=0|t[a>>2])){a=0;break}r=a}for(;;)if(a=0|t[(d=e+20|0)>>2])e=a,r=d;else{if(!(a=0|t[(d=e+16|0)>>2]))break;e=a,r=d}t[r>>2]=0,a=e}else a=0|t[l+8>>2],t[a+12>>2]=e,t[e+8>>2]=a,a=e;while(0);if(0|n){if(e=0|t[l+28>>2],(0|t[(r=4412+(e<<2)|0)>>2])==(0|l)){if(!(t[r>>2]=a)){t[1028]=t[1028]&~(1<<e);break}}else if(!(t[((0|t[(x=n+16|0)>>2])==(0|l)?x:n+20|0)>>2]=a))break;t[a+24>>2]=n,0|(e=0|t[(r=l+16|0)>>2])&&(t[a+16>>2]=e,t[e+24>>2]=a),0|(e=0|t[r+4>>2])&&(t[a+20>>2]=e,t[e+24>>2]=a)}}while(0);if(t[u+4>>2]=1|f,t[y+f>>2]=f,(0|u)==(0|t[1032]))return void(t[1029]=f)}if(e=f>>>3,f>>>0<256)return a=4148+(e<<1<<2)|0,r=(r=0|t[1027])&(e=1<<e)?0|t[(e=r=a+8|0)>>2]:(t[1027]=r|e,e=a+8|0,a),t[e>>2]=u,t[r+12>>2]=u,t[u+8>>2]=r,void(t[u+12>>2]=a);r=4412+((d=(e=f>>>8)?16777215<f>>>0?31:1&((l=7+(d=14-((x=(520192+(d=e<<(y=(e+1048320|0)>>>16&8))|0)>>>16&4)|y|(l=(245760+(d<<=x)|0)>>>16&2))+(d<<l>>>15)|0)|0)?f>>>l:f)|d<<1:0)<<2)|0,t[u+28>>2]=d,t[u+20>>2]=0,e=(t[u+16>>2]=0)|t[1028],a=1<<d;e:do if(e&a){e=0|t[r>>2];t:do if((-8&t[e+4>>2]|0)!=(0|f)){for(d=f<<((0|d)==31?0:25-(d>>>1)|0);r=0|t[(a=e+16+(d>>>31<<2)|0)>>2];){if((-8&t[r+4>>2]|0)==(0|f)){e=r;break t}d<<=1,e=r}t[a>>2]=u,t[u+24>>2]=e,t[u+12>>2]=u,t[u+8>>2]=u;break e}while(0);l=0|t[(y=e+8|0)>>2],t[l+12>>2]=u,t[y>>2]=u,t[u+8>>2]=l,t[u+12>>2]=e,t[u+24>>2]=0}else t[1028]=e|a,t[r>>2]=u,t[u+24>>2]=r,t[u+12>>2]=u,t[u+8>>2]=u;while(0);if(l=(0|t[1035])-1|0,!(0|(t[1035]=l))){for(e=4564;e=0|t[e>>2];)e=e+8|0;t[1035]=-1}}}}function os(e,r){var u=0,a=0,d=0,f=0,n=0,x=0,y=0,y=(e|=0)+(r|=0)|0,u=0|t[e+4>>2];do if(1&u)x=e,e=r;else{if(a=0|t[e>>2],!(3&u))return;if(n=a+r|0,(0|t[1032])==(0|(f=e+(0-a)|0))){if((3&(u=0|t[(e=y+4|0)>>2])|0)==3)return t[1029]=n,t[e>>2]=-2&u,t[f+4>>2]=1|n,t[y>>2]=n;x=f,e=n;break}if(r=a>>>3,a>>>0<256){if(u=0|t[f+8>>2],(0|(e=0|t[f+12>>2]))==(0|u)){t[1027]=t[1027]&~(1<<r),x=f,e=n;break}t[u+12>>2]=e,t[e+8>>2]=u,x=f,e=n;break}d=0|t[f+24>>2],u=0|t[f+12>>2];do if((0|u)==(0|f)){if(!(u=0|t[(e=4+(r=f+16|0)|0)>>2])){if(!(u=0|t[r>>2])){r=0;break}e=r}for(;;)if(r=0|t[(a=u+20|0)>>2])u=r,e=a;else{if(!(r=0|t[(a=u+16|0)>>2]))break;u=r,e=a}t[e>>2]=0,r=u}else r=0|t[f+8>>2],t[r+12>>2]=u,t[u+8>>2]=r,r=u;while(0);if(d){if(u=0|t[f+28>>2],(0|t[(e=4412+(u<<2)|0)>>2])==(0|f)){if(!(t[e>>2]=r)){t[1028]=t[1028]&~(1<<u),x=f,e=n;break}}else if(!(t[((0|t[(x=d+16|0)>>2])==(0|f)?x:d+20|0)>>2]=r)){x=f,e=n;break}t[r+24>>2]=d,0|(u=0|t[(e=f+16|0)>>2])&&(t[r+16>>2]=u,t[u+24>>2]=r),(u=0|t[e+4>>2])&&(t[r+20>>2]=u,t[u+24>>2]=r),x=f,e=n}else x=f,e=n}while(0);if(2&(r=0|t[(u=y+4|0)>>2]))t[u>>2]=-2&r,t[x+4>>2]=1|e,t[x+e>>2]=e;else{if((0|t[1033])==(0|y))return y=(0|t[1030])+e|0,t[1030]=y,t[1033]=x,t[x+4>>2]=1|y,(0|x)==(0|t[1032])&&(t[1032]=0,t[1029]=0);if((0|t[1032])==(0|y))return y=(0|t[1029])+e|0,t[1029]=y,t[1032]=x,t[x+4>>2]=1|y,t[x+y>>2]=y;f=(-8&r)+e|0,a=r>>>3;do{if(r>>>0<256){if(e=0|t[y+8>>2],(0|(u=0|t[y+12>>2]))==(0|e)){t[1027]=t[1027]&~(1<<a);break}t[e+12>>2]=u,t[u+8>>2]=e;break}d=0|t[y+24>>2],u=0|t[y+12>>2];do if((0|u)==(0|y)){if(!(u=0|t[(e=4+(r=y+16|0)|0)>>2])){if(!(u=0|t[r>>2])){r=0;break}e=r}for(;;)if(r=0|t[(a=u+20|0)>>2])u=r,e=a;else{if(!(r=0|t[(a=u+16|0)>>2]))break;u=r,e=a}t[e>>2]=0,r=u}else r=0|t[y+8>>2],t[r+12>>2]=u,t[u+8>>2]=r,r=u;while(0);if(0|d){if(u=0|t[y+28>>2],(0|t[(e=4412+(u<<2)|0)>>2])==(0|y)){if(!(t[e>>2]=r)){t[1028]=t[1028]&~(1<<u);break}}else if(!(t[((0|t[(n=d+16|0)>>2])==(0|y)?n:d+20|0)>>2]=r))break;t[r+24>>2]=d,0|(u=0|t[(e=y+16|0)>>2])&&(t[r+16>>2]=u,t[u+24>>2]=r),0|(u=0|t[e+4>>2])&&(t[r+20>>2]=u,t[u+24>>2]=r)}}while(0);if(t[x+4>>2]=1|f,t[x+f>>2]=f,(0|x)==(0|t[1032]))return t[1029]=f;e=f}if(u=e>>>3,e>>>0<256)return r=4148+(u<<1<<2)|0,e=(e=0|t[1027])&(u=1<<u)?0|t[(u=e=r+8|0)>>2]:(t[1027]=e|u,u=r+8|0,r),t[u>>2]=x,t[e+12>>2]=x,t[x+8>>2]=e,t[x+12>>2]=r;if(r=4412+((d=(u=e>>>8)?16777215<e>>>0?31:1&((y=7+(d=14-((f=(520192+(d=u<<(n=(u+1048320|0)>>>16&8))|0)>>>16&4)|n|(y=(245760+(d<<=f)|0)>>>16&2))+(d<<y>>>15)|0)|0)?e>>>y:e)|d<<1:0)<<2)|0,t[x+28>>2]=d,t[x+20>>2]=0,!((u=(t[x+16>>2]=0)|t[1028])&(a=1<<d)))return t[1028]=u|a,t[r>>2]=x,t[x+24>>2]=r,t[x+12>>2]=x,t[x+8>>2]=x;u=0|t[r>>2];e:do if((-8&t[u+4>>2]|0)!=(0|e)){for(d=e<<((0|d)==31?0:25-(d>>>1)|0);r=0|t[(a=u+16+(d>>>31<<2)|0)>>2];){if((-8&t[r+4>>2]|0)==(0|e)){u=r;break e}d<<=1,u=r}return t[a>>2]=x,t[x+24>>2]=u,t[x+12>>2]=x,t[x+8>>2]=x}while(0);y=0|t[(n=u+8|0)>>2],t[y+12>>2]=x,t[n>>2]=x,t[x+8>>2]=y,t[x+12>>2]=u,t[x+24>>2]=0}function er(e,r,a){var d;return e|=0,(3&(r|=0)|0)!=0|(0|(d=r>>>2))==0||1073741823+d&d|0?28:(-64-r|0)>>>0<(a|=0)>>>0||!(r=0|function(f,n){n|=0;var x,y=0,u=0,l=0,g=0,p=0;if((y=16<(f|=0)>>>0?f:16)+-1&y)for(f=16;f>>>0<y>>>0;)f<<=1;else f=y;if((-64-f|0)>>>0<=n>>>0)return t[1026]=48,(g=0)|g;if(!(y=0|tr(12+(x=n>>>0<11?16:n+11&-8)+f|0)))return(g=0)|g;l=y+-8|0;do if(f+-1&y){if(u=15<((u=(y+f+-1&0-f)-8|0)-(n=l)|0)>>>0?u:u+f|0,y=(-8&(p=0|t[(f=y+-4|0)>>2]))-(n=u-n|0)|0,3&p){t[(p=u+4|0)>>2]=y|1&t[p>>2]|2,t[(y=u+y+4|0)>>2]=1|t[y>>2],t[f>>2]=n|1&t[f>>2]|2,t[p>>2]=1|t[p>>2],os(l,n),f=n=u;break}t[u>>2]=(0|t[l>>2])+n,t[u+4>>2]=y,f=n=u;break}while(f=n=l,0);return 3&(f=0|t[(y=f+4|0)>>2])|0&&(16+x|0)>>>0<(g=-8&f)>>>0&&(p=g-x|0,l=n+x|0,t[y>>2]=x|1&f|2,t[l+4>>2]=3|p,t[(g=n+g+4|0)>>2]=1|t[g>>2],os(l,p)),n+8|0}(16<r>>>0?r:16,a))?48:(t[e>>2]=r,(e=0)|e)}function _i(e){var r,a=0;return(e=(r=0|t[(a=4624)>>2])+(0|e)|0)>>>0>(0|Vn())>>>0&&!(0|Tn(0|e))?(t[1026]=48,-1):(t[a>>2]=e,0|r)}function ir(e,r,a,d){r|=0,d|=0;var f,n;return a=0|function(x,y){var u,l,g,p;return x=((g=0|ee(l=65535&(y|=0),u=65535&(x|=0)))>>>16)+(0|ee(l,p=x>>>16))|0,y=0|ee(l=y>>>16,u),0|(le((x>>>16)+(0|ee(l,p))+(((65535&x)+y|0)>>>16)|0),x+y<<16|65535&g|0)}(f=e|=0,n=a|=0),e=0|ge(),0|(le((0|ee(r,n))+(0|ee(d,f))+e|0&e|0),0|a)}function qi(e,r,a,d){return 0|(le((r|=0)+(d|=0)+((a=(e|=0)+(0|a)>>>0)>>>0<e>>>0|0)>>>0|0),0|a)}function S0(e,r,a,d){return 0|(le(0|(d=(r|=0)-(d|=0)-((e|=0)>>>0<(a|=0)>>>0|0)>>>0)),e-a>>>0|0)}function ls(e){return 0|((e|=0)?31-(0|gi(e^e-1))|0:32)}function Qn(e,r,a,d,f){f|=0;var n=0,M=0,b=0,x=0,y=0,k=0,u=0,l=0,g=0,p=0,k=e|=0,M=a|=0,b=l=d|=0;if(!(y=x=r|=0))return n=(0|f)!=0,b?(n&&(t[f>>2]=0|e,t[f+4>>2]=0&r),(f=l=0)|(le(0|l),f)):(n&&(t[f>>2]=(k>>>0)%(M>>>0),t[f+4>>2]=0),f=(k>>>(l=0))/(M>>>0)>>>0,0|(le(0|l),f));n=(0|b)==0;do{if(M){if(!n){if((n=(0|gi(0|b))-(0|gi(0|y))|0)>>>0<=31){e=k>>>((M=u=n+1|0)>>>0)&(r=n-31>>31)|y<<(b=31-n|0),r&=y>>>(u>>>0),n=0,b=k<<b;break}return f&&(t[f>>2]=0|e,t[f+4>>2]=x|0&r),(f=l=0)|(le(0|l),f)}if((n=M-1|0)&M|0){e=(u=32-(b=33+(0|gi(0|M))-(0|gi(0|y))|0)|0)-1>>31&y>>>((g=b-32|0)>>>0)|(y<<u|k>>>((M=b)>>>0))&(r=g>>31),r&=y>>>(b>>>0),n=k<<(p=64-b|0)&(x=u>>31),b=(y<<p|k>>>(g>>>0))&x|k<<u&b-33>>31;break}return 0|f&&(t[f>>2]=n&k,t[f+4>>2]=0),(0|M)==1?(p=0|e,0|(le(0|(g=x|0&r)),p)):(g=y>>>((p=0|ls(0|M))>>>0)|0,p=y<<32-p|k>>>(p>>>0)|0,0|(le(0|g),p))}if(n)return 0|f&&(t[f>>2]=(y>>>0)%(M>>>0),t[f+4>>2]=0),p=(y>>>(g=0))/(M>>>0)>>>0,0|(le(0|g),p);if(!k)return 0|f&&(t[f>>2]=0,t[f+4>>2]=(y>>>0)%(b>>>0)),p=(y>>>(g=0))/(b>>>0)>>>0,0|(le(0|g),p);if(!((n=b-1|0)&b))return 0|f&&(t[f>>2]=0|e,t[f+4>>2]=n&y|0&r),p=y>>>(((g=0)|ls(0|b))>>>0),0|(le(0|g),p);if((n=(0|gi(0|b))-(0|gi(0|y))|0)>>>0<=30){e=y<<(b=31-n|0)|k>>>((M=r=n+1|0)>>>0),r=y>>>(r>>>0),n=0,b=k<<b;break}return f&&(t[f>>2]=0|e,t[f+4>>2]=x|0&r),(p=g=0)|(le(0|g),p)}while(0);if(M){for(y=0|qi(0|(u=0|a),0|(k=l|0&d),-1,-1),a=0|ge(),x=b,b=0;x=n>>>31|(d=x)<<1,n=b|n<<1,S0(0|y,0|a,0|(d=e<<1|d>>>31|0),0|(l=e>>>31|r<<1|0)),b=1&(g=(p=0|ge())>>31|((0|p)<0?-1:0)<<1),e=0|S0(0|d,0|l,g&u|0,(((0|p)<0?-1:0)>>31|((0|p)<0?-1:0)<<1)&k|0),r=0|ge(),(0|(M=M-1|0))!=0;);y=x,x=0}else y=b,b=x=0;return(M=0)|f&&(t[f>>2]=e,t[f+4>>2]=r),p=-2&(n<<1|0)|b,0|(le(0|(g=(0|n)>>>31|(y|M)<<1|0&(M<<1|n>>>31)|x)),p)}function rr(e,r,a,d){return 0|Qn(e|=0,r|=0,a|=0,d|=0,0)}function C0(e,r,a){return e|=0,r|=0,(0|(a|=0))<32?(le(r>>>a|0),e>>>a|(r&(1<<a)-1)<<32-a):(le(0),r>>>a-32|0)}function us(e,r,a){return e|=0,r|=0,(0|(a|=0))<32?(le(r<<a|(e&(1<<a)-1<<32-a)>>>32-a|0),e<<a):(le(e<<a-32|0),0)}function ve(e,r,a){var d,f,n;if(e|=0,r|=0,8192<=(0|(a|=0)))return Rn(0|e,0|r,0|a),0|e;if(n=0|e,f=e+a|0,(3&e)==(3&r)){for(;3&e;){if(!a)return 0|n;J[e>>0]=0|J[r>>0],e=e+1|0,r=r+1|0,a=a-1|0}for(d=(a=-4&f|0)-64|0;(0|e)<=(0|d);)t[e>>2]=t[r>>2],t[e+4>>2]=t[r+4>>2],t[e+8>>2]=t[r+8>>2],t[e+12>>2]=t[r+12>>2],t[e+16>>2]=t[r+16>>2],t[e+20>>2]=t[r+20>>2],t[e+24>>2]=t[r+24>>2],t[e+28>>2]=t[r+28>>2],t[e+32>>2]=t[r+32>>2],t[e+36>>2]=t[r+36>>2],t[e+40>>2]=t[r+40>>2],t[e+44>>2]=t[r+44>>2],t[e+48>>2]=t[r+48>>2],t[e+52>>2]=t[r+52>>2],t[e+56>>2]=t[r+56>>2],t[e+60>>2]=t[r+60>>2],e=e+64|0,r=r+64|0;for(;(0|e)<(0|a);)t[e>>2]=t[r>>2],e=e+4|0,r=r+4|0}else for(a=f-4|0;(0|e)<(0|a);)J[e>>0]=0|J[r>>0],J[e+1>>0]=0|J[r+1>>0],J[e+2>>0]=0|J[r+2>>0],J[e+3>>0]=0|J[r+3>>0],e=e+4|0,r=r+4|0;for(;(0|e)<(0|f);)J[e>>0]=0|J[r>>0],e=e+1|0,r=r+1|0;return 0|n}function hs(e,r,a){var d;if((0|(r|=0))<(0|(e|=0))&(0|e)<(r+(a|=0)|0)){for(r=r+a|0,e=(d=e)+a|0;0<(0|a);)a=a-1|0,J[(e=e-1|0)>>0]=0|J[(r=r-1|0)>>0];e=d}else ve(e,r,a);return 0|e}function ke(e,r,a){var d,f,n,x=(e|=0)+(a|=0)|0;if(r=255&(0|r),67<=(0|a)){for(;3&e;)J[e>>0]=r,e=e+1|0;for(n=r|r<<8|r<<16|r<<24,f=(d=-4&x|0)-64|0;(0|e)<=(0|f);)t[e>>2]=n,t[e+4>>2]=n,t[e+8>>2]=n,t[e+12>>2]=n,t[e+16>>2]=n,t[e+20>>2]=n,t[e+24>>2]=n,t[e+28>>2]=n,t[e+32>>2]=n,t[e+36>>2]=n,t[e+40>>2]=n,t[e+44>>2]=n,t[e+48>>2]=n,t[e+52>>2]=n,t[e+56>>2]=n,t[e+60>>2]=n,e=e+64|0;for(;(0|e)<(0|d);)t[e>>2]=n,e=e+4|0}for(;(0|e)<(0|x);)J[e>>0]=r,e=e+1|0;return x-a|0}function cs(e){return ki(0),0}function fs(e,r,a,d){return ki(2),0}function to(e){var r,a,d,f,n,x,y,u,l,g,p,k,M,b,B,E,S,z,O=0,H=0,U=0|t[500+(e|=0)>>2];if(!((0|U)<=0)){y=0|t[e+504>>2],u=0|t[e+444>>2],a=0|t[e+536>>2],H=0;do if(d=0|t[y+(24*H|0)+12>>2],f=0|t[u+(t[y+(24*H|0)+4>>2]<<2)>>2],n=0|t[u+(t[y+(24*H|0)+8>>2]<<2)>>2],x=0|t[y+(24*H|0)+16>>2],e=0|t[y+(24*H|0)+20>>2],r=+v[a+(H<<2)>>2],0<(0|d))for(O=0;S=+v[x+(O<<2)>>2],k=+v[x+((l=1|O)<<2)>>2],E=(0|ce[e+(O<<1)>>1])<<1&65534,B=+v[(z=f+(E<<2)|0)>>2],p=+v[(E=f+((1|E)<<2)|0)>>2],l=(0|ce[e+(l<<1)>>1])<<1&65534,b=+v[(M=n+(l<<2)|0)>>2],g=+v[(l=n+((1|l)<<2)|0)>>2],v[z>>2]=B+S*(b-B)*r,v[E>>2]=p+S*(g-p)*r,v[M>>2]=b+k*(B-b)*r,v[l>>2]=g+k*(p-g)*r,(0|(O=O+2|0))<(0|d););while((0|(H=H+1|0))!=(0|U))}}function eo(e){var r=0|t[(e|=0)>>2];(0|Rt[4+r>>0])<4||gs(e,0|t[e+596>>2],0|t[e+600>>2],0|t[984+r>>2],0|t[e+152>>2],0|t[796+r>>2])}function gs(e,r,a,d,f,n){e|=0,d|=0,f|=0,n|=0;var x,y,u,l,g,p,k,M,b,B=0,E=0,S=0,z=0,O=0,H=C;if(C=C+16|0,M=H+8|0,k=H,p=(a|=0)+(12*(r|=0)|0)|0,(0|r)<=0)C=H;else{do{r=0|t[a>>2],y=0|t[f+(r<<2)>>2],l=(r=0|t[n+(r<<2)>>2])<<1,O=0|t[a+4>>2],B=0|t[a+8>>2],u=0|t[1028+(0|t[e>>2])>>2],g=B+(48*O|0)|0;e:do if(0<(0|O)){if((0|r)<=0){for(;;)if(3<=(r=0|t[B+8>>2])>>>0&&(t[M>>2]=r,pt(0,784,M)),g>>>0<=(B=B+48|0)>>>0)break e}do{E=d+(t[B+4>>2]<<2)|0,r=0|t[B+8>>2];t:do if(0|r)switch(O=u+(t[E+(t[B+12>>2]<<2)>>2]<<2)|0,0|r){case 1:for(E=B+20|0,r=B+44|0,S=0;v[(z=y+(S<<2)|0)>>2]=+v[z>>2]+ +v[r>>2]*(+v[O+(S<<2)>>2]*+v[E>>2]),(0|(S=S+1|0))!=(0|l););break;case 2:for(E=u+(t[E+(t[B+16>>2]<<2)>>2]<<2)|0,S=B+20|0,x=B+24|0,r=B+44|0,z=0;v[(b=y+(z<<2)|0)>>2]=+v[b>>2]+ +v[r>>2]*(+v[O+(z<<2)>>2]*+v[S>>2]+ +v[E+(z<<2)>>2]*+v[x>>2]),(0|(z=z+1|0))!=(0|l););break;default:t[k>>2]=r,pt(0,784,k);break t}while(0)}while((B=B+48|0)>>>0<g>>>0)}while(0)}while((a=a+12|0)>>>0<p>>>0);C=H}}function io(e){var r=0|t[(e|=0)>>2];(0|Rt[4+r>>0])<4||gs(e,0|t[e+604>>2],0|t[e+608>>2],0|t[1024+r>>2],0|t[e+444>>2],0|t[892+r>>2])}function pt(e,r,a){e|=0,r|=0,a|=0;var d,f,n=C;C=C+272|0,e=n+16|0,f=n,(d=0|t[1008])&&(t[f>>2]=a,qr(e,r,f),ds[1&d](e)),C=n}function _s(e,r,a){a|=0;var d,f=0,n=0,x=0,y=0,u=0,l=0,g=0,p=0,M=0,k=0,M=0|J[4+(e|=0)>>0];if(t[(r|=0)>>2]=628,k=0|t[(p=e+704|0)>>2],0<(0|(u=0|t[k>>2]))){for(f=0|t[e+1048>>2],n=0|t[e+720>>2],y=x=0;y=(1<<t[f+(t[n+(x<<2)>>2]<<2)>>2])+y|0,(0|(x=x+1|0))!=(0|u););f=y<<2}else f=0;if(t[r+4>>2]=12*u,t[r+8>>2]=t[k>>2]<<2,t[r+12>>2]=t[k>>2]<<2,t[r+16>>2]=t[k>>2]<<2,t[r+20>>2]=t[k>>2]<<2,t[r+24>>2]=t[k>>2]<<2,t[r+28>>2]=f,t[r+32>>2]=t[k>>2]<<2,t[r+36>>2]=f,t[r+40>>2]=f,t[r+44>>2]=t[(d=k+4|0)>>2]<<5,t[r+48>>2]=t[d>>2]<<2,t[r+52>>2]=t[d>>2]<<2,t[r+56>>2]=t[d>>2]<<2,t[r+60>>2]=t[d>>2]<<4,t[r+64>>2]=t[d>>2]<<4,0<(0|(g=0|t[(d=k+8|0)>>2]))){for(n=0|t[e+796>>2],x=0|t[e+1048>>2],y=0|t[e+780>>2],f=l=u=0;f=(15+(t[n+(u<<2)>>2]<<3)&-16)+f|0,l=(1<<t[x+(t[y+(u<<2)>>2]<<2)>>2])+l|0,(0|(u=u+1|0))!=(0|g););n=l<<2}else f=n=0;if(t[r+68>>2]=24*g,t[r+72>>2]=t[d>>2]<<2,t[r+76>>2]=t[d>>2]<<2,t[r+80>>2]=t[d>>2]<<2,t[r+84>>2]=f,t[r+88>>2]=t[d>>2]<<4,t[r+92>>2]=t[d>>2]<<4,t[r+96>>2]=t[d>>2]<<2,t[r+100>>2]=n,t[r+104>>2]=t[d>>2]<<2,t[r+108>>2]=n,t[r+112>>2]=n,t[r+116>>2]=n,t[r+120>>2]=n,t[r+124>>2]=n,t[r+128>>2]=n,t[r+132>>2]=n,t[r+136>>2]=n,t[r+140>>2]=n,t[r+144>>2]=t[d>>2]<<2,t[r+148>>2]=t[d>>2]<<2,t[r+152>>2]=t[d>>2]<<2,t[r+156>>2]=t[d>>2]<<2,t[r+160>>2]=t[d>>2]<<2,t[r+164>>2]=t[d>>2]<<2,0<(0|(u=0|t[(l=k+12|0)>>2]))){for(f=0|t[e+1048>>2],n=0|t[e+812>>2],y=x=0;y=(1<<t[f+(t[n+(x<<2)>>2]<<2)>>2])+y|0,(0|(x=x+1|0))!=(0|u););f=y<<2}else f=0;if(t[r+168>>2]=12*u,t[r+172>>2]=t[l>>2]<<2,t[r+176>>2]=t[l>>2]<<2,t[r+180>>2]=t[l>>2]<<2,t[r+184>>2]=t[l>>2]<<2,t[r+188>>2]=t[l>>2]<<2,t[r+192>>2]=t[l>>2]<<2,t[r+196>>2]=t[l>>2]<<2,t[r+200>>2]=t[l>>2]<<2,t[r+204>>2]=t[l>>2]<<4,t[r+208>>2]=t[l>>2]<<4,t[r+212>>2]=t[l>>2]<<2,t[r+216>>2]=f,t[r+220>>2]=t[l>>2]<<2,t[r+224>>2]=f,t[r+228>>2]=f,t[r+232>>2]=f,t[r+236>>2]=f,t[r+240>>2]=f,t[r+244>>2]=f,t[r+248>>2]=f,t[r+252>>2]=f,t[r+256>>2]=f,t[r+260>>2]=f,t[r+264>>2]=f,t[r+268>>2]=f,t[r+272>>2]=t[l>>2]<<2,t[r+276>>2]=t[l>>2]<<2,t[r+280>>2]=t[l>>2]<<2,t[r+284>>2]=t[l>>2]<<2,t[r+288>>2]=t[l>>2]<<2,t[r+292>>2]=t[l>>2]<<2,0<(0|(g=0|t[(d=k+16|0)>>2]))){for(n=0|t[e+892>>2],x=0|t[e+1048>>2],y=0|t[e+852>>2],f=l=u=0;f=(15+(t[n+(u<<2)>>2]<<3)&-16)+f|0,l=(1<<t[x+(t[y+(u<<2)>>2]<<2)>>2])+l|0,(0|(u=u+1|0))!=(0|g););n=l<<2}else f=n=0;if(t[r+296>>2]=20*g,t[r+300>>2]=t[d>>2]<<2,t[r+304>>2]=t[d>>2],t[r+308>>2]=t[d>>2]<<2,t[r+312>>2]=t[d>>2]<<2,t[r+316>>2]=t[d>>2]<<2,t[r+320>>2]=f,t[r+324>>2]=t[d>>2]<<2,t[r+328>>2]=t[d>>2]<<4,t[r+332>>2]=t[d>>2]<<4,t[r+336>>2]=t[d>>2]<<2,t[r+340>>2]=t[d>>2]<<2,t[r+344>>2]=t[d>>2]<<2,t[r+348>>2]=t[d>>2]<<4,t[r+352>>2]=t[d>>2]<<4,t[r+356>>2]=t[d>>2]<<2,t[r+360>>2]=n,t[r+364>>2]=t[d>>2]<<2,t[r+368>>2]=n,t[r+372>>2]=n,t[r+376>>2]=n,t[r+380>>2]=n,t[r+384>>2]=n,t[r+388>>2]=n,t[r+392>>2]=n,t[r+396>>2]=n,t[r+400>>2]=n,t[r+404>>2]=n,t[r+408>>2]=t[d>>2]<<2,t[r+412>>2]=t[d>>2]<<2,t[r+416>>2]=t[d>>2]<<2,t[r+420>>2]=t[d>>2]<<2,t[r+424>>2]=t[d>>2]<<2,t[r+428>>2]=t[d>>2]<<2,p=0|t[p>>2],t[r+432>>2]=52*(0|t[(n=p+20|0)>>2]),f=(d=3<(255&M))?0:t[n>>2]<<2,t[r+436>>2]=f,t[r+440>>2]=t[n>>2]<<2,t[r+444>>2]=28*(0|t[p+52>>2]),0<(0|(u=0|t[k+48>>2]))){for(f=0|t[e+1048>>2],y=x=n=0;x=(M=0|t[f+(n<<2)>>2])+x|0,y=(1<<M)+y|0,(0|(n=n+1|0))!=(0|u););n=x<<2,f=y<<2}else f=n=0;if(t[r+448>>2]=36*u,t[r+452>>2]=n,t[r+456>>2]=f,t[r+460>>2]=f,t[r+488>>2]=28*(0|t[(n=k+72|0)>>2]),0<(0|(n=0|t[n>>2]))){for(x=0|t[e+1152>>2],y=0|t[e+1160>>2],f=0|t[e+1164>>2],g=l=u=0;l=(0|l)<(0|(M=0|t[x+(u<<2)>>2]))?M:l,g=(0|(M=(0|t[y+(u<<2)>>2])-(0|t[f+(u<<2)>>2])|0))<(0|g)?g:M+1|0,(0|(u=u+1|0))!=(0|n););n=l<<2,f=g<<2}else f=n=0;if(t[r+492>>2]=t[k+76>>2]<<4,t[r+496>>2]=f,t[r+500>>2]=n,t[r+504>>2]=f,0<(0|(u=0|t[(l=k+80|0)>>2]))){for(f=0|t[e+1048>>2],n=0|t[e+1188>>2],y=x=0;y=(1<<t[f+(t[n+(x<<2)>>2]<<2)>>2])+y|0,(0|(x=x+1|0))!=(0|u););f=y<<2}else f=0;if(t[r+508>>2]=24*u,t[r+512>>2]=t[l>>2]<<2,t[r+516>>2]=t[l>>2]<<2,t[r+520>>2]=f,t[r+524>>2]=t[l>>2]<<2,t[r+528>>2]=f,t[r+532>>2]=f,d){if(t[r+464>>2]=20*(0|t[p+120>>2]),t[r+468>>2]=28*(0|t[p+100>>2]),0<(0|(y=0|t[k+104>>2]))){for(f=0|t[e+1080>>2],x=n=0;x=(0|t[f+(n<<2)>>2])+x|0,(0|(n=n+1|0))!=(0|y););f=x<<2}else f=0;t[r+472>>2]=48*y,t[r+476>>2]=f,t[r+480>>2]=12*(0|t[p+108>>2]),t[r+484>>2]=12*(0|t[p+112>>2]),f=n=t[r+540>>2]=0}else{if(0<(0|(d=0|t[(p=k+20|0)>>2]))){l=0|t[e+948>>2],g=0|t[e+952>>2],y=0|t[e+1036>>2],f=u=0;do if(e=0|t[g+(u<<2)>>2],x=(n=y+(t[l+(u<<2)>>2]<<2)|0)+(e<<2)|0,0<(0|e))for(;f=(0|t[n>>2])+f|0,(n=n+4|0)>>>0<x>>>0;);while((0|(u=u+1|0))!=(0|d))}else f=0;t[r+540>>2]=d<<2,n=f<<2,f=t[p>>2]<<2}for(t[r+536>>2]=f,t[r+544>>2]=n,n=f=0;n=(e=15+(0|t[(k=r+(f<<2)|0)>>2])&-16)+(t[k>>2]=n)|0,(0|(f=f+1|0))!=137;);t[a>>2]=n}function ro(e,r,a){e|=0,r|=0,a|=0;var d,f,n,x,y,u,l=0,g=0,p=0,k=0,M=0,b=0,B=0,E=0,S=0,z=0,O=0,H=0,U=0,it=0,ft=0,rt=0,st=0,ht=0,_t=0,Y=0,yt=0,at=0,nt=0,Pt=0,Mt=0,kt=0,Yt=0,Gt=0,Ot=0,Tt=0,jt=0,Qt=0,Ut=0,Ht=0,xt=0,Bt=0,X=0,re=C;if(C=C+560|0,nt=re+552|0,l=(S=re)+556|0,ke(0|S,0,548),_s(e,S,l),a>>>0<(l=0|t[l>>2])>>>0)return C=re,(X=0)|X;if(ke(0|r,0,0|l),X=r+(0|t[S>>2])|0,t[(f=X+8|0)>>2]=r+(0|t[S+4>>2]),t[X+40>>2]=r+(0|t[S+8>>2]),t[X+44>>2]=r+(0|t[S+12>>2]),t[X+48>>2]=r+(0|t[S+16>>2]),t[(yt=X+52|0)>>2]=r+(0|t[S+20>>2]),t[(at=X+16|0)>>2]=r+(0|t[S+24>>2]),t[X+24>>2]=r+(0|t[S+28>>2]),t[X+28>>2]=r+(0|t[S+32>>2]),t[X+32>>2]=r+(0|t[S+36>>2]),t[X+36>>2]=r+(0|t[S+40>>2]),p=0|t[(Bt=e+704|0)>>2],t[(n=X+308|0)>>2]=r+(0|t[S+44>>2]),t[X+312>>2]=r+(0|t[S+48>>2]),t[X+316>>2]=r+(0|t[S+52>>2]),t[X+320>>2]=r+(0|t[S+56>>2]),t[X+324>>2]=r+(0|t[S+60>>2]),t[X+328>>2]=r+(0|t[S+64>>2]),t[(kt=X+60|0)>>2]=r+(0|t[S+68>>2]),t[X+144>>2]=r+(0|t[S+72>>2]),t[X+148>>2]=r+(0|t[S+76>>2]),l=r+(0|t[S+80>>2])|0,t[(k=X+152|0)>>2]=l,0<(0|(p=0|t[p+8>>2]))&&(M=r+(0|t[S+84>>2])|0,b=e+796|0,t[l>>2]=M,(0|p)!=1))for(l=0,g=1,a=M;a=a+(15+(t[(0|t[b>>2])+(l<<2)>>2]<<3)&-16)|0,t[(0|t[k>>2])+(g<<2)>>2]=a,!((0|p)<=(0|(l=g+1|0)));)Ht=g,g=l,l=Ht;if(t[X+156>>2]=r+(0|t[S+88>>2]),t[X+160>>2]=r+(0|t[S+92>>2]),t[(Pt=X+68|0)>>2]=r+(0|t[S+96>>2]),t[X+76>>2]=r+(0|t[S+100>>2]),t[X+80>>2]=r+(0|t[S+104>>2]),t[X+84>>2]=r+(0|t[S+108>>2]),t[X+88>>2]=r+(0|t[S+112>>2]),t[X+92>>2]=r+(0|t[S+116>>2]),t[X+96>>2]=r+(0|t[S+120>>2]),t[X+100>>2]=r+(0|t[S+124>>2]),t[X+104>>2]=r+(0|t[S+128>>2]),t[X+108>>2]=r+(0|t[S+132>>2]),t[X+112>>2]=r+(0|t[S+136>>2]),t[X+116>>2]=r+(0|t[S+140>>2]),t[X+120>>2]=r+(0|t[S+144>>2]),t[X+124>>2]=r+(0|t[S+148>>2]),t[X+128>>2]=r+(0|t[S+152>>2]),t[X+132>>2]=r+(0|t[S+156>>2]),t[X+136>>2]=r+(0|t[S+160>>2]),t[X+140>>2]=r+(0|t[S+164>>2]),t[(x=X+168|0)>>2]=r+(0|t[S+168>>2]),t[X+264>>2]=r+(0|t[S+172>>2]),t[X+268>>2]=r+(0|t[S+176>>2]),t[X+272>>2]=r+(0|t[S+180>>2]),t[X+276>>2]=r+(0|t[S+184>>2]),t[X+280>>2]=r+(0|t[S+188>>2]),t[X+284>>2]=r+(0|t[S+192>>2]),t[X+288>>2]=r+(0|t[S+196>>2]),t[X+292>>2]=r+(0|t[S+200>>2]),t[X+296>>2]=r+(0|t[S+204>>2]),t[X+300>>2]=r+(0|t[S+208>>2]),t[(Mt=X+176|0)>>2]=r+(0|t[S+212>>2]),t[X+184>>2]=r+(0|t[S+216>>2]),t[X+188>>2]=r+(0|t[S+220>>2]),t[X+192>>2]=r+(0|t[S+224>>2]),t[X+196>>2]=r+(0|t[S+228>>2]),t[X+200>>2]=r+(0|t[S+232>>2]),t[X+204>>2]=r+(0|t[S+236>>2]),t[X+208>>2]=r+(0|t[S+240>>2]),t[X+212>>2]=r+(0|t[S+244>>2]),t[X+216>>2]=r+(0|t[S+248>>2]),t[X+220>>2]=r+(0|t[S+252>>2]),t[X+224>>2]=r+(0|t[S+256>>2]),t[X+228>>2]=r+(0|t[S+260>>2]),t[X+232>>2]=r+(0|t[S+264>>2]),t[X+236>>2]=r+(0|t[S+268>>2]),t[X+240>>2]=r+(0|t[S+272>>2]),t[X+244>>2]=r+(0|t[S+276>>2]),t[X+248>>2]=r+(0|t[S+280>>2]),t[X+252>>2]=r+(0|t[S+284>>2]),t[X+256>>2]=r+(0|t[S+288>>2]),t[X+260>>2]=r+(0|t[S+292>>2]),p=0|t[Bt>>2],t[(Gt=X+336|0)>>2]=r+(0|t[S+296>>2]),t[X+424>>2]=r+(0|t[S+300>>2]),t[X+432>>2]=r+(0|t[S+304>>2]),t[X+436>>2]=r+(0|t[S+308>>2]),t[X+440>>2]=r+(0|t[S+312>>2]),l=r+(0|t[S+316>>2])|0,t[(k=X+444|0)>>2]=l,0<(0|(p=0|t[p+16>>2]))&&(B=r+(0|t[S+320>>2])|0,E=e+892|0,t[l>>2]=B,(0|p)!=1))for(l=0,g=1,a=B;a=a+(15+(t[(0|t[E>>2])+(l<<2)>>2]<<3)&-16)|0,t[(0|t[k>>2])+(g<<2)>>2]=a,!((0|p)<=(0|(l=g+1|0)));)Ht=g,g=l,l=Ht;if(t[X+448>>2]=r+(0|t[S+324>>2]),t[(Ot=X+452|0)>>2]=r+(0|t[S+328>>2]),t[(Tt=X+456|0)>>2]=r+(0|t[S+332>>2]),t[X+460>>2]=r+(0|t[S+336>>2]),t[X+464>>2]=r+(0|t[S+340>>2]),t[X+468>>2]=r+(0|t[S+344>>2]),t[X+472>>2]=r+(0|t[S+348>>2]),t[X+476>>2]=r+(0|t[S+352>>2]),t[(Yt=X+344|0)>>2]=r+(0|t[S+356>>2]),t[X+352>>2]=r+(0|t[S+360>>2]),t[X+356>>2]=r+(0|t[S+364>>2]),t[X+360>>2]=r+(0|t[S+368>>2]),t[X+364>>2]=r+(0|t[S+372>>2]),t[X+368>>2]=r+(0|t[S+376>>2]),t[X+372>>2]=r+(0|t[S+380>>2]),t[X+376>>2]=r+(0|t[S+384>>2]),t[X+380>>2]=r+(0|t[S+388>>2]),t[X+384>>2]=r+(0|t[S+392>>2]),t[X+388>>2]=r+(0|t[S+396>>2]),t[X+392>>2]=r+(0|t[S+400>>2]),t[X+396>>2]=r+(0|t[S+404>>2]),t[X+400>>2]=r+(0|t[S+408>>2]),t[X+404>>2]=r+(0|t[S+412>>2]),t[X+408>>2]=r+(0|t[S+416>>2]),t[X+412>>2]=r+(0|t[S+420>>2]),t[X+416>>2]=r+(0|t[S+424>>2]),t[X+420>>2]=r+(0|t[S+428>>2]),_t=0|t[S+436>>2],d=0|t[S+440>>2],t[(Ht=X+544|0)>>2]=r+(0|t[S+432>>2]),t[(Y=X+548|0)>>2]=r+_t,t[(_t=X+552|0)>>2]=r+d,t[(d=X+560|0)>>2]=r+(0|t[S+444>>2]),l=0|t[Bt>>2],p=r+(0|t[S+448>>2])|0,t[(Ut=X+568|0)>>2]=p,0<(0|(l=0|t[l+48>>2])))for(a=0|t[e+1048>>2],k=r+(0|t[S+452>>2])|0,b=r+((M=0)|t[S+456>>2])|0,E=r+(0|t[S+460>>2])|0;t[p+(36*M|0)>>2]=k,t[p+(36*M|0)+16>>2]=b,t[p+(36*M|0)+20>>2]=E,B=1<<(g=0|t[a+(M<<2)>>2]),(0|(M=M+1|0))!=(0|l);)k=k+(g<<2)|0,b=b+(B<<2)|0,E=E+(B<<2)|0;if(l=0|t[Bt>>2],g=r+(0|t[S+488>>2])|0,t[(y=X+484|0)>>2]=g,0<(0|(l=0|t[l+72>>2])))for(a=0|t[e+1152>>2],k=r+((p=0)|t[S+492>>2])|0;k=(t[g+(28*p|0)+12>>2]=k)+(t[a+(p<<2)>>2]<<4)|0,(0|(p=p+1|0))!=(0|l););if(t[X+488>>2]=r+(0|t[S+496>>2]),t[X+492>>2]=r+(0|t[S+500>>2]),t[X+496>>2]=r+(0|t[S+504>>2]),t[(jt=X+504|0)>>2]=r+(0|t[S+508>>2]),t[X+536>>2]=r+(0|t[S+512>>2]),t[(Qt=X+512|0)>>2]=r+(0|t[S+516>>2]),t[X+520>>2]=r+(0|t[S+520>>2]),t[X+524>>2]=r+(0|t[S+524>>2]),t[X+528>>2]=r+(0|t[S+528>>2]),t[X+532>>2]=r+(0|t[S+532>>2]),ht=3<(0|Rt[(u=e+4|0)>>0])){if(t[X+576>>2]=r+(0|t[S+464>>2]),t[X+584>>2]=r+(0|t[S+468>>2]),l=0|t[S+476>>2],p=0|t[Bt>>2],M=r+(0|t[S+472>>2])|0,t[X+592>>2]=M,0<(0|(p=0|t[p+104>>2])))for(k=0|t[e+1080>>2],l=r+l|0,a=0;t[M+(48*a|0)+40>>2]=l,(0|(g=a+1|0))!=(0|p);)l=l+(t[k+(a<<2)>>2]<<2)|0,a=g;t[X+600>>2]=r+(0|t[S+480>>2]),t[X+608>>2]=r+(0|t[S+484>>2]),a=0|t[Bt>>2],l=0|t[a+20>>2]}else if(a=0|t[S+536>>2],g=0|t[S+544>>2],t[X+616>>2]=r+(0|t[S+540>>2]),t[(S=X+612|0)>>2]=r+a,a=0|t[Bt>>2],0<(0|(l=0|t[a+20>>2])))for(b=e+948|0,B=e+952|0,M=e+1036|0,k=r+g|(E=0);;){if(l=0|t[(0|t[b>>2])+(E<<2)>>2],g=(st=0|t[(0|t[B>>2])+(E<<2)>>2])+l|0,0<(0|st)){for(a=0|t[M>>2],p=0;p=(0|t[a+(l<<2)>>2])+p|0,(0|(l=l+1|0))<(0|g););l=(0|t[S>>2])+(E<<2)|0,p?(a=k,g=p):xt=27}else l=(0|t[S>>2])+(E<<2)|0,xt=27;if((0|xt)==27&&(g=a=xt=0),t[l>>2]=a,a=0|t[Bt>>2],(0|(l=0|t[a+20>>2]))<=(0|(E=E+1|0)))break;k=k+(g<<2)|0}t[X>>2]=e,t[X+620>>2]=1,t[X+624>>2]=1&J[20+(0|t[e+708>>2])>>0],k=(t[X+540>>2]=l)+-1|0;e:do if(0<(0|l)){if(r=0|t[Ht>>2],z=0|t[e+928>>2],O=0|t[e+924>>2],U=0|t[e+936>>2],it=0|t[e+932>>2],ft=0|t[e+940>>2],rt=0|t[e+952>>2],st=e+948|0,S=0|t[_t>>2],E=X+584|0,B=e+956|0,!ht)for(;;){if(t[r+(52*k|0)>>2]=0,t[r+(52*k|0)+4>>2]=t[(g=z+(k<<2)|0)>>2],t[r+(52*k|0)+8>>2]=t[(_t=O+(k<<2)|0)>>2],v[r+(52*k|0)+12>>2]=+v[_t>>2]-+v[g>>2],t[r+(52*k|0)+16>>2]=t[U+(k<<2)>>2],t[r+(52*k|0)+44>>2]=t[(g=it+(k<<2)|0)>>2],H=+ye(.10000000149011612,0|t[ft+(k<<2)>>2]),v[r+(52*k|0)+20>>2]=H,v[r+(52*k|0)+24>>2]=1.5*H,_t=0|t[rt+(k<<2)>>2],p=(t[r+(52*k|0)+32>>2]=_t)?(0|t[d>>2])+(28*(0|t[(0|t[st>>2])+(k<<2)>>2])|0)|0:0,t[r+(52*k|0)+28>>2]=p,t[r+(52*k|0)+48>>2]=1,t[S+(k<<2)>>2]=t[g>>2],!(0<(0|k)))break e;k=k+-1|0}for(M=0|t[e+944>>2],b=0|t[e+960>>2];t[r+(52*k|0)>>2]=t[M+(k<<2)>>2],t[r+(52*k|0)+4>>2]=t[(p=z+(k<<2)|0)>>2],t[r+(52*k|0)+8>>2]=t[(_t=O+(k<<2)|0)>>2],v[r+(52*k|0)+12>>2]=+v[_t>>2]-+v[p>>2],t[r+(52*k|0)+16>>2]=t[U+(k<<2)>>2],t[r+(52*k|0)+44>>2]=t[(p=it+(k<<2)|0)>>2],H=+ye(.10000000149011612,0|t[ft+(k<<2)>>2]),v[r+(52*k|0)+20>>2]=H,v[r+(52*k|0)+24>>2]=1.5*H,_t=0|t[rt+(k<<2)>>2],g=(t[r+(52*k|0)+32>>2]=_t)?(0|t[d>>2])+(28*(0|t[(0|t[st>>2])+(k<<2)>>2])|0)|0:0,t[r+(52*k|0)+28>>2]=g,_t=0|t[b+(k<<2)>>2],g=(t[r+(52*k|0)+40>>2]=_t)?(0|t[E>>2])+(28*(0|t[(0|t[B>>2])+(k<<2)>>2])|0)|0:0,t[r+(52*k|0)+36>>2]=g,t[r+(52*k|0)+48>>2]=1,t[S+(k<<2)>>2]=t[p>>2],0<(0|k);)k=k+-1|0}while(0);if(ht?(t[Y>>2]=t[e+944>>2],M=a,U=e):(ke(0|t[Y>>2],0,l<<2|0),U=0|t[X>>2],M=0|t[U+704>>2]),l=0|t[M+52>>2],0<(0|(t[X+556>>2]=l)))for(a=0|t[d>>2],g=0|t[U+1036>>2],p=0|t[U+1132>>2],k=0|t[U+1032>>2];t[a+(28*(l=(Y=l)+-1|0)|0)>>2]=t[g+(l<<2)>>2],t[a+(28*l|0)+4>>2]=p+(t[k+(l<<2)>>2]<<2),t[a+(28*l|0)+8>>2]=0,v[a+(28*l|0)+12>>2]=0,t[a+(28*l|0)+16>>2]=0,t[a+(28*l|0)+20>>2]=1,(t[a+(28*l|0)+24>>2]=1)<(0|Y););if(l=0|t[M+48>>2],0<(0|(t[X+564>>2]=l))){B=U+1048|0,E=U+1040|0,b=U+1044|0;do if(M=l,a=0|t[Ut>>2],g=0|t[(0|t[B>>2])+((l=l+-1|0)<<2)>>2],0<(0|(t[a+(36*l|0)+4>>2]=g)))for(p=a+(36*l|0)|0,k=0;t[(0|t[p>>2])+(k<<2)>>2]=(0|t[d>>2])+(28*(0|t[(0|t[E>>2])+((0|t[(0|t[b>>2])+(l<<2)>>2])+k<<2)>>2])|0),(0|(k=k+1|0))!=(0|g););while(t[a+(36*l|0)+8>>2]=1<<g,t[a+(36*l|0)+24>>2]=1,(t[a+(36*l|0)+28>>2]=1)<(0|M));U=0|t[X>>2],M=0|t[U+704>>2]}if(a=0|t[M>>2],0<(0|(t[(r=X+4|0)>>2]=a))){for(p=0|t[f>>2],E=0|t[Ut>>2],S=0|t[U+720>>2],k=0|t[U+740>>2],b=0|t[U+736>>2],B=0|t[U+732>>2],l=0|t[yt>>2],g=a;t[p+(12*(g=(yt=g)+-1|0)|0)>>2]=E+(36*(0|t[S+(g<<2)>>2])|0),t[p+(12*g|0)+4>>2]=t[k+(g<<2)>>2],t[p+(12*g|0)+8>>2]=t[b+(g<<2)>>2],v[l+(g<<2)>>2]=0|t[B+(g<<2)>>2]?1:0,1<(0|yt););for(g=0|t[at>>2],l=0;yt=0|t[E+(36*(0|t[S+((a=(at=a)+-1|0)<<2)>>2])|0)+8>>2],l=(t[g+(a<<2)>>2]=yt)+l|0,1<(0|at););a=0|t[r>>2]}else l=0;if(t[X+20>>2]=l,t[X+12>>2]=a,l=0|t[M+4>>2],0<(0|(t[X+304>>2]=l))){b=U+752|0,E=U+764|0,B=U+768|0,M=U+772|0,S=U+776|0,k=U+760|0;do switch(p=l,a=0|t[n>>2],t[a+((l=l+-1|0)<<5)>>2]=(0|t[Ut>>2])+(36*(0|t[(0|t[b>>2])+(l<<2)>>2])|0),t[a+(l<<5)+4>>2]=t[(0|t[E>>2])+(l<<2)>>2],t[a+(l<<5)+8>>2]=t[(0|t[B>>2])+(l<<2)>>2],at=0|t[(0|t[M>>2])+(l<<2)>>2],t[a+(l<<5)+12>>2]=at,g=0|t[(0|t[S>>2])+(l<<2)>>2],t[a+(l<<5)+16>>2]=g,t[a+(l<<5)+28>>2]=t[(0|t[k>>2])+(l<<2)>>2],0|at){case 0:t[(0|t[kt>>2])+(24*g|0)+20>>2]=l,t[a+(l<<5)+20>>2]=2,t[a+(l<<5)+24>>2]=2;break;case 1:t[(0|t[x>>2])+(12*g|0)+8>>2]=l,t[a+(l<<5)+20>>2]=3,t[a+(l<<5)+24>>2]=3;break;default:pt(0,937,nt)}while(1<(0|p));U=0|t[X>>2],Y=0|t[U+704>>2]}else Y=M;if(g=0|t[Y+8>>2],l=(t[(r=X+56|0)>>2]=g)+-1|0,S=0<(0|g))if(p=0|t[kt>>2],k=0|t[Ut>>2],M=0|t[U+780>>2],b=0|t[U+800>>2],B=0|t[U+804>>2],E=0|t[U+796>>2],1<(0|Rt[U+4>>0]))for(a=0|t[U+808>>2];t[p+(24*l|0)>>2]=k+(36*(0|t[M+(l<<2)>>2])|0),t[p+(24*l|0)+4>>2]=t[b+(l<<2)>>2],t[p+(24*l|0)+8>>2]=t[B+(l<<2)>>2],t[p+(24*l|0)+16>>2]=t[E+(l<<2)>>2],t[p+(24*l|0)+12>>2]=t[a+(l<<2)>>2],0<(0|l);)l=l+-1|0;else for(;t[p+(24*l|0)>>2]=k+(36*(0|t[M+(l<<2)>>2])|0),t[p+(24*l|0)+4>>2]=t[b+(l<<2)>>2],t[p+(24*l|0)+8>>2]=t[B+(l<<2)>>2],t[p+(24*l|0)+16>>2]=t[E+(l<<2)>>2],(t[p+(24*l|0)+12>>2]=0)<(0|l);)l=l+-1|0;if(a=0|t[Y+12>>2],0<(0|(t[(B=X+164|0)>>2]=a)))for(l=0|t[x>>2],p=0|t[Ut>>2],k=0|t[U+812>>2],M=0|t[U+828>>2],b=a;t[l+(12*(b=(nt=b)+-1|0)|0)>>2]=p+(36*(0|t[k+(b<<2)>>2])|0),t[l+(12*b|0)+4>>2]=t[M+(b<<2)>>2],1<(0|nt););if(S){for(p=0|t[kt>>2],a=0|t[Pt>>2],l=0;Pt=0|t[8+(0|t[p+(24*(g=(kt=g)+-1|0)|0)>>2])>>2],l=(t[a+(g<<2)>>2]=Pt)+l|0,1<(0|kt););g=0|t[r>>2],a=0|t[B>>2]}else l=0;if(t[X+72>>2]=l,t[X+64>>2]=g,0<(0|a)){for(p=0|t[x>>2],g=0|t[Mt>>2],l=0;Mt=0|t[8+(0|t[p+(12*(a=(kt=a)+-1|0)|0)>>2])>>2],l=(t[g+(a<<2)>>2]=Mt)+l|0,1<(0|kt););a=0|t[B>>2]}else l=0;if(t[X+180>>2]=l,t[X+172>>2]=a,a=U+704|0,l=0|t[Y+16>>2],0<(0|(t[(r=X+332|0)>>2]=l))){for(g=0|t[Gt>>2],E=0|t[Ut>>2],S=0|t[U+852>>2],p=0|t[U+876>>2],k=0|t[U+880>>2],M=0|t[U+892>>2],b=0|t[U+872>>2],B=l;t[g+(20*(B=(Gt=B)+-1|0)|0)>>2]=E+(36*(0|t[S+(B<<2)>>2])|0),t[g+(20*B|0)+4>>2]=t[p+(B<<2)>>2],t[g+(20*B|0)+8>>2]=t[k+(B<<2)>>2],t[g+(20*B|0)+16>>2]=t[M+(B<<2)>>2],t[g+(20*B|0)+12>>2]=t[b+(B<<2)>>2],1<(0|Gt););for(g=0|t[Yt>>2],p=0;Yt=0|t[E+(36*(0|t[S+((l=(Gt=l)+-1|0)<<2)>>2])|0)+8>>2],p=(t[g+(l<<2)>>2]=Yt)+p|0,1<(0|Gt););if(l=0|t[r>>2],t[X+348>>2]=p,0<(0|(t[X+340>>2]=l)))for(k=0|t[Ot>>2],g=0|t[Tt>>2],p=l<<2;v[k+((p=(Tt=p)+-4|0)<<2)>>2]=1,v[k+((Gt=Tt+-3|0)<<2)>>2]=1,v[k+((Ot=Tt+-2|0)<<2)>>2]=1,v[k+((Tt=Tt+-1|0)<<2)>>2]=1,v[g+(p<<2)>>2]=0,v[g+(Gt<<2)>>2]=0,!(((v[g+(Ot<<2)>>2]=0)|l)<=(v[g+(Tt<<2)>>2]=1));)l=l+-1|0}else t[X+348>>2]=0,t[X+340>>2]=l;if(_t=0|t[Y+72>>2],0<(0|(t[X+480>>2]=_t))){l=0|t[y>>2],g=0|t[U+1152>>2],p=0|t[U+1156>>2],k=0|t[U+1160>>2],M=0|t[U+1164>>2],b=0|t[U+1148>>2],it=U+1172|0,rt=U+1168|0,ft=U+1176|0,st=0;do if(B=0|t[g+(st<<2)>>2],t[l+(28*st|0)+4>>2]=B,t[l+(28*st|0)>>2]=t[p+(st<<2)>>2],Tt=0|t[k+(st<<2)>>2],t[l+(28*st|0)+16>>2]=Tt,E=0|t[M+(st<<2)>>2],t[l+(28*st|0)+20>>2]=E,t[l+(28*st|0)+24>>2]=Tt+1-E,E=(t[l+(28*st|0)+8>>2]=0)|t[b+(st<<2)>>2],0<(0|B))for(S=0|t[l+(28*st|0)+12>>2],r=0|t[it>>2],z=0|t[rt>>2],O=0|t[ft>>2],ht=0;t[S+(ht<<4)+4>>2]=t[r+((Tt=ht+E|0)<<2)>>2],t[S+(ht<<4)>>2]=t[z+(Tt<<2)>>2],t[S+(ht<<4)+8>>2]=t[O+(Tt<<2)>>2],(0|(ht=ht+1|(t[S+(ht<<4)+12>>2]=0)))!=(0|B););while((0|(st=st+1|0))!=(0|_t))}g=0|t[Y+80>>2],t[(z=X+500|0)>>2]=g;do if(0<(0|g)){for(E=0|t[jt>>2],S=0|t[Ut>>2],r=0|t[U+1188>>2],l=0|t[U+1200>>2],p=0|t[U+1204>>2],k=0|t[U+1212>>2],M=0|t[U+1216>>2],b=0|t[U+1208>>2],B=0|t[U+1220>>2];t[E+(24*(g=(Ut=g)+-1|0)|0)>>2]=S+(36*(0|t[r+(g<<2)>>2])|0),t[E+(24*g|0)+4>>2]=t[l+(g<<2)>>2],t[E+(24*g|0)+8>>2]=t[p+(g<<2)>>2],t[E+(24*g|0)+12>>2]=t[k+(g<<2)>>2],jt=0|t[b+(g<<2)>>2],t[E+(24*g|0)+16>>2]=M+(jt<<2),t[E+(24*g|0)+20>>2]=B+(jt<<1),1<(0|Ut););if((0|(g=0|t[z>>2]))<=0){l=0;break}for(p=0|t[Qt>>2],l=0;Qt=0|t[S+(36*(0|t[r+((g=(Ut=g)+-1|0)<<2)>>2])|0)+8>>2],l=(t[p+(g<<2)>>2]=Qt)+l|0,1<(0|Ut););g=0|t[z>>2]}else l=0;while(0);t[X+516>>2]=l,t[X+508>>2]=g;do if(3<(0|Rt[u>>0])){if((255&(l=0|J[U+4>>0]))<4)break;if(g=0|t[Y+120>>2],0<(0|(t[X+572>>2]=g))){for(B=0|t[X+576>>2],E=0|t[U+1112>>2],r=U+1124|0,S=U+1116|0,z=U+1128|0,b=U+1120|0;p=-1<(0|(l=0|t[E+((g=(M=g)+-1|0)<<2)>>2]))?(p=0|t[(0|t[S>>2])+(g<<2)>>2],k=0|t[(0|t[b>>2])+(g<<2)>>2],l=(0|t[Ht>>2])+(52*l|0)|0,a=(0|t[r>>2])+(p<<2)|0,(0|t[z>>2])+(p<<2)|0):a=l=k=0,t[B+(20*g|0)>>2]=l,t[B+(20*g|0)+4>>2]=a,t[B+(20*g|0)+8>>2]=p,t[B+(20*g|0)+12>>2]=k,1<(0|M););if(a=0|t[X>>2],(255&(l=0|J[a+4>>0]))<4)break;a=(U=a)+704|0}if(g=0|t[a>>2],a=0|t[g+100>>2],0<(0|(t[X+580>>2]=a)))for(p=0|t[X+584>>2],k=0|t[U+1056>>2],M=0|t[U+1132>>2],b=0|t[U+1052>>2],B=0|t[U+1060>>2];t[p+(28*(a=(xt=a)+-1|0)|0)>>2]=t[k+(a<<2)>>2],t[p+(28*a|0)+4>>2]=M+(t[b+(a<<2)>>2]<<2),t[p+(28*a|0)+8>>2]=t[B+(a<<2)>>2],t[p+(28*a|0)+12>>2]=0,v[p+(28*a|0)+16>>2]=0,t[p+(28*a|0)+20>>2]=1,(t[p+(28*a|0)+24>>2]=1)<(0|xt););if(a=0|t[g+104>>2],0<(0|(t[X+588>>2]=a))){S=X+592|0,z=X+584|0,E=U+1064|0,O=U+1068|0,b=U+1080|0,r=X+576|0,B=U+1108|0,M=U+1076|0;do if(k=a,l=0|t[S>>2],t[l+(48*(a=a+-1|0)|0)>>2]=(0|t[z>>2])+(28*(0|t[(0|t[E>>2])+(a<<2)>>2])|0),t[l+(48*a|0)+4>>2]=t[(0|t[O>>2])+(a<<2)>>2],t[l+(48*a|0)+8>>2]=0,t[l+(48*a|0)+28>>2]=1,t[l+(48*a|0)+32>>2]=1,p=0|t[(0|t[b>>2])+(a<<2)>>2],0<(0|(t[l+(48*a|0)+36>>2]=p)))for(l=l+(48*a|0)+40|0,g=0;t[(0|t[l>>2])+(g<<2)>>2]=(0|t[r>>2])+(20*(0|t[(0|t[B>>2])+((0|t[(0|t[M>>2])+(a<<2)>>2])+g<<2)>>2])|0),(0|(g=g+1|0))!=(0|p););while(1<(0|k));E=0|t[X>>2],l=0|J[E+4>>0]}else E=U;if(B=0|t[Bt>>2],a=0|t[B+108>>2],(255&l)<4)break;if(0<(0|(t[X+596>>2]=a)))for(g=0|t[X+600>>2],p=0|t[e+1084>>2],k=0|t[e+1092>>2],M=0|t[X+592>>2],b=0|t[e+1088>>2],l=a;t[g+(12*(l=(Bt=l)+-1|0)|0)>>2]=t[p+(l<<2)>>2],t[g+(12*l|0)+4>>2]=t[k+(l<<2)>>2],t[g+(12*l|0)+8>>2]=M+(48*(0|t[b+(l<<2)>>2])|0),1<(0|Bt););if(l=0|t[B+112>>2],0<(0|(t[X+604>>2]=l)))for(g=0|t[X+608>>2],p=0|t[e+1096>>2],k=0|t[e+1104>>2],M=0|t[X+592>>2],a=0|t[e+1100>>2];t[g+(12*(l=(e=l)+-1|0)|0)>>2]=t[p+(l<<2)>>2],t[g+(12*l|0)+4>>2]=t[k+(l<<2)>>2],t[g+(12*l|0)+8>>2]=M+(48*(0|t[a+(l<<2)>>2])|0),1<(0|e););if(g=0|t[E+1132>>2],p=0|t[20+(0|t[E+704>>2])>>2],k=X+612|0,t[X+616>>2]=t[E+972>>2],l=0|t[E+964>>2],t[k>>2]=l,(0|p)<=0||(t[l>>2]=g+(t[t[(a=E+968|0)>>2]>>2]<<2),(0|p)==1))break;for(l=1;t[(0|t[k>>2])+(l<<2)>>2]=g+(t[(0|t[a>>2])+(l<<2)>>2]<<2),(0|(l=l+1|0))!=(0|p););}else{if((0|t[Y+20>>2])<=0)break;ht=U+948|0,_t=U+952|0,ft=X+612|0,rt=U+1032|0,st=U+1036|0,O=U+1132|0,U=X+616|0,it=0;do{if(l=0|t[(0|t[ht>>2])+(it<<2)>>2],r=(e=0|t[(0|t[_t>>2])+(it<<2)>>2])+l|0,z=0|t[(0|t[ft>>2])+(it<<2)>>2],0<(0|e)){E=0|t[rt>>2],S=0|t[st>>2],B=l,l=0;do if(g=0|t[E+(B<<2)>>2],b=(e=0|t[S+(B<<2)>>2])+g|0,0<(0|e)){M=0|t[O>>2];do{H=+v[M+(g<<2)>>2],p=z+(l<<2)|0;e:do if(0<(0|l))for(k=z;;){if(+v[k>>2]==H)break e;if(p>>>0<=(k=k+4|0)>>>0){xt=150;break}}else xt=150;while(0)}while((0|xt)==150&&(xt=0,v[p>>2]=H,l=l+1|0),(0|(g=g+1|0))<(0|b))}while((0|(B=B+1|0))<(0|r))}else l=0;(function(zt,_){zt|=0;var P,L,tt=0,lt=0,Ft=0,Zt=0,Kt=0,Jt=0,te=C,Vt=C=C+63&-64;C=C+208|0,Ft=(_|=0)<<2,t[(Kt=Vt=192+(L=Vt)|0)>>2]=1,t[Kt+4>>2]=0;e:do if(0|Ft){for(t[4+L>>2]=4,tt=_=t[L>>2]=4,lt=2;(t[L+(lt<<2)>>2]=_=_+4+tt|0)>>>0<Ft>>>0;)Kt=tt,tt=_,lt=lt+1|0,_=Kt;if(zt>>>0<(Zt=zt+Ft+-4|0)>>>0){P=Zt,Kt=4+Vt|0,tt=zt,lt=_=1;do do if((3&_|0)!=3){if((0|t[L+((Ft=lt+-1|0)<<2)>>2])>>>0<(P-tt|0)>>>0?Q0(tt,lt,L):y0(tt,_,0|t[Kt>>2],lt,0,L),(0|lt)==1){A0(Vt,1),lt=0;break}A0(Vt,Ft),lt=1;break}while(Q0(tt,lt,L),p0(Vt,2),lt=lt+2|0,0);while(_=1|t[Vt>>2],t[Vt>>2]=_,(tt=tt+4|0)>>>0<Zt>>>0);Ft=0|t[(Zt=Kt)>>2]}else Zt=4+Vt|0,Ft=0,tt=zt,lt=_=1;for(y0(tt,_,Ft,lt,0,L),Ft=4+Vt|0;;){if((0|lt)==1&(0|_)==1){if(!(0|t[Ft>>2]))break e;Jt=21}else(0|lt)<2?Jt=21:(A0(Vt,2),zt=lt+-2|0,t[Vt>>2]=7^t[Vt>>2],p0(Vt,1),y0(tt+(0-(0|t[L+(zt<<2)>>2]))+-4|0,0|t[Vt>>2],0|t[Zt>>2],lt+-1|0,1,L),A0(Vt,1),_=1|t[Vt>>2],y0(tt=tt+-4|0,t[Vt>>2]=_,0|t[Zt>>2],zt,1,L),lt=zt);(0|Jt)==21&&(p0(Vt,zt=(Jt=0)|ss(Vt)),_=0|t[Vt>>2],tt=tt+-4|0,lt=zt+lt|0)}}while(0);C=te})(z,l),t[(0|t[U>>2])+(it<<2)>>2]=l,it=it+1|0}while((0|it)<(0|t[20+(0|t[a>>2])>>2]))}while(0);return Jr(X),C=re,0|X}function di(e,r){return 0|((e=+v[(e|=0)>>2])<(r=+v[(r|=0)>>2])?-1:r<e&1)}function sr(e,r){var a=0|J[4+(e|=0)>>0];t[(r|=0)>>2]=e+(0|t[e+64>>2]),t[r+4>>2]=e+(0|t[e+68>>2]),t[r+8>>2]=e+(0|t[e+72>>2]),t[r+12>>2]=e+(0|t[e+76>>2]),t[r+16>>2]=e+(0|t[e+80>>2]),t[r+20>>2]=e+(0|t[e+84>>2]),t[r+24>>2]=e+(0|t[e+88>>2]),t[r+28>>2]=e+(0|t[e+92>>2]),t[r+32>>2]=e+(0|t[e+96>>2]),t[r+36>>2]=e+(0|t[e+100>>2]),t[r+40>>2]=e+(0|t[e+104>>2]),t[r+44>>2]=e+(0|t[e+108>>2]),t[r+48>>2]=e+(0|t[e+112>>2]),t[r+52>>2]=e+(0|t[e+116>>2]),t[r+56>>2]=e+(0|t[e+120>>2]),t[r+60>>2]=e+(0|t[e+124>>2]),t[r+64>>2]=e+(0|t[e+128>>2]),t[r+68>>2]=e+(0|t[e+132>>2]),t[r+72>>2]=e+(0|t[e+136>>2]),t[r+76>>2]=e+(0|t[e+140>>2]),t[r+80>>2]=e+(0|t[e+144>>2]),t[r+84>>2]=e+(0|t[e+148>>2]),t[r+92>>2]=e+(0|t[e+152>>2]),t[r+96>>2]=e+(0|t[e+156>>2]),t[r+100>>2]=e+(0|t[e+160>>2]),t[r+108>>2]=e+(0|t[e+164>>2]),t[r+112>>2]=e+(0|t[e+168>>2]),t[r+116>>2]=e+(0|t[e+172>>2]),t[r+124>>2]=e+(0|t[e+176>>2]),t[r+128>>2]=e+(0|t[e+180>>2]),t[r+132>>2]=e+(0|t[e+184>>2]),t[r+136>>2]=e+(0|t[e+188>>2]),t[r+140>>2]=e+(0|t[e+192>>2]),t[r+144>>2]=e+(0|t[e+196>>2]),t[r+148>>2]=e+(0|t[e+200>>2]),t[r+152>>2]=e+(0|t[e+204>>2]),t[r+156>>2]=e+(0|t[e+208>>2]),t[r+164>>2]=e+(0|t[e+212>>2]),t[r+168>>2]=e+(0|t[e+216>>2]),t[r+172>>2]=e+(0|t[e+220>>2]),t[r+176>>2]=e+(0|t[e+224>>2]),t[r+180>>2]=e+(0|t[e+228>>2]),t[r+184>>2]=e+(0|t[e+232>>2]),t[r+188>>2]=e+(0|t[e+236>>2]),t[r+192>>2]=e+(0|t[e+240>>2]),t[r+196>>2]=e+(0|t[e+244>>2]),t[r+200>>2]=e+(0|t[e+248>>2]),t[r+204>>2]=e+(0|t[e+252>>2]),t[r+208>>2]=e+(0|t[e+256>>2]),t[r+212>>2]=e+(0|t[e+260>>2]),t[r+216>>2]=e+(0|t[e+264>>2]),t[r+220>>2]=e+(0|t[e+268>>2]),t[r+224>>2]=e+(0|t[e+272>>2]),t[r+228>>2]=e+(0|t[e+276>>2]),t[r+232>>2]=e+(0|t[e+280>>2]),t[r+236>>2]=e+(0|t[e+284>>2]),t[r+244>>2]=e+(0|t[e+288>>2]),t[r+248>>2]=e+(0|t[e+292>>2]),t[r+272>>2]=e+(0|t[e+296>>2]),t[r+276>>2]=e+(0|t[e+300>>2]),t[r+280>>2]=e+(0|t[e+304>>2]),t[r+284>>2]=e+(0|t[e+308>>2]),t[r+288>>2]=e+(0|t[e+312>>2]),t[r+292>>2]=e+(0|t[e+316>>2]),t[r+296>>2]=e+(0|t[e+320>>2]),t[r+300>>2]=e+(0|t[e+324>>2]),t[r+304>>2]=e+(0|t[e+328>>2]),t[r+308>>2]=e+(0|t[e+332>>2]),t[r+312>>2]=e+(0|t[e+336>>2]),t[r+316>>2]=e+(0|t[e+340>>2]),t[r+320>>2]=e+(0|t[e+344>>2]),t[r+324>>2]=e+(0|t[e+348>>2]),t[r+336>>2]=e+(0|t[e+352>>2]),t[r+340>>2]=e+(0|t[e+356>>2]),t[r+344>>2]=e+(0|t[e+360>>2]),t[r+328>>2]=e+(0|t[e+364>>2]),t[r+332>>2]=e+(0|t[e+368>>2]),t[r+428>>2]=e+(0|t[e+372>>2]),t[r+432>>2]=e+(0|t[e+376>>2]),t[r+436>>2]=e+(0|t[e+380>>2]),t[r+440>>2]=e+(0|t[e+384>>2]),t[r+444>>2]=e+(0|t[e+388>>2]),t[r+448>>2]=e+(0|t[e+392>>2]),t[r+452>>2]=e+(0|t[e+396>>2]),t[r+456>>2]=e+(0|t[e+400>>2]),t[r+460>>2]=e+(0|t[e+404>>2]),t[r+464>>2]=e+(0|t[e+408>>2]),t[r+468>>2]=e+(0|t[e+412>>2]),t[r+472>>2]=e+(0|t[e+416>>2]),t[r+476>>2]=e+(0|t[e+420>>2]),t[r+480>>2]=e+(0|t[e+424>>2]),t[r+484>>2]=e+(0|t[e+428>>2]),t[r+488>>2]=e+(0|t[e+432>>2]),t[r+492>>2]=e+(0|t[e+436>>2]),t[r+496>>2]=e+(0|t[e+440>>2]),t[r+500>>2]=e+(0|t[e+444>>2]),t[r+504>>2]=e+(0|t[e+448>>2]),t[r+508>>2]=e+(0|t[e+452>>2]),t[r+512>>2]=e+(0|t[e+456>>2]),t[r+516>>2]=e+(0|t[e+460>>2]),t[r+520>>2]=e+(0|t[e+464>>2]),(255&a)<=1||(t[r+104>>2]=e+(0|t[e+468>>2]),(255&a)<=3||(t[r+260>>2]=e+(0|t[e+472>>2]),t[r+264>>2]=e+(0|t[e+476>>2]),t[r+268>>2]=e+(0|t[e+480>>2]),t[r+88>>2]=e+(0|t[e+484>>2]),t[r+120>>2]=e+(0|t[e+488>>2]),t[r+160>>2]=e+(0|t[e+492>>2]),t[r+524>>2]=e+(0|t[e+496>>2]),t[r+528>>2]=e+(0|t[e+500>>2]),t[r+532>>2]=e+(0|t[e+504>>2]),t[r+536>>2]=e+(0|t[e+508>>2]),t[r+540>>2]=e+(0|t[e+512>>2]),t[r+544>>2]=e+(0|t[e+516>>2]),t[r+240>>2]=e+(0|t[e+520>>2]),t[r+252>>2]=e+(0|t[e+524>>2]),t[r+256>>2]=e+(0|t[e+528>>2]),t[r+348>>2]=e+(0|t[e+532>>2]),t[r+352>>2]=e+(0|t[e+536>>2]),t[r+356>>2]=e+(0|t[e+540>>2]),t[r+360>>2]=e+(0|t[e+544>>2]),t[r+364>>2]=e+(0|t[e+548>>2]),t[r+368>>2]=e+(0|t[e+552>>2]),t[r+372>>2]=e+(0|t[e+556>>2]),t[r+376>>2]=e+(0|t[e+560>>2]),t[r+380>>2]=e+(0|t[e+564>>2]),t[r+384>>2]=e+(0|t[e+568>>2]),t[r+388>>2]=e+(0|t[e+572>>2]),t[r+392>>2]=e+(0|t[e+576>>2]),t[r+396>>2]=e+(0|t[e+580>>2]),t[r+400>>2]=e+(0|t[e+584>>2]),t[r+404>>2]=e+(0|t[e+588>>2]),t[r+408>>2]=e+(0|t[e+592>>2]),t[r+412>>2]=e+(0|t[e+596>>2]),t[r+416>>2]=e+(0|t[e+600>>2]),t[r+420>>2]=e+(0|t[e+604>>2]),t[r+424>>2]=e+(0|t[e+608>>2])))}var so=[cs,function(e){return 0|wn(0,0|(e|=0))},function(e){return 0},cs],w0=[function(e,r,a){return ki(1),0},function(e,r,a){return 0|Mn(0,0|(e|=0),0|(r|=0),0|(a|=0))},function(e,r,a){r|=0,a|=0;var d,f,n,x,y,u,l=0,g=0,p=0,k=0,M=C,b=C=C+63&-64;for(C=C+32|0,b=16+(g=b)|0,l=0|t[(f=28+(e|=0)|0)>>2],t[g>>2]=l,l=(0|t[(n=e+20|0)>>2])-l|0,t[g+4>>2]=l,t[g+8>>2]=r,d=e+60|0,l=l+(t[g+12>>(p=2)]=a)|0;;){if((0|l)==(0|(r=0|function(B){return 0|((B|=0)<<16>>16?(t[1026]=65535&B,-1):0)}(0|In(0|t[d>>2],0|g,0|p,0|b))?t[b>>2]=-1:0|t[b>>2]))){r=6;break}if((0|r)<0){r=8;break}k=0|t[g+4>>2],t[(y=(x=k>>>0<r>>>0)?g+8|0:g)>>2]=(0|t[y>>2])+(k=r-(x?k:0)|0),t[(u=y+4|0)>>2]=(0|t[u>>2])-k,g=y,p=p+(x<<31>>31)|0,l=l-r|0}return(0|r)==6?(k=0|t[e+44>>2],t[e+16>>2]=k+(0|t[e+48>>2]),t[f>>2]=k,t[n>>2]=k):(0|r)==8&&(t[e+16>>2]=0,t[f>>2]=0,t[n>>2]=0,t[e>>2]=32|t[e>>2],a=(0|p)==2?0:a-(0|t[g+4>>2])|0),C=M,0|a},function(e,r,a){var d,f;return ve(0|(f=0|t[(d=20+(e|=0)|0)>>2]),0|(r|=0),0|(e=(a|=0)>>>0<(e=(0|t[e+16>>2])-f|0)>>>0?a:e)),t[d>>2]=(0|t[d>>2])+e,0|a}],ao=[fs,function(e,r,a,d){return 0|kn(0,0|(e|=0),0|(r|=0),0|(a|=0),0|(d|=0))},function(e,r,a,d){return le(0),0},fs],ds=[function(e){ki(3)},function(e){Bn(0,0|(e|=0))}],ms=[function(e,r){ki(4)},function(e,r){Pn(0,0|(e|=0),0|(r|=0))},function(e,r){var a,u=0,l=0,g=0,d=0,f=0,n=0,x=0,y=0,u=0|t[(a=308+(e|=0)|0)>>2],l=0|t[e+316>>2],g=0|t[e+320>>2];(0|(d=0|t[(f=u+((r|=0)<<5)+8|0)>>2]))==-1?(t[l+(r<<2)>>2]=t[(0|t[e+148>>2])+(t[u+(r<<5)+16>>2]<<2)>>2],v[g+(r<<2)>>2]=1):(x=0|t[(n=u+(r<<5)+16|0)>>2],y=0|t[(0|t[e+152>>2])+(x<<2)>>2],mi[3&t[u+(d<<5)+24>>2]](e,d,y,y,0|t[(0|t[e+60>>2])+(24*x|0)+16>>2]),f=0|t[f>>2],v[l+(r<<2)>>2]=+v[(0|t[e+148>>2])+(t[n>>2]<<2)>>2]*+v[l+(f<<2)>>2],t[g+(r<<2)>>2]=t[g+(f<<2)>>2]),(0|Rt[4+(0|t[e>>2])>>0])<4||(u=0|t[a>>2],l=0|t[e+324>>2],a=0|t[e+328>>2],g=r<<2,d=t[u+(r<<5)+16>>2]<<2,(0|(u=0|t[u+(r<<5)+8>>2]))==-1?(u=0|t[e+156>>2],t[l+(g<<2)>>2]=t[u+(d<<2)>>2],t[l+((r=1|g)<<2)>>2]=t[u+((f=1|d)<<2)>>2],t[l+((y=2|g)<<2)>>2]=t[u+((x=2|d)<<2)>>2],v[l+((u=3|g)<<2)>>2]=1,n=0|t[e+160>>2],t[a+(g<<2)>>2]=t[n+(d<<2)>>2],t[a+(r<<2)>>2]=t[n+(f<<2)>>2],t[a+(y<<2)>>2]=t[n+(x<<2)>>2]):(x=u<<2,n=(0|t[e+156>>2])+(d<<2)|0,v[(u=l+(g<<2)|0)>>2]=+v[n>>2]*+v[(y=l+(x<<2)|0)>>2],v[u+4>>2]=+v[n+4>>2]*+v[y+4>>2],v[u+8>>2]=+v[n+8>>2]*+v[y+8>>2],v[l+((u=3|g)<<2)>>2]=1,n=(0|t[e+160>>2])+(d<<2)|0,r=+v[n>>2],f=+v[(x=a+(x<<2)|0)>>2],v[(y=a+(g<<2)|0)>>2]=r+f-r*f,f=+v[n+4>>2],r=+v[x+4>>2],v[y+4>>2]=f+r-f*r,r=+v[n+8>>2],f=+v[x+8>>2],v[y+8>>2]=r+f-r*f),v[a+(u<<2)>>2]=1)},function(e,r){var a,d,f,n,x,y,u,l,g,p,k,M,b,B,E,S=0,z=0,O=0,H=0,U=0,it=0,ft=0,rt=0,st=0,ht=0,_t=0,at=0,Y=0,yt=C,at=C=C+63&-64;if(C=C+48|0,u=at+8|0,x=at+40|0,n=at+32|0,f=(y=at)+24|0,at=at+16|0,S=0|t[(k=308+(e|=0)|0)>>2],g=0|t[e+316>>2],p=0|t[e+320>>2],(0|(d=0|t[(B=S+((r|=0)<<5)+8|0)>>2]))==-1)Y=0|t[S+(r<<5)+16>>2],t[g+(r<<2)>>2]=t[(0|t[e+268>>2])+(Y<<2)>>2],t[p+(r<<2)>>2]=t[(0|t[e+272>>2])+(Y<<2)>>2];else{for(l=0|t[(E=S+(r<<5)+16|0)>>2],U=0|t[(0|t[(M=e+276|0)>>2])+(l<<2)>>2],t[at>>2]=U,l=0|t[(0|t[(b=e+280|0)>>2])+(l<<2)>>2],t[(ht=at+4|0)>>2]=l,_t=(0|t[S+(d<<5)+12>>2])==1?-10:-.10000000149011612,t[x>>2]=U,t[(U=4+x|0)>>2]=l,mi[3&t[(l=S+(d<<5)+24|0)>>2]](e,d,x,n,1),O=4+f|0,S=4+n|0,z=y+4|0,H=9,st=1;v[f>>2]=(rt=0*st)+ +v[x>>2],v[O>>2]=(a=_t*st)+ +v[U>>2],mi[3&t[l>>2]](e,d,f,y,1),ft=+v[y>>2]-+v[n>>2],v[y>>2]=ft,it=+v[z>>2]-+v[S>>2],!(ft!=0|(v[z>>2]=it)!=0);){if(v[f>>2]=+v[x>>2]-rt,v[O>>2]=+v[U>>2]-a,mi[3&t[l>>2]](e,d,f,y,1),it=+v[y>>2]-+v[n>>2],v[y>>2]=it,rt=+v[z>>2]-+v[S>>2],it!=0|(v[z>>2]=rt)!=0){Y=6;break}if(!H){Y=8;break}H=H+-1|0,st*=.10000000149011612}(0|Y)==6?(ft=-it,it=-rt):(0|Y)==8&&(pt(0,2813,u),it=ft=0),_t=180*+Un(0,_t,ft,it)/3.1415927410125732,mi[3&t[l>>2]](e,0|t[B>>2],at,at,1),Y=0|t[E>>2],t[(0|t[M>>2])+(Y<<2)>>2]=t[at>>2],t[(0|t[b>>2])+(Y<<2)>>2]=t[ht>>2],at=(0|t[e+284>>2])+(Y<<2)|0,v[at>>2]=+v[at>>2]-_t,at=0|t[B>>2],v[g+(r<<2)>>2]=+v[(0|t[e+268>>2])+(Y<<2)>>2]*+v[g+(at<<2)>>2],Y=(0|t[e+272>>2])+(Y<<2)|0,_t=+v[Y>>2]*+v[p+(at<<2)>>2],v[p+(r<<2)>>2]=_t,v[Y>>2]=_t}(0|Rt[4+(0|t[e>>2])>>0])<4||(S=0|t[k>>2],z=0|t[e+324>>2],U=0|t[e+328>>2],O=r<<2,H=t[S+(r<<5)+16>>2]<<2,(0|(S=0|t[S+(r<<5)+8>>2]))==-1?(S=0|t[e+296>>2],t[z+(O<<2)>>2]=t[S+(H<<2)>>2],t[z+((at=1|O)<<2)>>2]=t[S+((ht=1|H)<<2)>>2],t[z+((r=2|O)<<2)>>2]=t[S+((Y=2|H)<<2)>>2],v[z+((S=3|O)<<2)>>2]=1,e=0|t[e+300>>2],t[U+(O<<2)>>2]=t[e+(H<<2)>>2],t[U+(at<<2)>>2]=t[e+(ht<<2)>>2],t[U+(r<<2)>>2]=t[e+(Y<<2)>>2]):(at=S<<2,Y=(0|t[e+296>>2])+(H<<2)|0,v[(S=z+(O<<2)|0)>>2]=+v[Y>>2]*+v[(r=z+(at<<2)|0)>>2],v[S+4>>2]=+v[Y+4>>2]*+v[r+4>>2],v[S+8>>2]=+v[Y+8>>2]*+v[r+8>>2],v[z+((S=3|O)<<2)>>2]=1,Y=(0|t[e+300>>2])+(H<<2)|0,st=+v[Y>>2],_t=+v[(e=U+(at<<2)|0)>>2],v[(r=U+(O<<2)|0)>>2]=st+_t-st*_t,_t=+v[Y+4>>2],st=+v[e+4>>2],v[r+4>>2]=_t+st-_t*st,st=+v[Y+8>>2],_t=+v[e+8>>2],v[r+8>>2]=st+_t-st*_t),v[U+(S<<2)>>2]=1),C=yt}],mi=[function(e,r,a,d,f){ki(5)},function(e,r,a,d,f){vn(0,0|(e|=0),0|(r|=0),0|(a|=0),0|(d|=0),0|(f|=0))},function(e,r,a,d,f){a|=0,d|=0;var n,x,y,u,l,g,p,k,M,b,B,E,S,z,O,H,U,it,ft,rt,st,ht,_t,Y=0,yt=0,at=0,nt=0,Pt=0,Mt=0,kt=0,Yt=0,Gt=0,Ot=0,Tt=0,jt=0,Qt=0,Ut=0,Ht=0,xt=0,Bt=0,X=0,re=0,zt=0,_=0,P=0,L=0,tt=C;if(C=C+32|0,ft=tt,r=0|t[(0|t[308+(e|=0)>>2])+((r|=0)<<5)+16>>2],Y=0|t[e+60>>2],S=0|t[(0|t[e+152>>2])+(r<<2)>>2],z=0|t[Y+(24*r|0)+8>>2],O=0|t[Y+(24*r|0)+4>>2],H=1+z|0,(0|(f|=0))<=0)C=tt;else{U=0|z,it=0|O,E=(0|t[Y+(24*r|0)+12>>2])==0,x=S+(z<<3)|0,y=S+((M=0|ee(O,H))<<3)|0,u=S+((k=M+z|0)<<3)|0,l=4+S|0,g=S+(z<<3)+4|0,p=S+(M<<3)+4|0,k=S+(k<<3)+4|0,B=z-1|0,b=O-1|0,jt=Qt=Ut=Ht=yt=at=Tt=Ot=Gt=Yt=_=zt=kt=Mt=Pt=nt=P=X=0;do{xt=(n=+v[a+(P<<3)>>2])*U,re=(Bt=+v[a+(P<<3)+4>>2])*it,e=!(1<=n),Y=!(1<=Bt);do{if(Y&e&!(n<0)&!(Bt<0)){if(e=~~xt,r=(0|ee(H,Y=~~re))+e|0,at=xt-(0|e),yt=re-(0|Y),!E){v[d+(P<<3)>>2]=(xt=1-yt)*((Bt=1-at)*+v[S+(r<<3)>>2])+xt*(at*+v[S+((L=r+1|0)<<3)>>2])+yt*(Bt*+v[S+((e=r+H|0)<<3)>>2])+yt*(at*+v[S+((Y=e+1|0)<<3)>>2]),Bt=xt*(Bt*+v[S+(r<<3)+4>>2])+xt*(at*+v[S+(L<<3)+4>>2])+yt*(Bt*+v[S+(e<<3)+4>>2]),xt=yt*(at*+v[S+(Y<<3)+4>>2]);break}if(at+yt<=1){v[d+(P<<3)>>2]=(Bt=1-at-yt)*+v[S+(r<<3)>>2]+at*+v[S+((Y=r+1|0)<<3)>>2]+yt*+v[S+((L=r+H|0)<<3)>>2],Bt=Bt*+v[S+(r<<3)+4>>2]+at*+v[S+(Y<<3)+4>>2],xt=yt*+v[S+(L<<3)+4>>2];break}v[d+(P<<3)>>2]=(re=at+-1+yt)*+v[S+((e=1+(Y=r+H|0)|0)<<3)>>2]+(Bt=1-at)*+v[S+(Y<<3)>>2]+(xt=1-yt)*+v[S+((L=r+1|0)<<3)>>2],Bt=re*+v[S+(e<<3)+4>>2]+Bt*+v[S+(Y<<3)+4>>2],xt*=+v[S+(L<<3)+4>>2];break}if(X||(_t=+v[S>>2],ht=+v[x>>2],st=+v[y>>2],zt=+v[u>>2],rt=+v[l>>2],jt=(Ut=+v[g>>2])-(Ht=+v[p>>2]),X=1,zt=.25*(_t+ht+st+zt)-.5*(_t=zt-_t),_=.25*(rt+Ut+Ht+(_=+v[k>>2]))-.5*(rt=_-rt),Ht=.5*((Qt=ht-st)+_t),Ut=.5*(jt+rt),Qt=.5*(_t-Qt),jt=.5*(rt-jt)),!(Bt<3&-2<n&n<3&-2<Bt)){v[d+(P<<3)>>2]=Bt*Qt+(n*Ht+zt),Bt*=jt,xt=n*Ut+_;break}do{if(n<=0){if(Bt<=0){nt=zt-(Mt=2*Qt),Pt=_-(kt=2*jt),Mt=(Ot=zt-2*Ht)-Mt,kt=(Tt=_-2*Ut)-kt,Yt=+v[S>>2],Gt=+v[l>>2],at=.5*(2+n),yt=.5*(Bt+2);break}if(Y){kt=(yt=0|(Y=(0|O)==(0|(Y=~~re))?b:Y))/it,at=(0|(L=Y+1|0))/it,Y=0|ee(Y,H),L=0|ee(L,H),nt=+v[S+(Y<<3)>>2],Pt=+v[S+(Y<<3)+4>>2],Mt=kt*Qt+(Ot=zt-2*Ht),kt=kt*jt+(Tt=_-2*Ut),Yt=+v[S+(L<<3)>>2],Gt=+v[S+(L<<3)+4>>2],Ot=at*Qt+Ot,Tt=at*jt+Tt,at=.5*(2+n),yt=re-yt;break}nt=+v[y>>2],Pt=+v[p>>2],Mt=Qt+(Ot=zt-2*Ht),kt=jt+(Tt=_-2*Ut),Yt=(yt=3*Qt)+zt,Gt=(at=3*jt)+_,Ot=yt+Ot,Tt=at+Tt,at=.5*(2+n),yt=.5*(Bt+-1);break}if(r=Bt<=0,e){if(r){nt=(Pt=(0|(Y=(L=(0|z)==(0|(L=~~xt))?B:L)+1|0))/U)*Ht+zt-(Mt=2*Qt),Pt=Pt*Ut+_-(kt=2*jt),Mt=(Yt=(at=0|L)/U)*Ht+zt-Mt,kt=Yt*Ut+_-kt,Yt=+v[S+(Y<<3)>>2],Gt=+v[S+(Y<<3)+4>>2],Ot=+v[S+(L<<3)>>2],Tt=+v[S+(L<<3)+4>>2],at=xt-at,yt=.5*(Bt+2);break}if(Y){t[ft>>2]=P,Xt[ft+8>>3]=n,Xt[ft+16>>3]=Bt,pt(0,865,ft);break}at=0|(L=(0|z)==(0|(L=~~xt))?B:L),Gt=(0|(Y=L+1|0))/U,nt=+v[S+((Y=Y+M|0)<<3)>>2],Pt=+v[S+(Y<<3)+4>>2],Mt=+v[S+((L=L+M|0)<<3)>>2],kt=+v[S+(L<<3)+4>>2],Yt=(Ot=3*Qt)+(Gt*Ht+zt),Gt=(yt=3*jt)+(Gt*Ut+_),Ot+=(Tt=at/U)*Ht+zt,Tt=yt+(Tt*Ut+_),at=xt-at,yt=.5*(Bt+-1);break}if(r){nt=(Yt=3*Ht+zt)-(Mt=2*Qt),Pt=(Gt=3*Ut+_)-(kt=2*jt),Mt=Ht+zt-Mt,kt=Ut+_-kt,Ot=+v[x>>2],Tt=+v[g>>2],at=.5*(n-1),yt=.5*(Bt+2);break}if(Y){Pt=(yt=0|(Y=(0|O)==(0|(Y=~~re))?b:Y))/it,Ot=(0|(L=Y+1|0))/it,Y=(0|ee(Y,H))+z|0,L=(0|ee(L,H))+z|0,nt=Pt*Qt+(Yt=3*Ht+zt),Pt=Pt*jt+(Gt=3*Ut+_),Mt=+v[S+(Y<<3)>>2],kt=+v[S+(Y<<3)+4>>2],Yt=Ot*Qt+Yt,Gt=Ot*jt+Gt,Ot=+v[S+(L<<3)>>2],Tt=+v[S+(L<<3)+4>>2],at=.5*(n-1),yt=re-yt;break}nt=Qt+(Yt=3*Ht+zt),Pt=jt+(Gt=3*Ut+_),Mt=+v[u>>2],kt=+v[k>>2],Yt=(Ot=3*Qt)+Yt,Gt=(Tt=3*jt)+Gt,Ot+=Ht+zt,Tt+=Ut+_,at=.5*(n-1),yt=.5*(Bt+-1);break}while(0);if(at+yt<=1){v[d+(P<<3)>>2]=Mt+(nt-Mt)*at+(Ot-Mt)*yt,Bt=kt+(Pt-kt)*at,xt=(Tt-kt)*yt;break}v[d+(P<<3)>>2]=Yt+(Ot-Yt)*(Bt=1-at)+(nt-Yt)*(xt=1-yt),Bt=Gt+(Tt-Gt)*Bt,xt*=Pt-Gt;break}while(0)}while(v[d+(P<<3)+4>>2]=Bt+xt,(0|(P=P+1|0))!=(0|f));C=tt}},function(e,r,a,d,f){a|=0,d|=0,f|=0;var n,x,y,u,l,g,p,k;if(r=0|t[(0|t[(e|=0)+308>>2])+((r|=0)<<5)+16>>2],g=3.1415927410125732*(+v[(0|t[e+168>>2])+(12*r|0)+4>>2]+ +v[(0|t[e+284>>2])+(r<<2)>>2])/180,l=+Mi(g),g=+Oe(g),x=(g*=n=+v[(0|t[e+272>>2])+(r<<2)>>2])*(p=0|t[(0|t[e+288>>2])+(r<<2)>>2]?-1:1),n=(l*=n)*(k=0|t[(0|t[e+292>>2])+(r<<2)>>2]?-1:1),p*=l,k*=g,g=+v[(0|t[e+276>>2])+(r<<2)>>2],l=+v[(0|t[e+280>>2])+(r<<2)>>2],!((0|f)<=0))for(r=0;u=+v[a+(r<<3)>>2],y=+v[a+(r<<3)+4>>2],v[d+(r<<3)>>2]=x*u-n*y+g,v[d+(r<<3)+4>>2]=p*u+k*y+l,(0|(r=r+1|0))!=(0|f););}];return{___errno_location:function(){return 4104},___muldi3:ir,___udivdi3:rr,_bitshift64Lshr:C0,_bitshift64Shl:us,_csmFree:function(e){x0(e|=0)},_csmGetDrawableConstantFlags:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[888+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2312,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableCount:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+332>>2],C=r,0|a):(t[a>>2]=2274,t[a+4>>2]=1827,pt(0,1664,a),C=r,-1)},_csmGetDrawableDrawOrders:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+440>>2],C=r,0|a):(t[a>>2]=2396,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableDynamicFlags:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+432>>2],C=r,0|a):(t[a>>2]=2340,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableIds:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[832+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2294,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableIndexCounts:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[904+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2598,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableIndices:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[840+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2624,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableMaskCounts:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[912+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2472,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableMasks:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[844+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2497,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableMultiplyColors:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+452>>2],C=r,0|a):(t[a>>2]=2646,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableOpacities:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+448>>2],C=r,0|a):(t[a>>2]=2448,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableParentPartIndices:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[876+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2702,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableRenderOrders:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+436>>2],C=r,0|a):(t[a>>2]=2421,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableScreenColors:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+456>>2],C=r,0|a):(t[a>>2]=2675,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableTextureIndices:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[884+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2367,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableVertexCounts:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[892+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2517,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableVertexPositions:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+444>>2],C=r,0|a):(t[a>>2]=2544,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetDrawableVertexUvs:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[836+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2574,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetLatestMocVersion:function(){return 4},_csmGetMocVersion:function(e,r){r|=0;var a=C;return r=C=C+63&-64,C=C+16|0,(e|=0)?(e=0|En(e),C=a,0|e):(t[r>>2]=1681,t[r+4>>2]=1698,pt(0,1664,r),C=a,(e=0)|e)},_csmGetParameterCount:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+540>>2],C=r,0|a):(t[a>>2]=2026,t[a+4>>2]=1827,pt(0,1664,a),C=r,-1)},_csmGetParameterDefaultValues:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[932+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2145,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetParameterIds:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[916+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2047,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetParameterKeyCounts:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+616>>2],C=r,0|a):(t[a>>2]=2763,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetParameterKeyValues:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+612>>2],C=r,0|a):(t[a>>2]=2788,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetParameterMaximumValues:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[924+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2116,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetParameterMinimumValues:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[928+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2087,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetParameterTypes:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+548>>2],C=r,0|a):(t[a>>2]=2066,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetParameterValues:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+552>>2],C=r,0|a):(t[a>>2]=2174,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetPartCount:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+4>>2],C=r,0|a):(t[a>>2]=2196,t[a+4>>2]=1827,pt(0,1664,a),C=r,-1)},_csmGetPartIds:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[712+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2212,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetPartOpacities:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[e+52>>2],C=r,0|a):(t[a>>2]=2226,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetPartParentPartIndices:function(e){var a=0,r=C,a=C=C+63&-64;return C=C+16|0,(e|=0)?(a=0|t[740+(0|t[e>>2])>>2],C=r,0|a):(t[a>>2]=2246,t[a+4>>2]=1827,pt(0,1664,a),C=r,(a=0)|a)},_csmGetSizeofModel:Wr,_csmGetVersion:function(){return 67239940},_csmHasMocConsistency:function(e,r){r|=0;var a,n=0,d=0,f=C,n=C=C+63&-64;return C=C+32|0,d=n+16|0,a=n+8|0,(e|=0)?((n=e)+63&-64|0)!=(0|n)?(t[a>>2]=1717,t[4+a>>2]=1738,pt(0,1664,a),C=f,(d=0)|d):0|r&&(r+63&-64|0)==(0|r)?(d=0|Fn(e,r),C=f,0|d):(t[d>>2]=1717,t[d+4>>2]=1770,pt(0,1664,d),C=f,(d=0)|d):(t[n>>2]=1717,t[n+4>>2]=1698,pt(0,1664,n),C=f,(d=0)|d)},_csmInitializeAmountOfMemory:function(e){var r=C,a=C=C+63&-64;C=C+16|0,er(a,64,e|=0),x0(0|t[a>>2]),C=r},_csmInitializeModelInPlace:Zr,_csmMalloc:function(e){return 0|tr(e|=0)},_csmMallocMoc:function(e){var r=C,a=C=C+63&-64;return C=C+16|0,er(a,64,e|=0),C=r,0|t[a>>2]},_csmMallocModelAndInitialize:function(e){var d=0,r=0,a=C,d=C=C+63&-64;return C=C+16|0,0|(e|=0)&&!(0|er(d,16,r=0|Wr(e)))?(d=0|Zr(e,e=0|t[d>>2],r))||(x0(e),d=0):d=0,C=a,0|d},_csmReadCanvasInfo:function(e,r,a,d){r|=0,a|=0,d|=0;var f,n,x=0,y=C,u=C=C+63&-64;if(C=C+32|0,f=24+u|0,x=16+u|0,n=8+u|0,e|=0)return r?a?d?(x=0|t[708+(0|t[e>>2])>>2],t[r>>2]=t[x+12>>2],t[r+4>>2]=t[x+16>>2],t[a>>2]=t[x+4>>2],t[a+4>>2]=t[x+8>>2],t[d>>2]=t[x>>2]):(t[f>>2]=1809,t[4+f>>2]=1903,pt(0,1664,f)):(t[x>>2]=1809,t[x+4>>2]=1874,pt(0,1664,x)):(t[n>>2]=1809,t[4+n>>2]=1847,pt(0,1664,n)),void(C=y);t[u>>2]=1809,t[4+u>>2]=1827,pt(0,1664,u),C=y},_csmResetDrawableDynamicFlags:function(e){var r=C,a=C=C+63&-64;C=C+16|0,(e|=0)?t[e+428>>2]=1:(t[a>>2]=2734,t[4+a>>2]=1827,pt(0,1664,a)),C=r},_csmReviveMocInPlace:function(e,r){r|=0;var a,n=0,d=0,f=C,n=C=C+63&-64;return C=C+32|0,d=n+16|0,a=n+8|0,(e|=0)?((n=e)+63&-64|0)!=(0|n)?(t[a>>2]=1789,t[4+a>>2]=1738,pt(0,1664,a),C=f,(d=0)|d):0|r&&(r+63&-64|0)==(0|r)?(d=0|bn(e),C=f,0|d):(t[d>>2]=1789,t[d+4>>2]=1770,pt(0,1664,d),C=f,(d=0)|d):(t[n>>2]=1789,t[n+4>>2]=1698,pt(0,1664,n),C=f,(d=0)|d)},_csmSetLogFunction:function(e){t[1008]=e|=0},_csmUpdateModel:function(e){var r=C,a=C=C+63&-64;C=C+16|0,(e|=0)?Jr(e):(t[a>>2]=2011,t[4+a>>2]=1827,pt(0,1664,a)),C=r},_emscripten_get_sbrk_ptr:function(){return 4624},_emscripten_replace_memory:function(e){return J=new Int8Array(e),Rt=new Uint8Array(e),$t=new Int16Array(e),ce=new Uint16Array(e),t=new Int32Array(e),v=new Float32Array(e),Xt=new Float64Array(e),!0},_free:x0,_i64Add:qi,_i64Subtract:S0,_malloc:tr,_memcpy:ve,_memmove:hs,_memset:ke,dynCall_ii:function(e,r){return 0|so[3&(e|=0)](0|(r|=0))},dynCall_iiii:function(e,r,a,d){return 0|w0[3&(e|=0)](0|(r|=0),0|(a|=0),0|(d|=0))},dynCall_iiiii:function(e,r,a,d,f){return 0|ao[3&(e|=0)](0|(r|=0),0|(a|=0),0|(d|=0),0|(f|=0))},dynCall_vi:function(e,r){ds[1&(e|=0)](0|(r|=0))},dynCall_vii:function(e,r,a){ms[3&(e|=0)](0|(r|=0),0|(a|=0))},dynCall_viiiii:function(e,r,a,d,f,n){mi[3&(e|=0)](0|(r|=0),0|(a|=0),0|(d|=0),0|(f|=0),0|(n|=0))},establishStackSpace:function(e,r){C=e|=0},stackAlloc:function(e){var r=C;return C=15+(C+(e|=0)|0)&-16,0|r},stackRestore:function(e){C=0|e},stackSave:function(){return 0|C}}}({Math,Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Float32Array,Float64Array},{a:ji,b:function(j){Ye=j},c:function(){return Ye},d:function(j,$){return he[j]($)},e:function(j,$,ot,J){return he[j]($,ot,J)},f:function(j,$,ot,J,$t){return he[j]($,ot,J,$t)},g:function(j,$){he[j]($)},h:function(j,$,ot){he[j]($,ot)},i:function(j,$,ot,J,$t,t){he[j]($,ot,J,$t,t)},j:function(){return Ur.apply(null,arguments)},k:Nr,l:function(j,$,ot){ti.set(ti.subarray($,$+ot),j)},m:function(j){if(2130706432<j)return!1;for(var $=Math.max(Nr(),16777216);$<j;)$=$<=536870912?Fr(2*$):Math.min(Fr((3*$+2147483648)/4),2130706432);return!!zr($)},n:Ur,o:function(){ji("OOM")},p:function(j){return j},q:Lr,r:zr,s:function(){var j=A._fflush;j&&j(0),W0[1].length&&Z0(1,10),W0[2].length&&Z0(2,10)},t:Or,u:function(){var j=Or();return A.extraStackTrace&&(j+=`
`+A.extraStackTrace()),Lr(j)},v:4816},wi),xn=(A.___errno_location=ut.___errno_location,A.___muldi3=ut.___muldi3,A.___udivdi3=ut.___udivdi3,A._bitshift64Lshr=ut._bitshift64Lshr,A._bitshift64Shl=ut._bitshift64Shl,A._csmFree=ut._csmFree,A._csmGetDrawableConstantFlags=ut._csmGetDrawableConstantFlags,A._csmGetDrawableCount=ut._csmGetDrawableCount,A._csmGetDrawableDrawOrders=ut._csmGetDrawableDrawOrders,A._csmGetDrawableDynamicFlags=ut._csmGetDrawableDynamicFlags,A._csmGetDrawableIds=ut._csmGetDrawableIds,A._csmGetDrawableIndexCounts=ut._csmGetDrawableIndexCounts,A._csmGetDrawableIndices=ut._csmGetDrawableIndices,A._csmGetDrawableMaskCounts=ut._csmGetDrawableMaskCounts,A._csmGetDrawableMasks=ut._csmGetDrawableMasks,A._csmGetDrawableMultiplyColors=ut._csmGetDrawableMultiplyColors,A._csmGetDrawableOpacities=ut._csmGetDrawableOpacities,A._csmGetDrawableParentPartIndices=ut._csmGetDrawableParentPartIndices,A._csmGetDrawableRenderOrders=ut._csmGetDrawableRenderOrders,A._csmGetDrawableScreenColors=ut._csmGetDrawableScreenColors,A._csmGetDrawableTextureIndices=ut._csmGetDrawableTextureIndices,A._csmGetDrawableVertexCounts=ut._csmGetDrawableVertexCounts,A._csmGetDrawableVertexPositions=ut._csmGetDrawableVertexPositions,A._csmGetDrawableVertexUvs=ut._csmGetDrawableVertexUvs,A._csmGetLatestMocVersion=ut._csmGetLatestMocVersion,A._csmGetMocVersion=ut._csmGetMocVersion,A._csmGetParameterCount=ut._csmGetParameterCount,A._csmGetParameterDefaultValues=ut._csmGetParameterDefaultValues,A._csmGetParameterIds=ut._csmGetParameterIds,A._csmGetParameterKeyCounts=ut._csmGetParameterKeyCounts,A._csmGetParameterKeyValues=ut._csmGetParameterKeyValues,A._csmGetParameterMaximumValues=ut._csmGetParameterMaximumValues,A._csmGetParameterMinimumValues=ut._csmGetParameterMinimumValues,A._csmGetParameterTypes=ut._csmGetParameterTypes,A._csmGetParameterValues=ut._csmGetParameterValues,A._csmGetPartCount=ut._csmGetPartCount,A._csmGetPartIds=ut._csmGetPartIds,A._csmGetPartOpacities=ut._csmGetPartOpacities,A._csmGetPartParentPartIndices=ut._csmGetPartParentPartIndices,A._csmGetSizeofModel=ut._csmGetSizeofModel,A._csmGetVersion=ut._csmGetVersion,A._csmHasMocConsistency=ut._csmHasMocConsistency,A._csmInitializeAmountOfMemory=ut._csmInitializeAmountOfMemory,A._csmInitializeModelInPlace=ut._csmInitializeModelInPlace,A._csmMalloc=ut._csmMalloc,A._csmMallocMoc=ut._csmMallocMoc,A._csmMallocModelAndInitialize=ut._csmMallocModelAndInitialize,A._csmReadCanvasInfo=ut._csmReadCanvasInfo,A._csmResetDrawableDynamicFlags=ut._csmResetDrawableDynamicFlags,A._csmReviveMocInPlace=ut._csmReviveMocInPlace,A._csmSetLogFunction=ut._csmSetLogFunction,A._csmUpdateModel=ut._csmUpdateModel,A._emscripten_get_sbrk_ptr=ut._emscripten_get_sbrk_ptr,A._emscripten_replace_memory=ut._emscripten_replace_memory),Xr=(A._free=ut._free,A._i64Add=ut._i64Add,A._i64Subtract=ut._i64Subtract,A._malloc=ut._malloc,A._memcpy=ut._memcpy,A._memmove=ut._memmove,A._memset=ut._memset,A.establishStackSpace=ut.establishStackSpace,A.stackAlloc=ut.stackAlloc),Sn=A.stackRestore=ut.stackRestore,Cn=A.stackSave=ut.stackSave;function q0(){function j(){if(!Wi&&(Wi=!0,!Gi)){if(d0(mn),d0(pn),A.onRuntimeInitialized&&A.onRuntimeInitialized(),A.postRun)for(typeof A.postRun=="function"&&(A.postRun=[A.postRun]);A.postRun.length;){var $=A.postRun.shift();Dr.unshift($)}d0(Dr)}}if(!(0<fi)){if(A.preRun)for(typeof A.preRun=="function"&&(A.preRun=[A.preRun]);A.preRun.length;)(function(){var $=A.preRun.shift();Er.unshift($)})();d0(Er),0<fi||(A.setStatus?(A.setStatus("Running..."),setTimeout(function(){setTimeout(function(){A.setStatus("")},1),j()},1)):j())}}if(A.dynCall_ii=ut.dynCall_ii,A.dynCall_iiii=ut.dynCall_iiii,A.dynCall_iiiii=ut.dynCall_iiiii,A.dynCall_vi=ut.dynCall_vi,A.dynCall_vii=ut.dynCall_vii,A.dynCall_viiiii=ut.dynCall_viiiii,A.asm=ut,A.ccall=function(j,$,ot,J){var $t={string:function(Xt){var fe=0;if(Xt!=null&&Xt!==0){var Le=1+(Xt.length<<2),ye=fe=Xr(Le),Oe=ti;if(0<Le){for(var Le=ye+Le-1,Mi=0;Mi<Xt.length;++Mi){var me=Xt.charCodeAt(Mi);if((me=55296<=me&&me<=57343?65536+((1023&me)<<10)|1023&Xt.charCodeAt(++Mi):me)<=127){if(Le<=ye)break;Oe[ye++]=me}else{if(me<=2047){if(Le<=ye+1)break;Oe[ye++]=192|me>>6}else{if(me<=65535){if(Le<=ye+2)break;Oe[ye++]=224|me>>12}else{if(Le<=ye+3)break;Oe[ye++]=240|me>>18,Oe[ye++]=128|me>>12&63}Oe[ye++]=128|me>>6&63}Oe[ye++]=128|63&me}}Oe[ye]=0}}return fe},array:function(Xt){var fe=Xr(Xt.length);return _0.set(Xt,fe),fe}},t=function(Xt){var fe=A["_"+Xt];return ci(fe,"Cannot call unknown function "+Xt+", make sure it is exported"),fe}(j),Rt=[];if(j=0,J)for(var ce=0;ce<J.length;ce++){var v=$t[ot[ce]];v?(j===0&&(j=Cn()),Rt[ce]=v(J[ce])):Rt[ce]=J[ce]}return ot=function(Xt){return $==="string"?Tr(Xt):$==="boolean"?!!Xt:Xt}(ot=t.apply(null,Rt)),j!==0&&Sn(j),ot},A.UTF8ToString=Tr,A.addFunction=function(j){for(var $=0;$<1;$++)if(!he[$])return he[$]=j,1+$;throw"Finished up all reserved function pointers. Use a higher value for RESERVED_FUNCTION_POINTERS."},Te&&((String.prototype.startsWith?Te.startsWith(Hi):Te.indexOf(Hi)===0)||(mt=Te,Te=A.locateFile?A.locateFile(mt,Et):Et+mt),dt||ct?(ut=gt(Te),ti.set(ut,8)):(fi++,A.monitorRunDependencies&&A.monitorRunDependencies(fi),m0=function(j){j.byteLength&&(j=new Uint8Array(j)),ti.set(j,8),A.memoryInitializerRequest&&delete A.memoryInitializerRequest.response,fi--,A.monitorRunDependencies&&A.monitorRunDependencies(fi),fi==0&&(H0!==null&&(clearInterval(H0),H0=null),Yi&&(j=Yi,Yi=null,j()))},J0=function(){W(function(){throw"could not load memory initializer "+Te})},(Et=ei(Te))?m0(Et.buffer):A.memoryInitializerRequest?(mt=function(){var j=A.memoryInitializerRequest,$=j.response;if(j.status!==200&&j.status!==0){if(!($=ei(A.memoryInitializerRequestURL)))return console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+j.status+", retrying "+Te),void J0();$=$.buffer}m0($)},A.memoryInitializerRequest.response?setTimeout(mt,0):A.memoryInitializerRequest.addEventListener("load",mt)):J0())),A.then=function(j){var $;return Wi?j(A):($=A.onRuntimeInitialized,A.onRuntimeInitialized=function(){$&&$(),j(A)}),A},Yi=function j(){Wi||q0(),Wi||(Yi=j)},A.run=q0,A.preInit)for(typeof A.preInit=="function"&&(A.preInit=[A.preInit]);0<A.preInit.length;)A.preInit.pop()();return q0(),V}),D=(typeof exports=="object"&&typeof module=="object"?module.exports=N:typeof define=="function"&&define.amd?define([],function(){return N}):typeof exports=="object"&&(exports._em_module=N),N())})(ne=ne||{});var ar=(c=>(c[c.Max=2]="Max",c[c.Min=.8]="Min",c))(ar||{}),B0=(c=>(c[c.Left=-1]="Left",c[c.Right=1]="Right",c[c.Bottom=-1]="Bottom",c[c.Top=1]="Top",c))(B0||{}),e0=(c=>(c[c.Left=-2]="Left",c[c.Right=2]="Right",c[c.Bottom=-2]="Bottom",c[c.Top=2]="Top",c))(e0||{}),Ii=(c=>(c.Idle="Idle",c.TapBody="TapBody",c.TapLeft="TapLeft",c.TapRight="TapRight",c.Tap="Tap",c))(Ii||{}),ae=(c=>(c.Head="Head",c.Body="Body",c.Left="Left",c.Right="Right",c.Other="Other",c))(ae||{}),Je=(c=>(c[c.None=0]="None",c[c.Idle=1]="Idle",c[c.Normal=2]="Normal",c[c.Force=3]="Force",c))(Je||{});const Se={canvas:{width:280,height:360},scale:1,debug:!1,target:document.body,source:{path:"",models:[]}},no=c=>{Se.target=document.body,Object.keys(c).forEach(i=>{Se.hasOwnProperty(i)&&(Se[i]=c[i])})};class wt{constructor(i=0){i<1?(this._ptr=[],this._capacity=0,this._size=0):(this._ptr=new Array(i),this._capacity=i,this._size=0)}at(i){return this._ptr[i]}set(i,s){this._ptr[i]=s}get(i=0){const s=new Array;for(let o=i;o<this._size;o++)s.push(this._ptr[o]);return s}pushBack(i){this._size>=this._capacity&&this.prepareCapacity(this._capacity==0?wt.s_defaultSize:this._capacity*2),this._ptr[this._size++]=i}clear(){this._ptr.length=0,this._size=0}getSize(){return this._size}assign(i,s){this._size<i&&this.prepareCapacity(i);for(let m=0;m<i;m++)this._ptr[m]=s;this._size=i}resize(i,s=null){this.updateSize(i,s,!0)}updateSize(i,s=null,o=!0){if(this._size<i)if(this.prepareCapacity(i),o)for(let w=this._size;w<i;w++)typeof s=="function"?this._ptr[w]=JSON.parse(JSON.stringify(new s)):this._ptr[w]=s;else for(let w=this._size;w<i;w++)this._ptr[w]=s;else{const w=this._size-i;this._ptr.splice(this._size-w,w)}this._size=i}insert(i,s,o){let m=i._index;const w=s._index,T=o._index,I=T-w;this.prepareCapacity(this._size+I);const N=this._size-m;if(N>0)for(let D=0;D<N;D++)this._ptr.splice(m+D,0,null);for(let D=w;D<T;D++,m++)this._ptr[m]=s._vector._ptr[D];this._size=this._size+I}remove(i){return i<0||this._size<=i?!1:(this._ptr.splice(i,1),--this._size,!0)}erase(i){const s=i._index;return s<0||this._size<=s?i:(this._ptr.splice(s,1),--this._size,new P0(this,s))}prepareCapacity(i){i>this._capacity&&(this._capacity==0?(this._ptr=new Array(i),this._capacity=i):(this._ptr.length=i,this._capacity=i))}begin(){return this._size==0?this.end():new P0(this,0)}end(){return new P0(this,this._size)}getOffset(i){const s=new wt;return s._ptr=this.get(i),s._size=this.get(i).length,s._capacity=this.get(i).length,s}_ptr;_size;_capacity;static s_defaultSize=10}let P0=class vr{constructor(i,s){this._vector=i??null,this._index=s??0}set(i){return this._index=i._index,this._vector=i._vector,this}preIncrement(){return++this._index,this}preDecrement(){return--this._index,this}increment(){return new vr(this._vector,this._index++)}decrement(){return new vr(this._vector,this._index--)}ptr(){return this._vector._ptr[this._index]}substitution(i){return this._index=i._index,this._vector=i._vector,this}notEqual(i){return this._index!=i._index||this._vector!=i._vector}_index;_vector};var ys;(c=>{c.csmVector=wt,c.iterator=P0})(ys||(ys={}));class Ve{append(i,s){return this.s+=s!==void 0?i.substr(0,s):i,this}expansion(i,s){for(let o=0;o<i;o++)this.append(s);return this}getBytes(){return encodeURIComponent(this.s).replace(/%../g,"x").length}getLength(){return this.s.length}isLess(i){return this.s<i.s}isGreat(i){return this.s>i.s}isEqual(i){return this.s==i}isEmpty(){return this.s.length==0}constructor(i){this.s=i}s}var As;(c=>{c.csmString=Ve})(As||(As={}));class g0{getString(){return this._id}constructor(i){if(typeof i=="string"){this._id=new Ve(i);return}this._id=i}isEqual(i){return typeof i=="string"?this._id.isEqual(i):i instanceof Ve?this._id.isEqual(i.s):i instanceof g0?this._id.isEqual(i._id.s):!1}isNotEqual(i){return typeof i=="string"?!this._id.isEqual(i):i instanceof Ve?!this._id.isEqual(i.s):i instanceof g0?!this._id.isEqual(i._id.s):!1}_id}var xs;(c=>{c.CubismId=g0})(xs||(xs={}));class Ss{constructor(){this._ids=new wt}release(){for(let i=0;i<this._ids.getSize();++i)this._ids.set(i,void 0);this._ids=null}registerIds(i){for(let s=0;s<i.length;s++)this.registerId(i[s])}registerId(i){let s=null;if(typeof i=="string"){if((s=this.findId(i))!=null)return s;s=new g0(i),this._ids.pushBack(s)}else return this.registerId(i.s);return s}getId(i){return this.registerId(i)}isExist(i){return typeof i=="string"?this.findId(i)!=null:this.isExist(i.s)}findId(i){for(let s=0;s<this._ids.getSize();++s)if(this._ids.at(s).getString().isEqual(i))return this._ids.at(s);return null}_ids}var Cs;(c=>{c.CubismIdManager=Ss})(Cs||(Cs={}));class oe{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(i,s,o){const m=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),w=4;for(let T=0;T<w;++T)for(let I=0;I<w;++I)for(let N=0;N<w;++N)m[I+T*4]+=i[N+T*4]*s[I+N*4];for(let T=0;T<16;++T)o[T]=m[T]}loadIdentity(){const i=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(i)}setMatrix(i){for(let s=0;s<16;++s)this._tr[s]=i[s]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(i){return this._tr[0]*i+this._tr[12]}transformY(i){return this._tr[5]*i+this._tr[13]}invertTransformX(i){return(i-this._tr[12])/this._tr[0]}invertTransformY(i){return(i-this._tr[13])/this._tr[5]}translateRelative(i,s){const o=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,i,s,0,1]);oe.multiply(o,this._tr,this._tr)}translate(i,s){this._tr[12]=i,this._tr[13]=s}translateX(i){this._tr[12]=i}translateY(i){this._tr[13]=i}scaleRelative(i,s){const o=new Float32Array([i,0,0,0,0,s,0,0,0,0,1,0,0,0,0,1]);oe.multiply(o,this._tr,this._tr)}scale(i,s){this._tr[0]=i,this._tr[5]=s}multiplyByMatrix(i){oe.multiply(i.getArray(),this._tr,this._tr)}clone(){const i=new oe;for(let s=0;s<this._tr.length;s++)i._tr[s]=this._tr[s];return i}_tr}var ws;(c=>{c.CubismMatrix44=oe})(ws||(ws={}));class v0{static create(){return null}static delete(i){}initialize(i){this._model=i}drawModel(){this.getModel()!=null&&(this.saveProfile(),this.doDrawModel(),this.restoreProfile())}setMvpMatrix(i){this._mvpMatrix4x4.setMatrix(i.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(i,s,o,m){i<0?i=0:i>1&&(i=1),s<0?s=0:s>1&&(s=1),o<0?o=0:o>1&&(o=1),m<0?m=0:m>1&&(m=1),this._modelColor.R=i,this._modelColor.G=s,this._modelColor.B=o,this._modelColor.A=m}getModelColor(){return JSON.parse(JSON.stringify(this._modelColor))}setIsPremultipliedAlpha(i){this._isPremultipliedAlpha=i}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(i){this._isCulling=i}isCulling(){return this._isCulling}setAnisotropy(i){this._anisotropy=i}getAnisotropy(){return this._anisotropy}getModel(){return this._model}useHighPrecisionMask(i){this._useHighPrecisionMask=i}isUsingHighPrecisionMask(){return this._useHighPrecisionMask}constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisotropy=0,this._model=null,this._modelColor=new qe,this._useHighPrecisionMask=!1,this._mvpMatrix4x4=new oe,this._mvpMatrix4x4.loadIdentity()}static staticRelease;_mvpMatrix4x4;_modelColor;_isCulling;_isPremultipliedAlpha;_anisotropy;_model;_useHighPrecisionMask}var Ne=(c=>(c[c.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",c[c.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",c[c.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative",c))(Ne||{});class qe{constructor(){this.R=1,this.G=1,this.B=1,this.A=1}R;G;B;A}var Ms;(c=>{c.CubismBlendMode=Ne,c.CubismRenderer=v0,c.CubismTextureColor=qe})(Ms||(Ms={}));const oo=(c,i,s)=>{ks.print(c,"[CSM]"+i,s)},I0=(c,i,s)=>{oo(c,i+`
`,s)},ze=c=>{console.assert(c)};let i0,$e,ri,we;i0=(c,...i)=>{I0(Ei.LogLevel_Debug,"[D]"+c,i)},$e=(c,...i)=>{I0(Ei.LogLevel_Info,"[I]"+c,i)},ri=(c,...i)=>{I0(Ei.LogLevel_Warning,"[W]"+c,i)},we=(c,...i)=>{I0(Ei.LogLevel_Error,"[E]"+c,i)};class ks{static print(i,s,o){if(i<Wt.getLoggingLevel())return;const m=Wt.coreLogFunction;if(!m)return;const w=s.replace(/\{(\d+)\}/g,(T,I)=>o[I]);m(w)}static dumpBytes(i,s,o){for(let m=0;m<o;m++)m%16==0&&m>0?this.print(i,`
`):m%8==0&&m>0&&this.print(i,"  "),this.print(i,"{0} ",[s[m]&255]);this.print(i,`
`)}constructor(){}}var Bs;(c=>{c.CubismDebug=ks})(Bs||(Bs={}));class Ps{constructor(i,s){this.first=i??null,this.second=s??null}first;second}class Me{constructor(i){i!=null?i<1?(this._keyValues=[],this._dummyValue=null,this._size=0):(this._keyValues=new Array(i),this._size=i):(this._keyValues=[],this._dummyValue=null,this._size=0)}release(){this.clear()}appendKey(i){this.prepareCapacity(this._size+1,!1),this._keyValues[this._size]=new Ps(i),this._size+=1}getValue(i){let s=-1;for(let o=0;o<this._size;o++)if(this._keyValues[o].first==i){s=o;break}return s>=0?this._keyValues[s].second:(this.appendKey(i),this._keyValues[this._size-1].second)}setValue(i,s){let o=-1;for(let m=0;m<this._size;m++)if(this._keyValues[m].first==i){o=m;break}o>=0?this._keyValues[o].second=s:(this.appendKey(i),this._keyValues[this._size-1].second=s)}isExist(i){for(let s=0;s<this._size;s++)if(this._keyValues[s].first==i)return!0;return!1}clear(){this._keyValues=void 0,this._keyValues=null,this._keyValues=[],this._size=0}getSize(){return this._size}prepareCapacity(i,s){i>this._keyValues.length&&(this._keyValues.length==0?(!s&&i<Me.DefaultSize&&(i=Me.DefaultSize),this._keyValues.length=i):(!s&&i<this._keyValues.length*2&&(i=this._keyValues.length*2),this._keyValues.length=i))}begin(){return new Ci(this,0)}end(){return new Ci(this,this._size)}erase(i){const s=i._index;return s<0||this._size<=s?i:(this._keyValues.splice(s,1),--this._size,new Ci(this,s))}dumpAsInt(){for(let i=0;i<this._size;i++)i0("{0} ,",this._keyValues[i]),i0(`
`)}static DefaultSize=10;_keyValues;_dummyValue;_size}class Ci{constructor(i,s){this._map=i??new Me,this._index=s??0}set(i){return this._index=i._index,this._map=i._map,this}preIncrement(){return++this._index,this}preDecrement(){return--this._index,this}increment(){return new Ci(this._map,this._index++)}decrement(){const i=new Ci(this._map,this._index);return this._map=i._map,this._index=i._index,this}ptr(){return this._map._keyValues[this._index]}notEqual(i){return this._index!=i._index||this._map!=i._map}_index;_map}var vs;(c=>{c.csmMap=Me,c.csmPair=Ps,c.iterator=Ci})(vs||(vs={}));class z0{static parseJsonObject(i,s){return Object.keys(i).forEach(o=>{typeof i[o]=="boolean"?s.put(o,new be(i[o])):typeof i[o]=="string"?s.put(o,new Vi(i[o])):typeof i[o]=="number"?s.put(o,new R0(i[o])):i[o]instanceof Array?s.put(o,z0.parseJsonArray(i[o])):i[o]instanceof Object?s.put(o,z0.parseJsonObject(i[o],new Ti)):i[o]==null?s.put(o,new Ri):s.put(o,i[o])}),s}static parseJsonArray(i){const s=new nr;return Object.keys(i).forEach(o=>{const m=Number(o);if(typeof m=="number")typeof i[m]=="boolean"?s.add(new be(i[m])):typeof i[m]=="string"?s.add(new Vi(i[m])):typeof i[m]=="number"?s.add(new R0(i[m])):i[o]instanceof Array?s.add(this.parseJsonArray(i[o])):i[o]instanceof Object?s.add(this.parseJsonObject(i[o],new Ti)):i[o]==null?s.add(new Ri):s.add(i[o]);else if(i[o]instanceof Array)s.add(this.parseJsonArray(i[o]));else if(i[o]instanceof Object)s.add(this.parseJsonObject(i[o],new Ti));else if(i[o]==null)s.add(new Ri);else for(let w=0;w<i[o].length;w++)s.add(i[o][w])}),s}}const V0="Error: type mismatch",lo="Error: index out of bounds";let xe=class Xe{constructor(){}getRawString(i,s){return this.getString(i,s)}toInt(i=0){return i}toFloat(i=0){return i}toBoolean(i=!1){return i}getSize(){return 0}getArray(i=null){return i}getVector(i=new wt){return i}getMap(i){return i}getValueByIndex(i){return Xe.errorValue.setErrorNotForClientCall(V0)}getValueByString(i){return Xe.nullValue.setErrorNotForClientCall(V0)}getKeys(){return Xe.s_dummyKeys}isError(){return!1}isNull(){return!1}isBool(){return!1}isFloat(){return!1}isString(){return!1}isArray(){return!1}isMap(){return!1}equals(i){return!1}isStatic(){return!1}setErrorNotForClientCall(i){return r0.errorValue}static staticInitializeNotForClientCall(){be.trueValue=new be(!0),be.falseValue=new be(!1),Xe.errorValue=new r0("ERROR",!0),Xe.nullValue=new Ri,Xe.s_dummyKeys=new wt}static staticReleaseNotForClientCall(){be.trueValue=null,be.falseValue=null,Xe.errorValue=null,Xe.nullValue=null,Xe.s_dummyKeys=null}_stringBuffer;static s_dummyKeys;static errorValue;static nullValue};class pe{constructor(i,s){this._error=null,this._lineCount=0,this._root=null,i!=null&&this.parseBytes(i,s,this._parseCallback)}static create(i,s){const o=new pe;return o.parseBytes(i,s,o._parseCallback)?o:(pe.delete(o),null)}static delete(i){}getRoot(){return this._root}static arrayBufferToString(i){const s=new Uint8Array(i);let o="";for(let m=0,w=s.length;m<w;++m)o+="%"+this.pad(s[m].toString(16));return o=decodeURIComponent(o),o}static pad(i){return i.length<2?"0"+i:i}parseBytes(i,s,o){const m=new Array(1),w=pe.arrayBufferToString(i);if(o==null?this._root=this.parseValue(w,s,0,m):this._root=o(JSON.parse(w),new Ti),this._error){let T="\0";return T="Json parse error : @line "+(this._lineCount+1)+`
`,this._root=new Vi(T),$e("{0}",this._root.getRawString()),!1}else if(this._root==null)return this._root=new r0(new Ve(this._error),!1),!1;return!0}getParseError(){return this._error}checkEndOfFile(){return this._root.getArray()[1].equals("EOF")}parseValue(i,s,o,m){if(this._error)return null;let w=null,T=o,I;for(;T<s;T++)switch(i[T]){case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{const D=new Array(1);return I=uo(i.slice(T),D),m[0]=i.indexOf(D[0]),new R0(I)}case'"':return new Vi(this.parseString(i,s,T+1,m));case"[":return w=this.parseArray(i,s,T+1,m),w;case"{":return w=this.parseObject(i,s,T+1,m),w;case"n":return T+3<s?(w=new Ri,m[0]=T+4):this._error="parse null",w;case"t":return T+3<s?(w=be.trueValue,m[0]=T+4):this._error="parse true",w;case"f":return T+4<s?(w=be.falseValue,m[0]=T+5):this._error="illegal ',' position",w;case",":return this._error="illegal ',' position",null;case"]":return m[0]=T,null;case`
`:this._lineCount++}return this._error="illegal end of value",null}parseString(i,s,o,m){if(this._error)return null;let w=o,T,I;const N=new Ve("");let D=o;for(;w<s;w++)switch(T=i[w],T){case'"':return m[0]=w+1,N.append(i.slice(D),w-D),N.s;case"//":if(w++,w-1>D&&N.append(i.slice(D),w-D),D=w+1,w<s)switch(I=i[w],I){case"\\":N.expansion(1,"\\");break;case'"':N.expansion(1,'"');break;case"/":N.expansion(1,"/");break;case"b":N.expansion(1,"\b");break;case"f":N.expansion(1,"\f");break;case"n":N.expansion(1,`
`);break;case"r":N.expansion(1,"\r");break;case"t":N.expansion(1,"	");break;case"u":this._error="parse string/unicord escape not supported";break}else this._error="parse string/escape error"}return this._error="parse string/illegal end",null}parseObject(i,s,o,m){if(this._error)return null;const w=new Ti;let T="",I=o,N="";const D=Array(1);let V=!1;for(;I<s;I++){e:for(;I<s;I++)switch(N=i[I],N){case'"':if(T=this.parseString(i,s,I+1,D),this._error)return null;I=D[0],V=!0;break e;case"}":return m[0]=I+1,w;case":":this._error="illegal ':' position";break;case`
`:this._lineCount++}if(!V)return this._error="key not found",null;V=!1;e:for(;I<s;I++)switch(N=i[I],N){case":":V=!0,I++;break e;case"}":this._error="illegal '}' position";break;case`
`:this._lineCount++}if(!V)return this._error="':' not found",null;const A=this.parseValue(i,s,I,D);if(this._error)return null;I=D[0],w.put(T,A);e:for(;I<s;I++)switch(N=i[I],N){case",":break e;case"}":return m[0]=I+1,w;case`
`:this._lineCount++}}return this._error="illegal end of perseObject",null}parseArray(i,s,o,m){if(this._error)return null;let w=new nr,T=o,I;const N=new Array(1);for(;T<s;T++){const D=this.parseValue(i,s,T,N);if(this._error)return null;T=N[0],D&&w.add(D);e:for(;T<s;T++)switch(I=i[T],I){case",":break e;case"]":return m[0]=T+1,w;case`
`:++this._lineCount}}return w=void 0,this._error="illegal end of parseObject",null}_parseCallback=z0.parseJsonObject;_error;_lineCount;_root}class R0 extends xe{constructor(i){super(),this._value=i}isFloat(){return!0}getString(i,s){const o="\0";return this._value=parseFloat(o),this._stringBuffer=o,this._stringBuffer}toInt(i=0){return parseInt(this._value.toString())}toFloat(i=0){return this._value}equals(i){return typeof i=="number"?Math.round(i)?!1:i==this._value:!1}_value}class be extends xe{isBool(){return!0}toBoolean(i=!1){return this._boolValue}getString(i,s){return this._stringBuffer=this._boolValue?"true":"false",this._stringBuffer}equals(i){return typeof i=="boolean"?i==this._boolValue:!1}isStatic(){return!0}constructor(i){super(),this._boolValue=i}static trueValue;static falseValue;_boolValue}class Vi extends xe{constructor(i){super(),typeof i=="string"&&(this._stringBuffer=i),i instanceof Ve&&(this._stringBuffer=i.s)}isString(){return!0}getString(i,s){return this._stringBuffer}equals(i){return typeof i=="string"?this._stringBuffer==i:i instanceof Ve?this._stringBuffer==i.s:!1}}class r0 extends Vi{isStatic(){return this._isStatic}setErrorNotForClientCall(i){return this._stringBuffer=i,this}constructor(i,s){typeof i=="string"?super(i):super(i),this._isStatic=s}isError(){return!0}_isStatic}class Ri extends xe{isNull(){return!0}getString(i,s){return this._stringBuffer}isStatic(){return!0}setErrorNotForClientCall(i){return this._stringBuffer=i,r0.nullValue}constructor(){super(),this._stringBuffer="NullValue"}}class nr extends xe{constructor(){super(),this._array=new wt}release(){for(let i=this._array.begin();i.notEqual(this._array.end());i.preIncrement()){let s=i.ptr();s&&!s.isStatic()&&(s=void 0,s=null)}}isArray(){return!0}getValueByIndex(i){if(i<0||this._array.getSize()<=i)return xe.errorValue.setErrorNotForClientCall(lo);const s=this._array.at(i);return s??xe.nullValue}getValueByString(i){return xe.errorValue.setErrorNotForClientCall(V0)}getString(i,s){const o=s+`[
`;for(let m=this._array.begin();m.notEqual(this._array.end());m.increment()){const w=m.ptr();this._stringBuffer+=s+""+w.getString(s+" ")+`
`}return this._stringBuffer=o+s+`]
`,this._stringBuffer}add(i){this._array.pushBack(i)}getVector(i=null){return this._array}getSize(){return this._array.getSize()}_array}class Ti extends xe{constructor(){super(),this._map=new Me}release(){const i=this._map.begin();for(;i.notEqual(this._map.end());){let s=i.ptr().second;s&&!s.isStatic()&&(s=void 0,s=null),i.preIncrement()}}isMap(){return!0}getValueByString(i){if(i instanceof Ve){const s=this._map.getValue(i.s);return s??xe.nullValue}for(let s=this._map.begin();s.notEqual(this._map.end());s.preIncrement())if(s.ptr().first==i)return s.ptr().second==null?xe.nullValue:s.ptr().second;return xe.nullValue}getValueByIndex(i){return xe.errorValue.setErrorNotForClientCall(V0)}getString(i,s){this._stringBuffer=s+`{
`;const o=this._map.begin();for(;o.notEqual(this._map.end());){const m=o.ptr().first,w=o.ptr().second;this._stringBuffer+=s+" "+m+" : "+w.getString(s+"   ")+` 
`,o.preIncrement()}return this._stringBuffer+=s+`}
`,this._stringBuffer}getMap(i){return this._map}put(i,s){this._map.setValue(i,s)}getKeys(){if(!this._keys){this._keys=new wt;const i=this._map.begin();for(;i.notEqual(this._map.end());){const s=i.ptr().first;this._keys.pushBack(s),i.preIncrement()}}return this._keys}getSize(){return this._keys.getSize()}_map;_keys}var Is;(c=>{c.CubismJson=pe,c.JsonArray=nr,c.JsonBoolean=be,c.JsonError=r0,c.JsonFloat=R0,c.JsonMap=Ti,c.JsonNullvalue=Ri,c.JsonString=Vi,c.Value=xe})(Is||(Is={}));function uo(c,i){let s=0;for(let m=1;;m++){const w=c.slice(m-1,m);if(w=="e"||w=="-"||w=="E")continue;const T=c.substring(0,m),I=Number(T);if(isNaN(I))break;s=m}let o=parseFloat(c);return isNaN(o)&&(o=NaN),i[0]=c.slice(s),o}let Ee=!1,Fi=!1,bi=null,s0=null;const si=Object.freeze({vertexOffset:0,vertexStep:2});function ho(c){c&&(c=void 0)}class Wt{static startUp(i=null){if(Ee)return $e("CubismFramework.startUp() is already done."),Ee;if(bi=i,bi!=null&&ne.Logging.csmSetLogFunction(bi.logFunction),Ee=!0,Ee){const s=ne.Version.csmGetVersion(),o=(s&4278190080)>>24,m=(s&16711680)>>16,w=s&65535,T=s;$e("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+o).slice(-2),("00"+m).slice(-2),("0000"+w).slice(-4),T)}return $e("CubismFramework.startUp() is complete."),Ee}static cleanUp(){Ee=!1,Fi=!1,bi=null,s0=null}static initialize(i=0){if(ze(Ee),!Ee){ri("CubismFramework is not started.");return}if(Fi){ri("CubismFramework.initialize() skipped, already initialized.");return}xe.staticInitializeNotForClientCall(),s0=new Ss,ne.Memory.initializeAmountOfMemory(i),Fi=!0,$e("CubismFramework.initialize() is complete.")}static dispose(){if(ze(Ee),!Ee){ri("CubismFramework is not started.");return}if(!Fi){ri("CubismFramework.dispose() skipped, not initialized.");return}xe.staticReleaseNotForClientCall(),s0.release(),s0=null,v0.staticRelease(),Fi=!1,$e("CubismFramework.dispose() is complete.")}static isStarted(){return Ee}static isInitialized(){return Fi}static coreLogFunction(i){ne.Logging.csmGetLogFunction()&&ne.Logging.csmGetLogFunction()(i)}static getLoggingLevel(){return bi!=null?bi.loggingLevel:5}static getIdManager(){return s0}constructor(){}}class co{logFunction;loggingLevel}var Ei=(c=>(c[c.LogLevel_Verbose=0]="LogLevel_Verbose",c[c.LogLevel_Debug=1]="LogLevel_Debug",c[c.LogLevel_Info=2]="LogLevel_Info",c[c.LogLevel_Warning=3]="LogLevel_Warning",c[c.LogLevel_Error=4]="LogLevel_Error",c[c.LogLevel_Off=5]="LogLevel_Off",c))(Ei||{}),Vs;(c=>{c.Constant=si,c.csmDelete=ho,c.CubismFramework=Wt})(Vs||(Vs={}));function Rs(c,i){for(var s=0,o=c.length-1;o>=0;o--){var m=c[o];m==="."?c.splice(o,1):m===".."?(c.splice(o,1),s++):s&&(c.splice(o,1),s--)}if(i)for(;s--;s)c.unshift("..");return c}var fo=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,or=function(c){return fo.exec(c).slice(1)};function lr(){for(var c="",i=!1,s=arguments.length-1;s>=-1&&!i;s--){var o=s>=0?arguments[s]:"/";if(typeof o!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!o)continue;c=o+"/"+c,i=o.charAt(0)==="/"}return c=Rs(ur(c.split("/"),function(m){return!!m}),!i).join("/"),(i?"/":"")+c||"."}function Ts(c){var i=Fs(c),s=So(c,-1)==="/";return c=Rs(ur(c.split("/"),function(o){return!!o}),!i).join("/"),!c&&!i&&(c="."),c&&s&&(c+="/"),(i?"/":"")+c}function Fs(c){return c.charAt(0)==="/"}function go(){var c=Array.prototype.slice.call(arguments,0);return Ts(ur(c,function(i,s){if(typeof i!="string")throw new TypeError("Arguments to path.join must be strings");return i}).join("/"))}function _o(c,i){c=lr(c).substr(1),i=lr(i).substr(1);function s(D){for(var V=0;V<D.length&&D[V]==="";V++);for(var A=D.length-1;A>=0&&D[A]==="";A--);return V>A?[]:D.slice(V,A-V+1)}for(var o=s(c.split("/")),m=s(i.split("/")),w=Math.min(o.length,m.length),T=w,I=0;I<w;I++)if(o[I]!==m[I]){T=I;break}for(var N=[],I=T;I<o.length;I++)N.push("..");return N=N.concat(m.slice(T)),N.join("/")}var mo="/",po=":";function yo(c){var i=or(c),s=i[0],o=i[1];return!s&&!o?".":(o&&(o=o.substr(0,o.length-1)),s+o)}function Ao(c,i){var s=or(c)[2];return i&&s.substr(-1*i.length)===i&&(s=s.substr(0,s.length-i.length)),s}function xo(c){return or(c)[3]}var Ge={extname:xo,basename:Ao,dirname:yo,sep:mo,delimiter:po,relative:_o,join:go,isAbsolute:Fs,normalize:Ts,resolve:lr};function ur(c,i){if(c.filter)return c.filter(i);for(var s=[],o=0;o<c.length;o++)i(c[o],o,c)&&s.push(c[o]);return s}var So="ab".substr(-1)==="b"?function(c,i,s){return c.substr(i,s)}:function(c,i,s){return i<0&&(i=c.length+i),c.substr(i,s)};const St=Object.freeze({HitAreaPrefix:"HitArea",HitAreaHead:"Head",HitAreaBody:"Body",PartsIdCore:"Parts01Core",PartsArmPrefix:"Parts01Arm_",PartsArmLPrefix:"Parts01ArmL_",PartsArmRPrefix:"Parts01ArmR_",ParamAngleX:"ParamAngleX",ParamAngleY:"ParamAngleY",ParamAngleZ:"ParamAngleZ",ParamEyeLOpen:"ParamEyeLOpen",ParamEyeLSmile:"ParamEyeLSmile",ParamEyeROpen:"ParamEyeROpen",ParamEyeRSmile:"ParamEyeRSmile",ParamEyeBallX:"ParamEyeBallX",ParamEyeBallY:"ParamEyeBallY",ParamEyeBallForm:"ParamEyeBallForm",ParamBrowLY:"ParamBrowLY",ParamBrowRY:"ParamBrowRY",ParamBrowLX:"ParamBrowLX",ParamBrowRX:"ParamBrowRX",ParamBrowLAngle:"ParamBrowLAngle",ParamBrowRAngle:"ParamBrowRAngle",ParamBrowLForm:"ParamBrowLForm",ParamBrowRForm:"ParamBrowRForm",ParamMouthForm:"ParamMouthForm",ParamMouthOpenY:"ParamMouthOpenY",ParamCheek:"ParamCheek",ParamBodyAngleX:"ParamBodyAngleX",ParamBodyAngleY:"ParamBodyAngleY",ParamBodyAngleZ:"ParamBodyAngleZ",ParamBreath:"ParamBreath",ParamArmLA:"ParamArmLA",ParamArmRA:"ParamArmRA",ParamArmLB:"ParamArmLB",ParamArmRB:"ParamArmRB",ParamHandL:"ParamHandL",ParamHandR:"ParamHandR",ParamHairFront:"ParamHairFront",ParamHairSide:"ParamHairSide",ParamHairBack:"ParamHairBack",ParamHairFluffy:"ParamHairFluffy",ParamShoulderY:"ParamShoulderY",ParamBustX:"ParamBustX",ParamBustY:"ParamBustY",ParamBaseX:"ParamBaseX",ParamBaseY:"ParamBaseY",ParamNONE:"NONE:"});var bs;(c=>{c.HitAreaBody=St.HitAreaBody,c.HitAreaHead=St.HitAreaHead,c.HitAreaPrefix=St.HitAreaPrefix,c.ParamAngleX=St.ParamAngleX,c.ParamAngleY=St.ParamAngleY,c.ParamAngleZ=St.ParamAngleZ,c.ParamArmLA=St.ParamArmLA,c.ParamArmLB=St.ParamArmLB,c.ParamArmRA=St.ParamArmRA,c.ParamArmRB=St.ParamArmRB,c.ParamBaseX=St.ParamBaseX,c.ParamBaseY=St.ParamBaseY,c.ParamBodyAngleX=St.ParamBodyAngleX,c.ParamBodyAngleY=St.ParamBodyAngleY,c.ParamBodyAngleZ=St.ParamBodyAngleZ,c.ParamBreath=St.ParamBreath,c.ParamBrowLAngle=St.ParamBrowLAngle,c.ParamBrowLForm=St.ParamBrowLForm,c.ParamBrowLX=St.ParamBrowLX,c.ParamBrowLY=St.ParamBrowLY,c.ParamBrowRAngle=St.ParamBrowRAngle,c.ParamBrowRForm=St.ParamBrowRForm,c.ParamBrowRX=St.ParamBrowRX,c.ParamBrowRY=St.ParamBrowRY,c.ParamBustX=St.ParamBustX,c.ParamBustY=St.ParamBustY,c.ParamCheek=St.ParamCheek,c.ParamEyeBallForm=St.ParamEyeBallForm,c.ParamEyeBallX=St.ParamEyeBallX,c.ParamEyeBallY=St.ParamEyeBallY,c.ParamEyeLOpen=St.ParamEyeLOpen,c.ParamEyeLSmile=St.ParamEyeLSmile,c.ParamEyeROpen=St.ParamEyeROpen,c.ParamEyeRSmile=St.ParamEyeRSmile,c.ParamHairBack=St.ParamHairBack,c.ParamHairFluffy=St.ParamHairFluffy,c.ParamHairFront=St.ParamHairFront,c.ParamHairSide=St.ParamHairSide,c.ParamHandL=St.ParamHandL,c.ParamHandR=St.ParamHandR,c.ParamMouthForm=St.ParamMouthForm,c.ParamMouthOpenY=St.ParamMouthOpenY,c.ParamNONE=St.ParamNONE,c.ParamShoulderY=St.ParamShoulderY,c.PartsArmLPrefix=St.PartsArmLPrefix,c.PartsArmPrefix=St.PartsArmPrefix,c.PartsArmRPrefix=St.PartsArmRPrefix,c.PartsIdCore=St.PartsIdCore})(bs||(bs={}));class Es{}var Ds;(c=>{c.ICubismModelSetting=Es})(Ds||(Ds={}));const ai="FileReferences",Co="Groups",wo="Layout",Mo="HitAreas",ko="Moc",Bo="Textures",Po="Physics",vo="Pose",Io="Expressions",Vo="Motions",Ls="UserData",ni="Name",Os="File",Ro="Id",T0="Ids",Us="Sound",Ns="FadeInTime",zs="FadeOutTime",hr="LipSync",cr="EyeBlink";class Gs extends Es{constructor(i,s){super(),this._json=pe.create(i,s),this._json&&(this._jsonValue=new wt,this._jsonValue.pushBack(this._json.getRoot().getValueByString(Co)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(ai).getValueByString(ko)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(ai).getValueByString(Vo)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(ai).getValueByString(Io)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(ai).getValueByString(Bo)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(ai).getValueByString(Po)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(ai).getValueByString(vo)),this._jsonValue.pushBack(this._json.getRoot().getValueByString(Mo)))}release(){pe.delete(this._json),this._jsonValue=null}GetJson(){return this._json}getModelFileName(){return this.isExistModelFile()?this._jsonValue.at(1).getRawString():""}getTextureCount(){return this.isExistTextureFiles()?this._jsonValue.at(4).getSize():0}getTextureDirectory(){const s=this._jsonValue.at(4).getValueByIndex(0).getRawString().split("/"),o=s.length-1;let m="";for(let w=0;w<o;w++)m+=s[w],w<o-1&&(m+="/");return m}getTextureFileName(i){return this._jsonValue.at(4).getValueByIndex(i).getRawString()}getHitAreasCount(){return this.isExistHitAreas()?this._jsonValue.at(7).getSize():0}getHitAreaId(i){return Wt.getIdManager().getId(this._jsonValue.at(7).getValueByIndex(i).getValueByString(Ro).getRawString())}getHitAreaName(i){return this._jsonValue.at(7).getValueByIndex(i).getValueByString(ni).getRawString()}getPhysicsFileName(){return this.isExistPhysicsFile()?this._jsonValue.at(5).getRawString():""}getPoseFileName(){return this.isExistPoseFile()?this._jsonValue.at(6).getRawString():""}getExpressionCount(){return this.isExistExpressionFile()?this._jsonValue.at(3).getSize():0}getExpressionName(i){return this._jsonValue.at(3).getValueByIndex(i).getValueByString(ni).getRawString()}getExpressionFileName(i){return this._jsonValue.at(3).getValueByIndex(i).getValueByString(Os).getRawString()}getMotionGroupCount(){return this.isExistMotionGroups()?this._jsonValue.at(2).getKeys().getSize():0}getMotionGroupName(i){return this.isExistMotionGroups()?this._jsonValue.at(2).getKeys().at(i):null}getMotionCount(i){return this.isExistMotionGroupName(i)?this._jsonValue.at(2).getValueByString(i).getSize():0}getMotionFileName(i,s){return this.isExistMotionGroupName(i)?this._jsonValue.at(2).getValueByString(i).getValueByIndex(s).getValueByString(Os).getRawString():""}getMotionSoundFileName(i,s){return this.isExistMotionSoundFile(i,s)?this._jsonValue.at(2).getValueByString(i).getValueByIndex(s).getValueByString(Us).getRawString():""}getMotionFadeInTimeValue(i,s){return this.isExistMotionFadeIn(i,s)?this._jsonValue.at(2).getValueByString(i).getValueByIndex(s).getValueByString(Ns).toFloat():-1}getMotionFadeOutTimeValue(i,s){return this.isExistMotionFadeOut(i,s)?this._jsonValue.at(2).getValueByString(i).getValueByIndex(s).getValueByString(zs).toFloat():-1}getUserDataFile(){return this.isExistUserDataFile()?this._json.getRoot().getValueByString(ai).getValueByString(Ls).getRawString():""}getLayoutMap(i){const s=this._json.getRoot().getValueByString(wo).getMap();if(s==null)return!1;let o=!1;for(const m=s.begin();m.notEqual(s.end());m.preIncrement())i.setValue(m.ptr().first,m.ptr().second.toFloat()),o=!0;return o}getEyeBlinkParameterCount(){if(!this.isExistEyeBlinkParameters())return 0;let i=0;for(let s=0;s<this._jsonValue.at(0).getSize();s++){const o=this._jsonValue.at(0).getValueByIndex(s);if(!(o.isNull()||o.isError())&&o.getValueByString(ni).getRawString()==cr){i=o.getValueByString(T0).getVector().getSize();break}}return i}getEyeBlinkParameterId(i){if(!this.isExistEyeBlinkParameters())return null;for(let s=0;s<this._jsonValue.at(0).getSize();s++){const o=this._jsonValue.at(0).getValueByIndex(s);if(!(o.isNull()||o.isError())&&o.getValueByString(ni).getRawString()==cr)return Wt.getIdManager().getId(o.getValueByString(T0).getValueByIndex(i).getRawString())}return null}getLipSyncParameterCount(){if(!this.isExistLipSyncParameters())return 0;let i=0;for(let s=0;s<this._jsonValue.at(0).getSize();s++){const o=this._jsonValue.at(0).getValueByIndex(s);if(!(o.isNull()||o.isError())&&o.getValueByString(ni).getRawString()==hr){i=o.getValueByString(T0).getVector().getSize();break}}return i}getLipSyncParameterId(i){if(!this.isExistLipSyncParameters())return null;for(let s=0;s<this._jsonValue.at(0).getSize();s++){const o=this._jsonValue.at(0).getValueByIndex(s);if(!(o.isNull()||o.isError())&&o.getValueByString(ni).getRawString()==hr)return Wt.getIdManager().getId(o.getValueByString(T0).getValueByIndex(i).getRawString())}return null}isExistModelFile(){const i=this._jsonValue.at(1);return!i.isNull()&&!i.isError()}isExistTextureFiles(){const i=this._jsonValue.at(4);return!i.isNull()&&!i.isError()}isExistHitAreas(){const i=this._jsonValue.at(7);return!i.isNull()&&!i.isError()}isExistPhysicsFile(){const i=this._jsonValue.at(5);return!i.isNull()&&!i.isError()}isExistPoseFile(){const i=this._jsonValue.at(6);return!i.isNull()&&!i.isError()}isExistExpressionFile(){const i=this._jsonValue.at(3);return!i.isNull()&&!i.isError()}isExistMotionGroups(){const i=this._jsonValue.at(2);return!i.isNull()&&!i.isError()}isExistMotionGroupName(i){const s=this._jsonValue.at(2).getValueByString(i);return!s.isNull()&&!s.isError()}isExistMotionSoundFile(i,s){const o=this._jsonValue.at(2).getValueByString(i).getValueByIndex(s).getValueByString(Us);return!o.isNull()&&!o.isError()}isExistMotionFadeIn(i,s){const o=this._jsonValue.at(2).getValueByString(i).getValueByIndex(s).getValueByString(Ns);return!o.isNull()&&!o.isError()}isExistMotionFadeOut(i,s){const o=this._jsonValue.at(2).getValueByString(i).getValueByIndex(s).getValueByString(zs);return!o.isNull()&&!o.isError()}isExistUserDataFile(){const i=this._json.getRoot().getValueByString(ai).getValueByString(Ls);return!i.isNull()&&!i.isError()}isExistEyeBlinkParameters(){if(this._jsonValue.at(0).isNull()||this._jsonValue.at(0).isError())return!1;for(let i=0;i<this._jsonValue.at(0).getSize();++i)if(this._jsonValue.at(0).getValueByIndex(i).getValueByString(ni).getRawString()==cr)return!0;return!1}isExistLipSyncParameters(){if(this._jsonValue.at(0).isNull()||this._jsonValue.at(0).isError())return!1;for(let i=0;i<this._jsonValue.at(0).getSize();++i)if(this._jsonValue.at(0).getValueByIndex(i).getValueByString(ni).getRawString()==hr)return!0;return!1}_json;_jsonValue}var Xs;(c=>{c.CubismModelSettingJson=Gs})(Xs||(Xs={}));class l0{static create(){return new l0}static delete(i){}setParameters(i){this._breathParameters=i}getParameters(){return this._breathParameters}updateParameters(i,s){this._currentTime+=s;const o=this._currentTime*2*3.14159;for(let m=0;m<this._breathParameters.getSize();++m){const w=this._breathParameters.at(m);i.addParameterValueById(w.parameterId,w.offset+w.peak*Math.sin(o/w.cycle),w.weight)}}constructor(){this._currentTime=0}_breathParameters;_currentTime}class Di{constructor(i,s,o,m,w){this.parameterId=i??null,this.offset=s??0,this.peak=o??0,this.cycle=m??0,this.weight=w??0}parameterId;offset;peak;cycle;weight}var Ys;(c=>{c.BreathParameterData=Di,c.CubismBreath=l0})(Ys||(Ys={}));class zi{static create(i=null){return new zi(i)}static delete(i){}setBlinkingInterval(i){this._blinkingIntervalSeconds=i}setBlinkingSetting(i,s,o){this._closingSeconds=i,this._closedSeconds=s,this._openingSeconds=o}setParameterIds(i){this._parameterIds=i}getParameterIds(){return this._parameterIds}updateParameters(i,s){this._userTimeSeconds+=s;let o,m=0;switch(this._blinkingState){case 2:m=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,m>=1&&(m=1,this._blinkingState=3,this._stateStartTimeSeconds=this._userTimeSeconds),o=1-m;break;case 3:m=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,m>=1&&(this._blinkingState=4,this._stateStartTimeSeconds=this._userTimeSeconds),o=0;break;case 4:m=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,m>=1&&(m=1,this._blinkingState=1,this._nextBlinkingTime=this.determinNextBlinkingTiming()),o=m;break;case 1:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=2,this._stateStartTimeSeconds=this._userTimeSeconds),o=1;break;case 0:default:this._blinkingState=1,this._nextBlinkingTime=this.determinNextBlinkingTiming(),o=1;break}zi.CloseIfZero||(o=-o);for(let w=0;w<this._parameterIds.getSize();++w)i.setParameterValueById(this._parameterIds.at(w),o)}constructor(i){if(this._blinkingState=0,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=new wt,i!=null)for(let s=0;s<i.getEyeBlinkParameterCount();++s)this._parameterIds.pushBack(i.getEyeBlinkParameterId(s))}determinNextBlinkingTiming(){const i=Math.random();return this._userTimeSeconds+i*(2*this._blinkingIntervalSeconds-1)}_blinkingState;_parameterIds;_nextBlinkingTime;_stateStartTimeSeconds;_blinkingIntervalSeconds;_closingSeconds;_closedSeconds;_openingSeconds;_userTimeSeconds;static CloseIfZero=!0}var js=(c=>(c[c.EyeState_First=0]="EyeState_First",c[c.EyeState_Interval=1]="EyeState_Interval",c[c.EyeState_Closing=2]="EyeState_Closing",c[c.EyeState_Closed=3]="EyeState_Closed",c[c.EyeState_Opening=4]="EyeState_Opening",c))(js||{}),Hs;(c=>{c.CubismEyeBlink=zi,c.EyeState=js})(Hs||(Hs={}));const To=.001,fr=.5,Ws="FadeInTime",Zs="Link",Fo="Groups",bo="Id";class u0{static create(i,s){const o=new u0,m=pe.create(i,s),w=m.getRoot();w.getValueByString(Ws).isNull()||(o._fadeTimeSeconds=w.getValueByString(Ws).toFloat(fr),o._fadeTimeSeconds<=0&&(o._fadeTimeSeconds=fr));const T=w.getValueByString(Fo),I=T.getSize();for(let N=0;N<I;++N){const D=T.getValueByIndex(N),V=D.getSize();let A=0;for(let G=0;G<V;++G){const W=D.getValueByIndex(G),q=new h0,et=Wt.getIdManager().getId(W.getValueByString(bo).getRawString());if(q.partId=et,!W.getValueByString(Zs).isNull()){const K=W.getValueByString(Zs),gt=K.getSize();for(let mt=0;mt<gt;++mt){const dt=new h0,ct=Wt.getIdManager().getId(K.getValueByIndex(mt).getString());dt.partId=ct,q.link.pushBack(dt)}}o._partGroups.pushBack(q.clone()),++A}o._partGroupCounts.pushBack(A)}return pe.delete(m),o}static delete(i){}updateParameters(i,s){i!=this._lastModel&&this.reset(i),this._lastModel=i,s<0&&(s=0);let o=0;for(let m=0;m<this._partGroupCounts.getSize();m++){const w=this._partGroupCounts.at(m);this.doFade(i,s,o,w),o+=w}this.copyPartOpacities(i)}reset(i){let s=0;for(let o=0;o<this._partGroupCounts.getSize();++o){const m=this._partGroupCounts.at(o);for(let w=s;w<s+m;++w){this._partGroups.at(w).initialize(i);const T=this._partGroups.at(w).partIndex,I=this._partGroups.at(w).parameterIndex;if(!(T<0)){i.setPartOpacityByIndex(T,w==s?1:0),i.setParameterValueByIndex(I,w==s?1:0);for(let N=0;N<this._partGroups.at(w).link.getSize();++N)this._partGroups.at(w).link.at(N).initialize(i)}}s+=m}}copyPartOpacities(i){for(let s=0;s<this._partGroups.getSize();++s){const o=this._partGroups.at(s);if(o.link.getSize()==0)continue;const m=this._partGroups.at(s).partIndex,w=i.getPartOpacityByIndex(m);for(let T=0;T<o.link.getSize();++T){const N=o.link.at(T).partIndex;N<0||i.setPartOpacityByIndex(N,w)}}}doFade(i,s,o,m){let w=-1,T=1;const I=.5,N=.15;for(let D=o;D<o+m;++D){const V=this._partGroups.at(D).partIndex,A=this._partGroups.at(D).parameterIndex;if(i.getParameterValueByIndex(A)>To){if(w>=0)break;w=D,T=i.getPartOpacityByIndex(V),T+=s/this._fadeTimeSeconds,T>1&&(T=1)}}w<0&&(w=0,T=1);for(let D=o;D<o+m;++D){const V=this._partGroups.at(D).partIndex;if(w==D)i.setPartOpacityByIndex(V,T);else{let A=i.getPartOpacityByIndex(V),G;T<I?G=T*(I-1)/I+1:G=(1-T)*I/(1-I),(1-G)*(1-T)>N&&(G=1-N/(1-T)),A>G&&(A=G),i.setPartOpacityByIndex(V,A)}}}constructor(){this._fadeTimeSeconds=fr,this._lastModel=null,this._partGroups=new wt,this._partGroupCounts=new wt}_partGroups;_partGroupCounts;_fadeTimeSeconds;_lastModel}class h0{constructor(i){if(this.parameterIndex=0,this.partIndex=0,this.link=new wt,i!=null){this.partId=i.partId;for(const s=i.link.begin();s.notEqual(i.link.end());s.preIncrement())this.link.pushBack(s.ptr().clone())}}assignment(i){this.partId=i.partId;for(const s=i.link.begin();s.notEqual(i.link.end());s.preIncrement())this.link.pushBack(s.ptr().clone());return this}initialize(i){this.parameterIndex=i.getParameterIndex(this.partId),this.partIndex=i.getPartIndex(this.partId),i.setParameterValueByIndex(this.parameterIndex,1)}clone(){const i=new h0;i.partId=this.partId,i.parameterIndex=this.parameterIndex,i.partIndex=this.partIndex,i.link=new wt;for(let s=this.link.begin();s.notEqual(this.link.end());s.increment())i.link.pushBack(s.ptr().clone());return i}partId;parameterIndex;partIndex;link}var Js;(c=>{c.CubismPose=u0,c.PartData=h0})(Js||(Js={}));class qs extends oe{constructor(i,s){super(),this._width=i!==void 0?i:0,this._height=s!==void 0?s:0,this.setHeight(2)}setWidth(i){const s=i/this._width,o=s;this.scale(s,o)}setHeight(i){const s=i/this._height,o=s;this.scale(s,o)}setPosition(i,s){this.translate(i,s)}setCenterPosition(i,s){this.centerX(i),this.centerY(s)}top(i){this.setY(i)}bottom(i){const s=this._height*this.getScaleY();this.translateY(i-s)}left(i){this.setX(i)}right(i){const s=this._width*this.getScaleX();this.translateX(i-s)}centerX(i){const s=this._width*this.getScaleX();this.translateX(i-s/2)}setX(i){this.translateX(i)}centerY(i){const s=this._height*this.getScaleY();this.translateY(i-s/2)}setY(i){this.translateY(i)}setupFromLayout(i){const s="width",o="height",m="x",w="y",T="center_x",I="center_y",N="top",D="bottom",V="left",A="right";for(const G=i.begin();G.notEqual(i.end());G.preIncrement()){const W=G.ptr().first,q=G.ptr().second;W==s?this.setWidth(q):W==o&&this.setHeight(q)}for(const G=i.begin();G.notEqual(i.end());G.preIncrement()){const W=G.ptr().first,q=G.ptr().second;W==m?this.setX(q):W==w?this.setY(q):W==T?this.centerX(q):W==I?this.centerY(q):W==N?this.top(q):W==D?this.bottom(q):W==V?this.left(q):W==A&&this.right(q)}}_width;_height}var $s;(c=>{c.CubismModelMatrix=qs})($s||($s={}));class Ct{constructor(i,s){this.x=i,this.y=s,this.x=i??0,this.y=s??0}add(i){const s=new Ct(0,0);return s.x=this.x+i.x,s.y=this.y+i.y,s}substract(i){const s=new Ct(0,0);return s.x=this.x-i.x,s.y=this.y-i.y,s}multiply(i){const s=new Ct(0,0);return s.x=this.x*i.x,s.y=this.y*i.y,s}multiplyByScaler(i){return this.multiply(new Ct(i,i))}division(i){const s=new Ct(0,0);return s.x=this.x/i.x,s.y=this.y/i.y,s}divisionByScalar(i){return this.division(new Ct(i,i))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(i){return Math.sqrt((this.x-i.x)*(this.x-i.x)+(this.y-i.y)*(this.y-i.y))}dot(i){return this.x*i.x+this.y*i.y}normalize(){const i=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/i,this.y=this.y/i}isEqual(i){return this.x==i.x&&this.y==i.y}isNotEqual(i){return!this.isEqual(i)}}var Ks;(c=>{c.CubismVector2=Ct})(Ks||(Ks={}));class It{static Epsilon=1e-5;static range(i,s,o){return i<s?i=s:i>o&&(i=o),i}static sin(i){return Math.sin(i)}static cos(i){return Math.cos(i)}static abs(i){return Math.abs(i)}static sqrt(i){return Math.sqrt(i)}static cbrt(i){if(i===0)return i;let s=i;const o=s<0;o&&(s=-s);let m;return s===1/0?m=1/0:(m=Math.exp(Math.log(s)/3),m=(s/(m*m)+2*m)/3),o?-m:m}static getEasingSine(i){return i<0?0:i>1?1:.5-.5*this.cos(i*Math.PI)}static max(i,s){return i>s?i:s}static min(i,s){return i>s?s:i}static degreesToRadian(i){return i/180*Math.PI}static radianToDegrees(i){return i*180/Math.PI}static directionToRadian(i,s){const o=Math.atan2(s.y,s.x),m=Math.atan2(i.y,i.x);let w=o-m;for(;w<-Math.PI;)w+=Math.PI*2;for(;w>Math.PI;)w-=Math.PI*2;return w}static directionToDegrees(i,s){const o=this.directionToRadian(i,s);let m=this.radianToDegrees(o);return s.x-i.x>0&&(m=-m),m}static radianToDirection(i){const s=new Ct;return s.x=this.sin(i),s.y=this.cos(i),s}static quadraticEquation(i,s,o){return this.abs(i)<It.Epsilon?this.abs(s)<It.Epsilon?-o:-o/s:-(s+this.sqrt(s*s-4*i*o))/(2*i)}static cardanoAlgorithmForBezier(i,s,o,m){if(this.sqrt(i)<It.Epsilon)return this.range(this.quadraticEquation(s,o,m),0,1);const w=s/i,T=o/i,I=m/i,N=(3*T-w*w)/3,D=N/3,V=(2*w*w*w-9*w*T+27*I)/27,A=V/2,G=A*A+D*D*D,W=.5,q=W+.01;if(G<0){const dt=-N/3,ct=dt*dt*dt,Et=this.sqrt(ct),Nt=-V/(2*Et),de=this.range(Nt,-1,1),Ce=Math.acos(de),Ye=2*this.cbrt(Et),Gi=Ye*this.cos(Ce/3)-w/3;if(this.abs(Gi-W)<q)return this.range(Gi,0,1);const ci=Ye*this.cos((Ce+2*Math.PI)/3)-w/3;if(this.abs(ci-W)<q)return this.range(ci,0,1);const wi=Ye*this.cos((Ce+4*Math.PI)/3)-w/3;return this.range(wi,0,1)}if(G==0){let dt;A<0?dt=this.cbrt(-A):dt=-this.cbrt(A);const ct=2*dt-w/3;if(this.abs(ct-W)<q)return this.range(ct,0,1);const Et=-dt-w/3;return this.range(Et,0,1)}const et=this.sqrt(G),K=this.cbrt(et-A),gt=this.cbrt(et+A),mt=K-gt-w/3;return this.range(mt,0,1)}constructor(){}}var Qs;(c=>{c.CubismMath=It})(Qs||(Qs={}));const gr=30,ta=.01;class ea{constructor(){this._faceTargetX=0,this._faceTargetY=0,this._faceX=0,this._faceY=0,this._faceVX=0,this._faceVY=0,this._lastTimeSeconds=0,this._userTimeSeconds=0}update(i){this._userTimeSeconds+=i;const o=40/10*1/gr;if(this._lastTimeSeconds==0){this._lastTimeSeconds=this._userTimeSeconds;return}const m=(this._userTimeSeconds-this._lastTimeSeconds)*gr;this._lastTimeSeconds=this._userTimeSeconds;const T=.15*gr,I=m*o/T,N=this._faceTargetX-this._faceX,D=this._faceTargetY-this._faceY;if(It.abs(N)<=ta&&It.abs(D)<=ta)return;const V=It.sqrt(N*N+D*D),A=o*N/V,G=o*D/V;let W=A-this._faceVX,q=G-this._faceVY;const et=It.sqrt(W*W+q*q);(et<-I||et>I)&&(W*=I/et,q*=I/et),this._faceVX+=W,this._faceVY+=q;{const K=.5*(It.sqrt(I*I+16*I*V-8*I*V)-I),gt=It.sqrt(this._faceVX*this._faceVX+this._faceVY*this._faceVY);gt>K&&(this._faceVX*=K/gt,this._faceVY*=K/gt)}this._faceX+=this._faceVX,this._faceY+=this._faceVY}getX(){return this._faceX}getY(){return this._faceY}set(i,s){this._faceTargetX=i,this._faceTargetY=s}_faceTargetX;_faceTargetY;_faceX;_faceY;_faceVX;_faceVY;_lastTimeSeconds;_userTimeSeconds}var ia;(c=>{c.CubismTargetPoint=ea})(ia||(ia={}));class Li{static delete(i){i.release(),i=null}constructor(){this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=new wt}release(){this._weight=0}updateParameters(i,s,o){if(!s.isAvailable()||s.isFinished())return;if(!s.isStarted()){s.setIsStarted(!0),s.setStartTime(o-this._offsetSeconds),s.setFadeInStartTime(o);const I=this.getDuration();s.getEndTime()<0&&s.setEndTime(I<=0?-1:s.getStartTime()+I)}let m=this._weight;const w=this._fadeInSeconds==0?1:It.getEasingSine((o-s.getFadeInStartTime())/this._fadeInSeconds),T=this._fadeOutSeconds==0||s.getEndTime()<0?1:It.getEasingSine((s.getEndTime()-o)/this._fadeOutSeconds);m=m*w*T,s.setState(o,m),ze(0<=m&&m<=1),this.doUpdateParameters(i,o,m,s),s.getEndTime()>0&&s.getEndTime()<o&&s.setIsFinished(!0)}setFadeInTime(i){this._fadeInSeconds=i}setFadeOutTime(i){this._fadeOutSeconds=i}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(i){this._weight=i}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(i){this._offsetSeconds=i}getFiredEvent(i,s){return this._firedEventValues}setFinishedMotionHandler=i=>this._onFinishedMotion=i;getFinishedMotionHandler=()=>this._onFinishedMotion;_fadeInSeconds;_fadeOutSeconds;_weight;_offsetSeconds;_firedEventValues;_onFinishedMotion}var ra;(c=>{c.ACubismMotion=Li})(ra||(ra={}));const Eo="FadeInTime",Do="FadeOutTime",sa="Parameters",Lo="Id",Oo="Value",F0="Blend",Uo="Add",No="Multiply",zo="Overwrite",aa=1;class G0 extends Li{static create(i,s){const o=new G0,m=pe.create(i,s),w=m.getRoot();o.setFadeInTime(w.getValueByString(Eo).toFloat(aa)),o.setFadeOutTime(w.getValueByString(Do).toFloat(aa));const T=w.getValueByString(sa).getSize();o._parameters.prepareCapacity(T);for(let I=0;I<T;++I){const N=w.getValueByString(sa).getValueByIndex(I),D=Wt.getIdManager().getId(N.getValueByString(Lo).getRawString()),V=N.getValueByString(Oo).toFloat();let A;N.getValueByString(F0).isNull()||N.getValueByString(F0).getString()==Uo?A=0:N.getValueByString(F0).getString()==No?A=1:N.getValueByString(F0).getString()==zo?A=2:A=0;const G=new oa;G.parameterId=D,G.blendType=A,G.value=V,o._parameters.pushBack(G)}return pe.delete(m),o}doUpdateParameters(i,s,o,m){for(let w=0;w<this._parameters.getSize();++w){const T=this._parameters.at(w);switch(T.blendType){case 0:{i.addParameterValueById(T.parameterId,T.value,o);break}case 1:{i.multiplyParameterValueById(T.parameterId,T.value,o);break}case 2:{i.setParameterValueById(T.parameterId,T.value,o);break}}}}constructor(){super(),this._parameters=new wt}_parameters}var na=(c=>(c[c.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",c[c.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",c[c.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite",c))(na||{});class oa{parameterId;blendType;value}var la;(c=>{c.CubismExpressionMotion=G0,c.ExpressionBlendType=na,c.ExpressionParameter=oa})(la||(la={}));var oi=(c=>(c[c.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",c[c.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",c[c.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity",c))(oi||{}),De=(c=>(c[c.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",c[c.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",c[c.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",c[c.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped",c))(De||{});class _r{time=0;value=0}class ua{constructor(){this.evaluate=null,this.basePointIndex=0,this.segmentType=0}evaluate;basePointIndex;segmentType}class ha{constructor(){this.type=0,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}type;id;segmentCount;baseSegmentIndex;fadeInTime;fadeOutTime}class ca{fireTime=0;value}class fa{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=new wt,this.segments=new wt,this.points=new wt,this.events=new wt}duration;loop;curveCount;eventCount;fps;curves;segments;points;events}var ga;(c=>{c.CubismMotionCurve=ha,c.CubismMotionCurveTarget=oi,c.CubismMotionData=fa,c.CubismMotionEvent=ca,c.CubismMotionPoint=_r,c.CubismMotionSegment=ua,c.CubismMotionSegmentType=De})(ga||(ga={}));const Pe="Meta",Go="Duration",Xo="Loop",Yo="AreBeziersRestricted",jo="CurveCount",Ho="Fps",Wo="TotalSegmentCount",Zo="TotalPointCount",li="Curves",Jo="Target",qo="Id",b0="FadeInTime",E0="FadeOutTime",_a="Segments",da="UserData",$o="UserDataCount",Ko="TotalUserDataSize",Qo="Time",t2="Value";class ma{constructor(i,s){this._json=pe.create(i,s)}release(){pe.delete(this._json)}getMotionDuration(){return this._json.getRoot().getValueByString(Pe).getValueByString(Go).toFloat()}isMotionLoop(){return this._json.getRoot().getValueByString(Pe).getValueByString(Xo).toBoolean()}getEvaluationOptionFlag(i){return i==0?this._json.getRoot().getValueByString(Pe).getValueByString(Yo).toBoolean():!1}getMotionCurveCount(){return this._json.getRoot().getValueByString(Pe).getValueByString(jo).toInt()}getMotionFps(){return this._json.getRoot().getValueByString(Pe).getValueByString(Ho).toFloat()}getMotionTotalSegmentCount(){return this._json.getRoot().getValueByString(Pe).getValueByString(Wo).toInt()}getMotionTotalPointCount(){return this._json.getRoot().getValueByString(Pe).getValueByString(Zo).toInt()}isExistMotionFadeInTime(){return!this._json.getRoot().getValueByString(Pe).getValueByString(b0).isNull()}isExistMotionFadeOutTime(){return!this._json.getRoot().getValueByString(Pe).getValueByString(E0).isNull()}getMotionFadeInTime(){return this._json.getRoot().getValueByString(Pe).getValueByString(b0).toFloat()}getMotionFadeOutTime(){return this._json.getRoot().getValueByString(Pe).getValueByString(E0).toFloat()}getMotionCurveTarget(i){return this._json.getRoot().getValueByString(li).getValueByIndex(i).getValueByString(Jo).getRawString()}getMotionCurveId(i){return Wt.getIdManager().getId(this._json.getRoot().getValueByString(li).getValueByIndex(i).getValueByString(qo).getRawString())}isExistMotionCurveFadeInTime(i){return!this._json.getRoot().getValueByString(li).getValueByIndex(i).getValueByString(b0).isNull()}isExistMotionCurveFadeOutTime(i){return!this._json.getRoot().getValueByString(li).getValueByIndex(i).getValueByString(E0).isNull()}getMotionCurveFadeInTime(i){return this._json.getRoot().getValueByString(li).getValueByIndex(i).getValueByString(b0).toFloat()}getMotionCurveFadeOutTime(i){return this._json.getRoot().getValueByString(li).getValueByIndex(i).getValueByString(E0).toFloat()}getMotionCurveSegmentCount(i){return this._json.getRoot().getValueByString(li).getValueByIndex(i).getValueByString(_a).getVector().getSize()}getMotionCurveSegment(i,s){return this._json.getRoot().getValueByString(li).getValueByIndex(i).getValueByString(_a).getValueByIndex(s).toFloat()}getEventCount(){return this._json.getRoot().getValueByString(Pe).getValueByString($o).toInt()}getTotalEventValueSize(){return this._json.getRoot().getValueByString(Pe).getValueByString(Ko).toInt()}getEventTime(i){return this._json.getRoot().getValueByString(da).getValueByIndex(i).getValueByString(Qo).toFloat()}getEventValue(i){return new Ve(this._json.getRoot().getValueByString(da).getValueByIndex(i).getValueByString(t2).getRawString())}_json}var pa=(c=>(c[c.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted",c))(pa||{}),ya;(c=>{c.CubismMotionJson=ma})(ya||(ya={}));const e2="EyeBlink",i2="LipSync",r2="Model",s2="Parameter",a2="PartOpacity",n2=!1;function Re(c,i,s){const o=new _r;return o.time=c.time+(i.time-c.time)*s,o.value=c.value+(i.value-c.value)*s,o}function o2(c,i){let s=(i-c[0].time)/(c[1].time-c[0].time);return s<0&&(s=0),c[0].value+(c[1].value-c[0].value)*s}function l2(c,i){let s=(i-c[0].time)/(c[3].time-c[0].time);s<0&&(s=0);const o=Re(c[0],c[1],s),m=Re(c[1],c[2],s),w=Re(c[2],c[3],s),T=Re(o,m,s),I=Re(m,w,s);return Re(T,I,s).value}function u2(c,i){const s=i,o=c[0].time,m=c[3].time,w=c[1].time,T=c[2].time,I=m-3*T+3*w-o,N=3*T-6*w+3*o,D=3*w-3*o,V=o-s,A=It.cardanoAlgorithmForBezier(I,N,D,V),G=Re(c[0],c[1],A),W=Re(c[1],c[2],A),q=Re(c[2],c[3],A),et=Re(G,W,A),K=Re(W,q,A);return Re(et,K,A).value}function h2(c,i){return c[0].value}function c2(c,i){return c[1].value}function dr(c,i,s){const o=c.curves.at(i);let m=-1;const w=o.baseSegmentIndex+o.segmentCount;let T=0;for(let N=o.baseSegmentIndex;N<w;++N)if(T=c.segments.at(N).basePointIndex+(c.segments.at(N).segmentType==De.CubismMotionSegmentType_Bezier?3:1),c.points.at(T).time>s){m=N;break}if(m==-1)return c.points.at(T).value;const I=c.segments.at(m);return I.evaluate(c.points.get(I.basePointIndex),s)}class X0 extends Li{static create(i,s,o){const m=new X0;return m.parse(i,s),m._sourceFrameRate=m._motionData.fps,m._loopDurationSeconds=m._motionData.duration,m._onFinishedMotion=o,m}doUpdateParameters(i,s,o,m){this._modelCurveIdEyeBlink==null&&(this._modelCurveIdEyeBlink=Wt.getIdManager().getId(e2)),this._modelCurveIdLipSync==null&&(this._modelCurveIdLipSync=Wt.getIdManager().getId(i2));let w=s-m.getStartTime();w<0&&(w=0);let T=Number.MAX_VALUE,I=Number.MAX_VALUE;const N=64;let D=0,V=0;this._eyeBlinkParameterIds.getSize()>N&&i0("too many eye blink targets : {0}",this._eyeBlinkParameterIds.getSize()),this._lipSyncParameterIds.getSize()>N&&i0("too many lip sync targets : {0}",this._lipSyncParameterIds.getSize());const A=this._fadeInSeconds<=0?1:It.getEasingSine((s-m.getFadeInStartTime())/this._fadeInSeconds),G=this._fadeOutSeconds<=0||m.getEndTime()<0?1:It.getEasingSine((m.getEndTime()-s)/this._fadeOutSeconds);let W,q,et,K=w;if(this._isLoop)for(;K>this._motionData.duration;)K-=this._motionData.duration;const gt=this._motionData.curves;for(q=0;q<this._motionData.curveCount&&gt.at(q).type==oi.CubismMotionCurveTarget_Model;++q)W=dr(this._motionData,q,K),gt.at(q).id==this._modelCurveIdEyeBlink?I=W:gt.at(q).id==this._modelCurveIdLipSync&&(T=W);for(;q<this._motionData.curveCount&&gt.at(q).type==oi.CubismMotionCurveTarget_Parameter;++q){if(et=i.getParameterIndex(gt.at(q).id),et==-1)continue;const mt=i.getParameterValueByIndex(et);if(W=dr(this._motionData,q,K),I!=Number.MAX_VALUE){for(let ct=0;ct<this._eyeBlinkParameterIds.getSize()&&ct<N;++ct)if(this._eyeBlinkParameterIds.at(ct)==gt.at(q).id){W*=I,V|=1<<ct;break}}if(T!=Number.MAX_VALUE){for(let ct=0;ct<this._lipSyncParameterIds.getSize()&&ct<N;++ct)if(this._lipSyncParameterIds.at(ct)==gt.at(q).id){W+=T,D|=1<<ct;break}}let dt;if(gt.at(q).fadeInTime<0&&gt.at(q).fadeOutTime<0)dt=mt+(W-mt)*o;else{let ct,Et;gt.at(q).fadeInTime<0?ct=A:ct=gt.at(q).fadeInTime==0?1:It.getEasingSine((s-m.getFadeInStartTime())/gt.at(q).fadeInTime),gt.at(q).fadeOutTime<0?Et=G:Et=gt.at(q).fadeOutTime==0||m.getEndTime()<0?1:It.getEasingSine((m.getEndTime()-s)/gt.at(q).fadeOutTime);const Nt=this._weight*ct*Et;dt=mt+(W-mt)*Nt}i.setParameterValueByIndex(et,dt,1)}{if(I!=Number.MAX_VALUE)for(let mt=0;mt<this._eyeBlinkParameterIds.getSize()&&mt<N;++mt){const dt=i.getParameterValueById(this._eyeBlinkParameterIds.at(mt));if(V>>mt&1)continue;const ct=dt+(I-dt)*o;i.setParameterValueById(this._eyeBlinkParameterIds.at(mt),ct)}if(T!=Number.MAX_VALUE)for(let mt=0;mt<this._lipSyncParameterIds.getSize()&&mt<N;++mt){const dt=i.getParameterValueById(this._lipSyncParameterIds.at(mt));if(D>>mt&1)continue;const ct=dt+(T-dt)*o;i.setParameterValueById(this._lipSyncParameterIds.at(mt),ct)}}for(;q<this._motionData.curveCount&&gt.at(q).type==oi.CubismMotionCurveTarget_PartOpacity;++q)et=i.getParameterIndex(gt.at(q).id),et!=-1&&(W=dr(this._motionData,q,K),i.setParameterValueByIndex(et,W));w>=this._motionData.duration&&(this._isLoop?(m.setStartTime(s),this._isLoopFadeIn&&m.setFadeInStartTime(s)):(this._onFinishedMotion&&this._onFinishedMotion(this),m.setIsFinished(!0))),this._lastWeight=o}setIsLoop(i){this._isLoop=i}isLoop(){return this._isLoop}setIsLoopFadeIn(i){this._isLoopFadeIn=i}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(i,s){const o=this._motionData.curves;for(let m=0;m<this._motionData.curveCount;++m)if(i==o.at(m).id){o.at(m).fadeInTime=s;return}}setParameterFadeOutTime(i,s){const o=this._motionData.curves;for(let m=0;m<this._motionData.curveCount;++m)if(i==o.at(m).id){o.at(m).fadeOutTime=s;return}}getParameterFadeInTime(i){const s=this._motionData.curves;for(let o=0;o<this._motionData.curveCount;++o)if(i==s.at(o).id)return s.at(o).fadeInTime;return-1}getParameterFadeOutTime(i){const s=this._motionData.curves;for(let o=0;o<this._motionData.curveCount;++o)if(i==s.at(o).id)return s.at(o).fadeOutTime;return-1}setEffectIds(i,s){this._eyeBlinkParameterIds=i,this._lipSyncParameterIds=s}constructor(){super(),this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0,this._motionData=null,this._modelCurveIdEyeBlink=null,this._modelCurveIdLipSync=null,this._eyeBlinkParameterIds=null,this._lipSyncParameterIds=null}release(){this._motionData=void 0,this._motionData=null}parse(i,s){this._motionData=new fa;let o=new ma(i,s);this._motionData.duration=o.getMotionDuration(),this._motionData.loop=o.isMotionLoop(),this._motionData.curveCount=o.getMotionCurveCount(),this._motionData.fps=o.getMotionFps(),this._motionData.eventCount=o.getEventCount();const m=o.getEvaluationOptionFlag(pa.EvaluationOptionFlag_AreBeziersRistricted);o.isExistMotionFadeInTime()?this._fadeInSeconds=o.getMotionFadeInTime()<0?1:o.getMotionFadeInTime():this._fadeInSeconds=1,o.isExistMotionFadeOutTime()?this._fadeOutSeconds=o.getMotionFadeOutTime()<0?1:o.getMotionFadeOutTime():this._fadeOutSeconds=1,this._motionData.curves.updateSize(this._motionData.curveCount,ha,!0),this._motionData.segments.updateSize(o.getMotionTotalSegmentCount(),ua,!0),this._motionData.points.updateSize(o.getMotionTotalPointCount(),_r,!0),this._motionData.events.updateSize(this._motionData.eventCount,ca,!0);let w=0,T=0;for(let I=0;I<this._motionData.curveCount;++I){o.getMotionCurveTarget(I)==r2?this._motionData.curves.at(I).type=oi.CubismMotionCurveTarget_Model:o.getMotionCurveTarget(I)==s2?this._motionData.curves.at(I).type=oi.CubismMotionCurveTarget_Parameter:o.getMotionCurveTarget(I)==a2?this._motionData.curves.at(I).type=oi.CubismMotionCurveTarget_PartOpacity:ri('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!'),this._motionData.curves.at(I).id=o.getMotionCurveId(I),this._motionData.curves.at(I).baseSegmentIndex=T,this._motionData.curves.at(I).fadeInTime=o.isExistMotionCurveFadeInTime(I)?o.getMotionCurveFadeInTime(I):-1,this._motionData.curves.at(I).fadeOutTime=o.isExistMotionCurveFadeOutTime(I)?o.getMotionCurveFadeOutTime(I):-1;for(let N=0;N<o.getMotionCurveSegmentCount(I);){switch(N==0?(this._motionData.segments.at(T).basePointIndex=w,this._motionData.points.at(w).time=o.getMotionCurveSegment(I,N),this._motionData.points.at(w).value=o.getMotionCurveSegment(I,N+1),w+=1,N+=2):this._motionData.segments.at(T).basePointIndex=w-1,o.getMotionCurveSegment(I,N)){case De.CubismMotionSegmentType_Linear:{this._motionData.segments.at(T).segmentType=De.CubismMotionSegmentType_Linear,this._motionData.segments.at(T).evaluate=o2,this._motionData.points.at(w).time=o.getMotionCurveSegment(I,N+1),this._motionData.points.at(w).value=o.getMotionCurveSegment(I,N+2),w+=1,N+=3;break}case De.CubismMotionSegmentType_Bezier:{this._motionData.segments.at(T).segmentType=De.CubismMotionSegmentType_Bezier,m||n2?this._motionData.segments.at(T).evaluate=l2:this._motionData.segments.at(T).evaluate=u2,this._motionData.points.at(w).time=o.getMotionCurveSegment(I,N+1),this._motionData.points.at(w).value=o.getMotionCurveSegment(I,N+2),this._motionData.points.at(w+1).time=o.getMotionCurveSegment(I,N+3),this._motionData.points.at(w+1).value=o.getMotionCurveSegment(I,N+4),this._motionData.points.at(w+2).time=o.getMotionCurveSegment(I,N+5),this._motionData.points.at(w+2).value=o.getMotionCurveSegment(I,N+6),w+=3,N+=7;break}case De.CubismMotionSegmentType_Stepped:{this._motionData.segments.at(T).segmentType=De.CubismMotionSegmentType_Stepped,this._motionData.segments.at(T).evaluate=h2,this._motionData.points.at(w).time=o.getMotionCurveSegment(I,N+1),this._motionData.points.at(w).value=o.getMotionCurveSegment(I,N+2),w+=1,N+=3;break}case De.CubismMotionSegmentType_InverseStepped:{this._motionData.segments.at(T).segmentType=De.CubismMotionSegmentType_InverseStepped,this._motionData.segments.at(T).evaluate=c2,this._motionData.points.at(w).time=o.getMotionCurveSegment(I,N+1),this._motionData.points.at(w).value=o.getMotionCurveSegment(I,N+2),w+=1,N+=3;break}default:{ze(0);break}}++this._motionData.curves.at(I).segmentCount,++T}}for(let I=0;I<o.getEventCount();++I)this._motionData.events.at(I).fireTime=o.getEventTime(I),this._motionData.events.at(I).value=o.getEventValue(I);o.release(),o=void 0,o=null}getFiredEvent(i,s){this._firedEventValues.updateSize(0);for(let o=0;o<this._motionData.eventCount;++o)this._motionData.events.at(o).fireTime>i&&this._motionData.events.at(o).fireTime<=s&&this._firedEventValues.pushBack(new Ve(this._motionData.events.at(o).value.s));return this._firedEventValues}_sourceFrameRate;_loopDurationSeconds;_isLoop;_isLoopFadeIn;_lastWeight;_motionData;_eyeBlinkParameterIds;_lipSyncParameterIds;_modelCurveIdEyeBlink;_modelCurveIdLipSync}var Aa;(c=>{c.CubismMotion=X0})(Aa||(Aa={}));class xa{constructor(){this._autoDelete=!1,this._motion=null,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&Li.delete(this._motion)}setFadeOut(i){this._fadeOutSeconds=i,this._isTriggeredFadeOut=!0}startFadeOut(i,s){const o=s+i;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||o<this._endTimeSeconds)&&(this._endTimeSeconds=o)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(i){this._startTimeSeconds=i}setFadeInStartTime(i){this._fadeInStartTimeSeconds=i}setEndTime(i){this._endTimeSeconds=i}setIsFinished(i){this._finished=i}setIsStarted(i){this._started=i}isAvailable(){return this._available}setIsAvailable(i){this._available=i}setState(i,s){this._stateTimeSeconds=i,this._stateWeight=s}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(i){this._lastEventCheckSeconds=i}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}_autoDelete;_motion;_available;_finished;_started;_startTimeSeconds;_fadeInStartTimeSeconds;_endTimeSeconds;_stateTimeSeconds;_stateWeight;_lastEventCheckSeconds;_fadeOutSeconds;_isTriggeredFadeOut;_motionQueueEntryHandle}var Sa;(c=>{c.CubismMotionQueueEntry=xa})(Sa||(Sa={}));class Ca{constructor(){this._userTimeSeconds=0,this._eventCallBack=null,this._eventCustomData=null,this._motions=new wt}release(){for(let i=0;i<this._motions.getSize();++i)this._motions.at(i)&&(this._motions.at(i).release(),this._motions.set(i,null));this._motions=null}startMotion(i,s,o){if(i==null)return yi;let m=null;for(let w=0;w<this._motions.getSize();++w)m=this._motions.at(w),m?.setFadeOut(m._motion.getFadeOutTime());return m=new xa,m._autoDelete=s,m._motion=i,this._motions.pushBack(m),m._motionQueueEntryHandle}isFinished(){for(let i=this._motions.begin();i.notEqual(this._motions.end());){let s=i.ptr();if(s==null){i=this._motions.erase(i);continue}if(s._motion==null){s.release(),s=null,i=this._motions.erase(i);continue}if(s.isFinished())i.preIncrement();else return!1}return!0}isFinishedByHandle(i){for(let s=this._motions.begin();s.notEqual(this._motions.end());s.increment()){const o=s.ptr();if(o!=null&&o._motionQueueEntryHandle==i&&!o.isFinished())return!1}return!0}stopAllMotions(){for(let i=this._motions.begin();i.notEqual(this._motions.end());){let s=i.ptr();if(s==null){i=this._motions.erase(i);continue}s.release(),s=null,i=this._motions.erase(i)}}getCubismMotionQueueEntry(i){for(let s=this._motions.begin();s.notEqual(this._motions.end());s.preIncrement()){const o=s.ptr();if(o!=null&&o._motionQueueEntryHandle==i)return o}return null}setEventCallback(i,s=null){this._eventCallBack=i,this._eventCustomData=s}doUpdateMotion(i,s){let o=!1;for(let m=this._motions.begin();m.notEqual(this._motions.end());){let w=m.ptr();if(w==null){m=this._motions.erase(m);continue}const T=w._motion;if(T==null){w.release(),w=null,m=this._motions.erase(m);continue}T.updateParameters(i,w,s),o=!0;const I=T.getFiredEvent(w.getLastCheckEventSeconds()-w.getStartTime(),s-w.getStartTime());for(let N=0;N<I.getSize();++N)this._eventCallBack(this,I.at(N),this._eventCustomData);w.setLastCheckEventSeconds(s),w.isFinished()?(w.release(),w=null,m=this._motions.erase(m)):(w.isTriggeredFadeOut()&&w.startFadeOut(w.getFadeOutSeconds(),s),m.preIncrement())}return o}_userTimeSeconds;_motions;_eventCallBack;_eventCustomData}const yi=-1;var wa;(c=>{c.CubismMotionQueueManager=Ca,c.InvalidMotionQueueEntryHandleValue=yi})(wa||(wa={}));class a0 extends Ca{constructor(){super(),this._currentPriority=0,this._reservePriority=0}getCurrentPriority(){return this._currentPriority}getReservePriority(){return this._reservePriority}setReservePriority(i){this._reservePriority=i}startMotionPriority(i,s,o){return o==this._reservePriority&&(this._reservePriority=0),this._currentPriority=o,super.startMotion(i,s,this._userTimeSeconds)}updateMotion(i,s){this._userTimeSeconds+=s;const o=super.doUpdateMotion(i,this._userTimeSeconds);return this.isFinished()&&(this._currentPriority=0),o}reserveMotion(i){return i<=this._reservePriority||i<=this._currentPriority?!1:(this._reservePriority=i,!0)}_currentPriority;_reservePriority}var Ma;(c=>{c.CubismMotionManager=a0})(Ma||(Ma={}));var D0=(c=>(c[c.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter",c))(D0||{}),ui=(c=>(c[c.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",c[c.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",c[c.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle",c))(ui||{});class f2{constructor(){this.gravity=new Ct(0,0),this.wind=new Ct(0,0)}gravity;wind}class mr{id;targetType}class pr{minimum;maximum;defalut}class ka{constructor(){this.initialPosition=new Ct(0,0),this.position=new Ct(0,0),this.lastPosition=new Ct(0,0),this.lastGravity=new Ct(0,0),this.force=new Ct(0,0),this.velocity=new Ct(0,0)}initialPosition;mobility;delay;acceleration;radius;position;lastPosition;lastGravity;force;velocity}class Ba{constructor(){this.normalizationPosition=new pr,this.normalizationAngle=new pr}inputCount;outputCount;particleCount;baseInputIndex;baseOutputIndex;baseParticleIndex;normalizationPosition;normalizationAngle}class Pa{constructor(){this.source=new mr}source;sourceParameterIndex;weight;type;reflect;getNormalizedParameterValue}class va{constructor(){this.destination=new mr,this.translationScale=new Ct(0,0)}destination;destinationParameterIndex;vertexIndex;translationScale;angleScale;weight;type;reflect;valueBelowMinimum;valueExceededMaximum;getValue;getScale}class Ia{constructor(){this.settings=new wt,this.inputs=new wt,this.outputs=new wt,this.particles=new wt,this.gravity=new Ct(0,0),this.wind=new Ct(0,0),this.fps=0}subRigCount;settings;inputs;outputs;particles;gravity;wind;fps}var Va;(c=>{c.CubismPhysicsInput=Pa,c.CubismPhysicsNormalization=pr,c.CubismPhysicsOutput=va,c.CubismPhysicsParameter=mr,c.CubismPhysicsParticle=ka,c.CubismPhysicsRig=Ia,c.CubismPhysicsSource=ui,c.CubismPhysicsSubRig=Ba,c.CubismPhysicsTargetType=D0,c.PhysicsJsonEffectiveForces=f2})(Va||(Va={}));const n0="Position",yr="X",Ar="Y",xr="Angle",Ra="Type",Ta="Id",Ke="Meta",L0="EffectiveForces",g2="TotalInputCount",_2="TotalOutputCount",d2="PhysicsSettingCount",Fa="Gravity",ba="Wind",m2="VertexCount",p2="Fps",se="PhysicsSettings",Oi="Normalization",Ea="Minimum",Da="Maximum",La="Default",Oa="Reflect",Ua="Weight",o0="Input",y2="Source",Ai="Output",A2="Scale",x2="VertexIndex",S2="Destination",xi="Vertices",C2="Mobility",w2="Delay",M2="Radius",k2="Acceleration";class Na{constructor(i,s){this._json=pe.create(i,s)}release(){pe.delete(this._json)}getGravity(){const i=new Ct(0,0);return i.x=this._json.getRoot().getValueByString(Ke).getValueByString(L0).getValueByString(Fa).getValueByString(yr).toFloat(),i.y=this._json.getRoot().getValueByString(Ke).getValueByString(L0).getValueByString(Fa).getValueByString(Ar).toFloat(),i}getWind(){const i=new Ct(0,0);return i.x=this._json.getRoot().getValueByString(Ke).getValueByString(L0).getValueByString(ba).getValueByString(yr).toFloat(),i.y=this._json.getRoot().getValueByString(Ke).getValueByString(L0).getValueByString(ba).getValueByString(Ar).toFloat(),i}getFps(){return this._json.getRoot().getValueByString(Ke).getValueByString(p2).toFloat(0)}getSubRigCount(){return this._json.getRoot().getValueByString(Ke).getValueByString(d2).toInt()}getTotalInputCount(){return this._json.getRoot().getValueByString(Ke).getValueByString(g2).toInt()}getTotalOutputCount(){return this._json.getRoot().getValueByString(Ke).getValueByString(_2).toInt()}getVertexCount(){return this._json.getRoot().getValueByString(Ke).getValueByString(m2).toInt()}getNormalizationPositionMinimumValue(i){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(Oi).getValueByString(n0).getValueByString(Ea).toFloat()}getNormalizationPositionMaximumValue(i){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(Oi).getValueByString(n0).getValueByString(Da).toFloat()}getNormalizationPositionDefaultValue(i){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(Oi).getValueByString(n0).getValueByString(La).toFloat()}getNormalizationAngleMinimumValue(i){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(Oi).getValueByString(xr).getValueByString(Ea).toFloat()}getNormalizationAngleMaximumValue(i){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(Oi).getValueByString(xr).getValueByString(Da).toFloat()}getNormalizationAngleDefaultValue(i){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(Oi).getValueByString(xr).getValueByString(La).toFloat()}getInputCount(i){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(o0).getVector().getSize()}getInputWeight(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(o0).getValueByIndex(s).getValueByString(Ua).toFloat()}getInputReflect(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(o0).getValueByIndex(s).getValueByString(Oa).toBoolean()}getInputType(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(o0).getValueByIndex(s).getValueByString(Ra).getRawString()}getInputSourceId(i,s){return Wt.getIdManager().getId(this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(o0).getValueByIndex(s).getValueByString(y2).getValueByString(Ta).getRawString())}getOutputCount(i){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(Ai).getVector().getSize()}getOutputVertexIndex(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(Ai).getValueByIndex(s).getValueByString(x2).toInt()}getOutputAngleScale(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(Ai).getValueByIndex(s).getValueByString(A2).toFloat()}getOutputWeight(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(Ai).getValueByIndex(s).getValueByString(Ua).toFloat()}getOutputDestinationId(i,s){return Wt.getIdManager().getId(this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(Ai).getValueByIndex(s).getValueByString(S2).getValueByString(Ta).getRawString())}getOutputType(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(Ai).getValueByIndex(s).getValueByString(Ra).getRawString()}getOutputReflect(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(Ai).getValueByIndex(s).getValueByString(Oa).toBoolean()}getParticleCount(i){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(xi).getVector().getSize()}getParticleMobility(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(xi).getValueByIndex(s).getValueByString(C2).toFloat()}getParticleDelay(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(xi).getValueByIndex(s).getValueByString(w2).toFloat()}getParticleAcceleration(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(xi).getValueByIndex(s).getValueByString(k2).toFloat()}getParticleRadius(i,s){return this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(xi).getValueByIndex(s).getValueByString(M2).toFloat()}getParticlePosition(i,s){const o=new Ct(0,0);return o.x=this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(xi).getValueByIndex(s).getValueByString(n0).getValueByString(yr).toFloat(),o.y=this._json.getRoot().getValueByString(se).getValueByIndex(i).getValueByString(xi).getValueByIndex(s).getValueByString(n0).getValueByString(Ar).toFloat(),o}_json}var za;(c=>{c.CubismPhysicsJson=Na})(za||(za={}));const Ga="X",Xa="Y",Ya="Angle",B2=5,Sr=100,ja=.001,P2=5;class c0{static create(i,s){const o=new c0;return o.parse(i,s),o._physicsRig.gravity.y=0,o}static delete(i){i!=null&&(i.release(),i=null)}parse(i,s){this._physicsRig=new Ia;let o=new Na(i,s);this._physicsRig.gravity=o.getGravity(),this._physicsRig.wind=o.getWind(),this._physicsRig.subRigCount=o.getSubRigCount(),this._physicsRig.fps=o.getFps(),this._physicsRig.settings.updateSize(this._physicsRig.subRigCount,Ba,!0),this._physicsRig.inputs.updateSize(o.getTotalInputCount(),Pa,!0),this._physicsRig.outputs.updateSize(o.getTotalOutputCount(),va,!0),this._physicsRig.particles.updateSize(o.getVertexCount(),ka,!0),this._currentRigOutputs.clear(),this._previousRigOutputs.clear();let m=0,w=0,T=0;for(let I=0;I<this._physicsRig.settings.getSize();++I){this._physicsRig.settings.at(I).normalizationPosition.minimum=o.getNormalizationPositionMinimumValue(I),this._physicsRig.settings.at(I).normalizationPosition.maximum=o.getNormalizationPositionMaximumValue(I),this._physicsRig.settings.at(I).normalizationPosition.defalut=o.getNormalizationPositionDefaultValue(I),this._physicsRig.settings.at(I).normalizationAngle.minimum=o.getNormalizationAngleMinimumValue(I),this._physicsRig.settings.at(I).normalizationAngle.maximum=o.getNormalizationAngleMaximumValue(I),this._physicsRig.settings.at(I).normalizationAngle.defalut=o.getNormalizationAngleDefaultValue(I),this._physicsRig.settings.at(I).inputCount=o.getInputCount(I),this._physicsRig.settings.at(I).baseInputIndex=m;for(let V=0;V<this._physicsRig.settings.at(I).inputCount;++V)this._physicsRig.inputs.at(m+V).sourceParameterIndex=-1,this._physicsRig.inputs.at(m+V).weight=o.getInputWeight(I,V),this._physicsRig.inputs.at(m+V).reflect=o.getInputReflect(I,V),o.getInputType(I,V)==Ga?(this._physicsRig.inputs.at(m+V).type=ui.CubismPhysicsSource_X,this._physicsRig.inputs.at(m+V).getNormalizedParameterValue=I2):o.getInputType(I,V)==Xa?(this._physicsRig.inputs.at(m+V).type=ui.CubismPhysicsSource_Y,this._physicsRig.inputs.at(m+V).getNormalizedParameterValue=V2):o.getInputType(I,V)==Ya&&(this._physicsRig.inputs.at(m+V).type=ui.CubismPhysicsSource_Angle,this._physicsRig.inputs.at(m+V).getNormalizedParameterValue=R2),this._physicsRig.inputs.at(m+V).source.targetType=D0.CubismPhysicsTargetType_Parameter,this._physicsRig.inputs.at(m+V).source.id=o.getInputSourceId(I,V);m+=this._physicsRig.settings.at(I).inputCount,this._physicsRig.settings.at(I).outputCount=o.getOutputCount(I),this._physicsRig.settings.at(I).baseOutputIndex=w;const N=new Wa;N.outputs.resize(this._physicsRig.settings.at(I).outputCount);const D=new Wa;D.outputs.resize(this._physicsRig.settings.at(I).outputCount);for(let V=0;V<this._physicsRig.settings.at(I).outputCount;++V)N.outputs[V]=0,D.outputs[V]=0,this._physicsRig.outputs.at(w+V).destinationParameterIndex=-1,this._physicsRig.outputs.at(w+V).vertexIndex=o.getOutputVertexIndex(I,V),this._physicsRig.outputs.at(w+V).angleScale=o.getOutputAngleScale(I,V),this._physicsRig.outputs.at(w+V).weight=o.getOutputWeight(I,V),this._physicsRig.outputs.at(w+V).destination.targetType=D0.CubismPhysicsTargetType_Parameter,this._physicsRig.outputs.at(w+V).destination.id=o.getOutputDestinationId(I,V),o.getOutputType(I,V)==Ga?(this._physicsRig.outputs.at(w+V).type=ui.CubismPhysicsSource_X,this._physicsRig.outputs.at(w+V).getValue=T2,this._physicsRig.outputs.at(w+V).getScale=L2):o.getOutputType(I,V)==Xa?(this._physicsRig.outputs.at(w+V).type=ui.CubismPhysicsSource_Y,this._physicsRig.outputs.at(w+V).getValue=F2,this._physicsRig.outputs.at(w+V).getScale=O2):o.getOutputType(I,V)==Ya&&(this._physicsRig.outputs.at(w+V).type=ui.CubismPhysicsSource_Angle,this._physicsRig.outputs.at(w+V).getValue=b2,this._physicsRig.outputs.at(w+V).getScale=U2),this._physicsRig.outputs.at(w+V).reflect=o.getOutputReflect(I,V);this._currentRigOutputs.pushBack(N),this._previousRigOutputs.pushBack(D),w+=this._physicsRig.settings.at(I).outputCount,this._physicsRig.settings.at(I).particleCount=o.getParticleCount(I),this._physicsRig.settings.at(I).baseParticleIndex=T;for(let V=0;V<this._physicsRig.settings.at(I).particleCount;++V)this._physicsRig.particles.at(T+V).mobility=o.getParticleMobility(I,V),this._physicsRig.particles.at(T+V).delay=o.getParticleDelay(I,V),this._physicsRig.particles.at(T+V).acceleration=o.getParticleAcceleration(I,V),this._physicsRig.particles.at(T+V).radius=o.getParticleRadius(I,V),this._physicsRig.particles.at(T+V).position=o.getParticlePosition(I,V);T+=this._physicsRig.settings.at(I).particleCount}this.initialize(),o.release(),o=void 0,o=null}stabilization(i){let s,o,m,w;const T=new Ct;let I,N,D,V,A,G,W,q;A=i.getModel().parameters.values,G=i.getModel().parameters.maximumValues,W=i.getModel().parameters.minimumValues,q=i.getModel().parameters.defaultValues,(this._parameterCaches?.length??0)<i.getParameterCount()&&(this._parameterCaches=new Float32Array(i.getParameterCount())),(this._parameterInputCaches?.length??0)<i.getParameterCount()&&(this._parameterInputCaches=new Float32Array(i.getParameterCount()));for(let et=0;et<i.getParameterCount();++et)this._parameterCaches[et]=A[et],this._parameterInputCaches[et]=A[et];for(let et=0;et<this._physicsRig.subRigCount;++et){s={angle:0},T.x=0,T.y=0,I=this._physicsRig.settings.at(et),N=this._physicsRig.inputs.get(I.baseInputIndex),D=this._physicsRig.outputs.get(I.baseOutputIndex),V=this._physicsRig.particles.get(I.baseParticleIndex);for(let K=0;K<I.inputCount;++K)o=N[K].weight/Sr,N[K].sourceParameterIndex==-1&&(N[K].sourceParameterIndex=i.getParameterIndex(N[K].source.id)),N[K].getNormalizedParameterValue(T,s,A[N[K].sourceParameterIndex],W[N[K].sourceParameterIndex],G[N[K].sourceParameterIndex],q[N[K].sourceParameterIndex],I.normalizationPosition,I.normalizationAngle,N[K].reflect,o),this._parameterCaches[N[K].sourceParameterIndex]=A[N[K].sourceParameterIndex];m=It.degreesToRadian(-s.angle),T.x=T.x*It.cos(m)-T.y*It.sin(m),T.y=T.x*It.sin(m)+T.y*It.cos(m),z2(V,I.particleCount,T,s.angle,this._options.wind,ja*I.normalizationPosition.maximum);for(let K=0;K<I.outputCount;++K){const gt=D[K].vertexIndex;if(D[K].destinationParameterIndex==-1&&(D[K].destinationParameterIndex=i.getParameterIndex(D[K].destination.id)),gt<1||gt>=I.particleCount)continue;let mt=new Ct;mt=V[gt].position.substract(V[gt-1].position),w=D[K].getValue(mt,V,gt,D[K].reflect,this._options.gravity),this._currentRigOutputs.at(et).outputs[K]=w,this._previousRigOutputs.at(et).outputs[K]=w;const dt=D[K].destinationParameterIndex,ct=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(A.subarray(dt))):A.slice(dt);Cr(ct,W[dt],G[dt],w,D[K]);for(let Et=dt,Nt=0;Et<this._parameterCaches.length;Et++,Nt++)A[Et]=this._parameterCaches[Et]=ct[Nt]}}}evaluate(i,s){let o,m,w,T;const I=new Ct;let N,D,V,A;if(0>=s)return;let G,W,q,et,K;if(this._currentRemainTime+=s,this._currentRemainTime>P2&&(this._currentRemainTime=0),G=i.getModel().parameters.values,W=i.getModel().parameters.maximumValues,q=i.getModel().parameters.minimumValues,et=i.getModel().parameters.defaultValues,(this._parameterCaches?.length??0)<i.getParameterCount()&&(this._parameterCaches=new Float32Array(i.getParameterCount())),(this._parameterInputCaches?.length??0)<i.getParameterCount()){this._parameterInputCaches=new Float32Array(i.getParameterCount());for(let mt=0;mt<i.getParameterCount();++mt)this._parameterInputCaches[mt]=G[mt]}for(this._physicsRig.fps>0?K=1/this._physicsRig.fps:K=s;this._currentRemainTime>=K;){for(let dt=0;dt<this._physicsRig.subRigCount;++dt){N=this._physicsRig.settings.at(dt),V=this._physicsRig.outputs.get(N.baseOutputIndex);for(let ct=0;ct<N.outputCount;++ct)this._previousRigOutputs.at(dt).outputs[ct]=this._currentRigOutputs.at(dt).outputs[ct]}const mt=K/this._currentRemainTime;for(let dt=0;dt<i.getParameterCount();++dt)this._parameterCaches[dt]=this._parameterInputCaches[dt]*(1-mt)+G[dt]*mt,this._parameterInputCaches[dt]=this._parameterCaches[dt];for(let dt=0;dt<this._physicsRig.subRigCount;++dt){o={angle:0},I.x=0,I.y=0,N=this._physicsRig.settings.at(dt),D=this._physicsRig.inputs.get(N.baseInputIndex),V=this._physicsRig.outputs.get(N.baseOutputIndex),A=this._physicsRig.particles.get(N.baseParticleIndex);for(let ct=0;ct<N.inputCount;++ct)m=D[ct].weight/Sr,D[ct].sourceParameterIndex==-1&&(D[ct].sourceParameterIndex=i.getParameterIndex(D[ct].source.id)),D[ct].getNormalizedParameterValue(I,o,this._parameterCaches[D[ct].sourceParameterIndex],q[D[ct].sourceParameterIndex],W[D[ct].sourceParameterIndex],et[D[ct].sourceParameterIndex],N.normalizationPosition,N.normalizationAngle,D[ct].reflect,m);w=It.degreesToRadian(-o.angle),I.x=I.x*It.cos(w)-I.y*It.sin(w),I.y=I.x*It.sin(w)+I.y*It.cos(w),N2(A,N.particleCount,I,o.angle,this._options.wind,ja*N.normalizationPosition.maximum,K,B2);for(let ct=0;ct<N.outputCount;++ct){const Et=V[ct].vertexIndex;if(V[ct].destinationParameterIndex==-1&&(V[ct].destinationParameterIndex=i.getParameterIndex(V[ct].destination.id)),Et<1||Et>=N.particleCount)continue;const Nt=new Ct;Nt.x=A[Et].position.x-A[Et-1].position.x,Nt.y=A[Et].position.y-A[Et-1].position.y,T=V[ct].getValue(Nt,A,Et,V[ct].reflect,this._options.gravity),this._currentRigOutputs.at(dt).outputs[ct]=T;const de=V[ct].destinationParameterIndex,Ce=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(this._parameterCaches.subarray(de))):this._parameterCaches.slice(de);Cr(Ce,q[de],W[de],T,V[ct]);for(let he=de,Ye=0;he<this._parameterCaches.length;he++,Ye++)this._parameterCaches[he]=Ce[Ye]}}this._currentRemainTime-=K}const gt=this._currentRemainTime/K;this.interpolate(i,gt)}interpolate(i,s){let o,m,w,T,I;w=i.getModel().parameters.values,T=i.getModel().parameters.maximumValues,I=i.getModel().parameters.minimumValues;for(let N=0;N<this._physicsRig.subRigCount;++N){m=this._physicsRig.settings.at(N),o=this._physicsRig.outputs.get(m.baseOutputIndex);for(let D=0;D<m.outputCount;++D){if(o[D].destinationParameterIndex==-1)continue;const V=o[D].destinationParameterIndex,A=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(w.subarray(V))):w.slice(V);Cr(A,I[V],T[V],this._previousRigOutputs.at(N).outputs[D]*(1-s)+this._currentRigOutputs.at(N).outputs[D]*s,o[D]);for(let G=V,W=0;G<w.length;G++,W++)w[G]=A[W]}}}setOptions(i){this._options=i}getOption(){return this._options}constructor(){this._physicsRig=null,this._options=new Ha,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0,this._currentRigOutputs=new wt,this._previousRigOutputs=new wt,this._currentRemainTime=0,this._parameterCaches=null,this._parameterInputCaches=null}release(){this._physicsRig=void 0,this._physicsRig=null}initialize(){let i,s,o;for(let m=0;m<this._physicsRig.subRigCount;++m){s=this._physicsRig.settings.at(m),i=this._physicsRig.particles.get(s.baseParticleIndex),i[0].initialPosition=new Ct(0,0),i[0].lastPosition=new Ct(i[0].initialPosition.x,i[0].initialPosition.y),i[0].lastGravity=new Ct(0,-1),i[0].lastGravity.y*=-1,i[0].velocity=new Ct(0,0),i[0].force=new Ct(0,0);for(let w=1;w<s.particleCount;++w)o=new Ct(0,0),o.y=i[w].radius,i[w].initialPosition=new Ct(i[w-1].initialPosition.x+o.x,i[w-1].initialPosition.y+o.y),i[w].position=new Ct(i[w].initialPosition.x,i[w].initialPosition.y),i[w].lastPosition=new Ct(i[w].initialPosition.x,i[w].initialPosition.y),i[w].lastGravity=new Ct(0,-1),i[w].lastGravity.y*=-1,i[w].velocity=new Ct(0,0),i[w].force=new Ct(0,0)}}_physicsRig;_options;_currentRigOutputs;_previousRigOutputs;_currentRemainTime;_parameterCaches;_parameterInputCaches}class Ha{constructor(){this.gravity=new Ct(0,0),this.wind=new Ct(0,0)}gravity;wind}class Wa{constructor(){this.outputs=new wt(0)}outputs}function v2(c){let i=0;return c>0?i=1:c<0&&(i=-1),i}function I2(c,i,s,o,m,w,T,I,N,D){c.x+=wr(s,o,m,w,T.minimum,T.maximum,T.defalut,N)*D}function V2(c,i,s,o,m,w,T,I,N,D){c.y+=wr(s,o,m,w,T.minimum,T.maximum,T.defalut,N)*D}function R2(c,i,s,o,m,w,T,I,N,D){i.angle+=wr(s,o,m,w,I.minimum,I.maximum,I.defalut,N)*D}function T2(c,i,s,o,m){let w=c.x;return o&&(w*=-1),w}function F2(c,i,s,o,m){let w=c.y;return o&&(w*=-1),w}function b2(c,i,s,o,m){let w;return s>=2?m=i[s-1].position.substract(i[s-2].position):m=m.multiplyByScaler(-1),w=It.directionToRadian(m,c),o&&(w*=-1),w}function E2(c,i){const s=It.max(c,i),o=It.min(c,i);return It.abs(s-o)}function D2(c,i){return It.min(c,i)+E2(c,i)/2}function L2(c,i){return JSON.parse(JSON.stringify(c.x))}function O2(c,i){return JSON.parse(JSON.stringify(c.y))}function U2(c,i){return JSON.parse(JSON.stringify(i))}function N2(c,i,s,o,m,w,T,I){let N,D,V,A,G=new Ct(0,0),W=new Ct(0,0),q=new Ct(0,0),et=new Ct(0,0);c[0].position=new Ct(s.x,s.y),N=It.degreesToRadian(o),A=It.radianToDirection(N),A.normalize();for(let K=1;K<i;++K)c[K].force=A.multiplyByScaler(c[K].acceleration).add(m),c[K].lastPosition=new Ct(c[K].position.x,c[K].position.y),D=c[K].delay*T*30,G=c[K].position.substract(c[K-1].position),V=It.directionToRadian(c[K].lastGravity,A)/I,G.x=It.cos(V)*G.x-G.y*It.sin(V),G.y=It.sin(V)*G.x+G.y*It.cos(V),c[K].position=c[K-1].position.add(G),W=c[K].velocity.multiplyByScaler(D),q=c[K].force.multiplyByScaler(D).multiplyByScaler(D),c[K].position=c[K].position.add(W).add(q),et=c[K].position.substract(c[K-1].position),et.normalize(),c[K].position=c[K-1].position.add(et.multiplyByScaler(c[K].radius)),It.abs(c[K].position.x)<w&&(c[K].position.x=0),D!=0&&(c[K].velocity=c[K].position.substract(c[K].lastPosition),c[K].velocity=c[K].velocity.divisionByScalar(D),c[K].velocity=c[K].velocity.multiplyByScaler(c[K].mobility)),c[K].force=new Ct(0,0),c[K].lastGravity=new Ct(A.x,A.y)}function z2(c,i,s,o,m,w){let T,I,N=new Ct(0,0);c[0].position=new Ct(s.x,s.y),T=It.degreesToRadian(o),I=It.radianToDirection(T),I.normalize();for(let D=1;D<i;++D)c[D].force=I.multiplyByScaler(c[D].acceleration).add(m),c[D].lastPosition=new Ct(c[D].position.x,c[D].position.y),c[D].velocity=new Ct(0,0),N=c[D].force,N.normalize(),N=N.multiplyByScaler(c[D].radius),c[D].position=c[D-1].position.add(N),It.abs(c[D].position.x)<w&&(c[D].position.x=0),c[D].force=new Ct(0,0),c[D].lastGravity=new Ct(I.x,I.y)}function Cr(c,i,s,o,m){let w,T,I;w=m.getScale(m.translationScale,m.angleScale),T=o*w,T<i?(T<m.valueBelowMinimum&&(m.valueBelowMinimum=T),T=i):T>s&&(T>m.valueExceededMaximum&&(m.valueExceededMaximum=T),T=s),I=m.weight/Sr,I>=1||(T=c[0]*(1-I)+T*I),c[0]=T}function wr(c,i,s,o,m,w,T,I){let N=0;const D=It.max(s,i);D<c&&(c=D);const V=It.min(s,i);V>c&&(c=V);const A=It.min(m,w),G=It.max(m,w),W=T,q=D2(V,D),et=c-q;switch(v2(et)){case 1:{const K=G-W,gt=D-q;gt!=0&&(N=et*(K/gt),N+=W);break}case-1:{const K=A-W,gt=V-q;gt!=0&&(N=et*(K/gt),N+=W);break}case 0:{N=W;break}}return I?N:N*-1}var Za;(c=>{c.CubismPhysics=c0,c.Options=Ha})(Za||(Za={}));class O0{constructor(i,s,o,m){this.x=i,this.y=s,this.width=o,this.height=m}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(i){this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height}expand(i,s){this.x-=i,this.y-=s,this.width+=i*2,this.height+=s*2}x;y;width;height}var Ja;(c=>{c.csmRect=O0})(Ja||(Ja={}));const U0=4,G2=36,X2=32,Y2=10;let Si,Qe,N0;class Mr{getChannelFlagAsColor(i){return this._channelColors.at(i)}getMaskRenderTexture(){if(this._maskTexture&&this._maskTexture.textures!=null)this._maskTexture.frameNo=this._currentFrameNo;else{this._maskRenderTextures!=null&&this._maskRenderTextures.clear(),this._maskRenderTextures=new wt,this._maskColorBuffers!=null&&this._maskColorBuffers.clear(),this._maskColorBuffers=new wt;const i=this._clippingMaskBufferSize;for(let s=0;s<this._renderTextureCount;s++)this._maskColorBuffers.pushBack(this.gl.createTexture()),this.gl.bindTexture(this.gl.TEXTURE_2D,this._maskColorBuffers.at(s)),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,i,i,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this._maskRenderTextures.pushBack(this.gl.createFramebuffer()),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTextures.at(s)),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._maskColorBuffers.at(s),0);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,N0),this._maskTexture=new qa(this._currentFrameNo,this._maskRenderTextures)}return this._maskTexture.textures}setGL(i){this.gl=i}calcClippedDrawTotalBounds(i,s){let o=Number.MAX_VALUE,m=Number.MAX_VALUE,w=Number.MIN_VALUE,T=Number.MIN_VALUE;const I=s._clippedDrawableIndexList.length;for(let N=0;N<I;N++){const D=s._clippedDrawableIndexList[N],V=i.getDrawableVertexCount(D),A=i.getDrawableVertices(D);let G=Number.MAX_VALUE,W=Number.MAX_VALUE,q=-Number.MAX_VALUE,et=-Number.MAX_VALUE;const K=V*si.vertexStep;for(let gt=si.vertexOffset;gt<K;gt+=si.vertexStep){const mt=A[gt],dt=A[gt+1];mt<G&&(G=mt),mt>q&&(q=mt),dt<W&&(W=dt),dt>et&&(et=dt)}if(G!=Number.MAX_VALUE)if(G<o&&(o=G),W<m&&(m=W),q>w&&(w=q),et>T&&(T=et),o==Number.MAX_VALUE)s._allClippedDrawRect.x=0,s._allClippedDrawRect.y=0,s._allClippedDrawRect.width=0,s._allClippedDrawRect.height=0,s._isUsing=!1;else{s._isUsing=!0;const gt=w-o,mt=T-m;s._allClippedDrawRect.x=o,s._allClippedDrawRect.y=m,s._allClippedDrawRect.width=gt,s._allClippedDrawRect.height=mt}}}constructor(){this._currentMaskRenderTexture=null,this._maskColorBuffers=null,this._currentFrameNo=0,this._renderTextureCount=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=new wt,this._clippingContextListForDraw=new wt,this._channelColors=new wt,this._tmpBoundsOnModel=new O0,this._tmpMatrix=new oe,this._tmpMatrixForMask=new oe,this._tmpMatrixForDraw=new oe,this._maskTexture=null;let i=new qe;i.R=1,i.G=0,i.B=0,i.A=0,this._channelColors.pushBack(i),i=new qe,i.R=0,i.G=1,i.B=0,i.A=0,this._channelColors.pushBack(i),i=new qe,i.R=0,i.G=0,i.B=1,i.A=0,this._channelColors.pushBack(i),i=new qe,i.R=0,i.G=0,i.B=0,i.A=1,this._channelColors.pushBack(i)}release(){for(let i=0;i<this._clippingContextListForMask.getSize();i++)this._clippingContextListForMask.at(i)&&(this._clippingContextListForMask.at(i).release(),this._clippingContextListForMask.set(i,void 0)),this._clippingContextListForMask.set(i,null);this._clippingContextListForMask=null;for(let i=0;i<this._clippingContextListForDraw.getSize();i++)this._clippingContextListForDraw.set(i,null);if(this._clippingContextListForDraw=null,this._maskTexture){for(let i=0;i<this._maskTexture.textures.getSize();i++)this.gl.deleteFramebuffer(this._maskTexture.textures.at(i));this._maskTexture.textures.clear(),this._maskTexture.textures=null,this._maskTexture=null}for(let i=0;i<this._channelColors.getSize();i++)this._channelColors.set(i,null);if(this._channelColors=null,this._maskColorBuffers!=null){for(let i=0;i<this._maskColorBuffers.getSize();i++)this.gl.deleteTexture(this._maskColorBuffers.at(i));this._maskColorBuffers.clear()}this._maskColorBuffers=null,this._maskRenderTextures!=null&&this._maskRenderTextures.clear(),this._maskRenderTextures=null,this._clearedFrameBufferflags!=null&&this._clearedFrameBufferflags.clear(),this._clearedFrameBufferflags=null}initialize(i,s,o,m,w){w%1!=0&&(ri("The number of render textures must be specified as an integer. The decimal point is rounded down and corrected to an integer."),w=~~w),w<1&&ri("The number of render textures must be an integer greater than or equal to 1. Set the number of render textures to 1."),this._renderTextureCount=w<1?1:w,this._clearedFrameBufferflags=new wt(this._renderTextureCount);for(let T=0;T<s;T++){if(m[T]<=0){this._clippingContextListForDraw.pushBack(null);continue}let I=this.findSameClip(o[T],m[T]);I==null&&(I=new $a(this,o[T],m[T]),this._clippingContextListForMask.pushBack(I)),I.addClippedDrawable(T),this._clippingContextListForDraw.pushBack(I)}}setupClippingContext(i,s){this._currentFrameNo++;let o=0;for(let m=0;m<this._clippingContextListForMask.getSize();m++){const w=this._clippingContextListForMask.at(m);this.calcClippedDrawTotalBounds(i,w),w._isUsing&&o++}if(o>0){this.setupLayoutBounds(s.isUsingHighPrecisionMask()?0:o),s.isUsingHighPrecisionMask()||(this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._currentMaskRenderTexture=this.getMaskRenderTexture().at(0),s.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._currentMaskRenderTexture)),this._clearedFrameBufferflags.getSize()!=this._renderTextureCount&&(this._clearedFrameBufferflags.clear(),this._clearedFrameBufferflags=new wt(this._renderTextureCount));for(let m=0;m<this._clearedFrameBufferflags.getSize();m++)this._clearedFrameBufferflags[m]=!1;for(let m=0;m<this._clippingContextListForMask.getSize();m++){const w=this._clippingContextListForMask.at(m),T=w._allClippedDrawRect,I=w._layoutBounds,N=.05;let D=0,V=0;const A=this.getMaskRenderTexture().at(w._bufferIndex);if(this._currentMaskRenderTexture!=A&&!s.isUsingHighPrecisionMask()&&(this._currentMaskRenderTexture=A,s.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._currentMaskRenderTexture)),s.isUsingHighPrecisionMask()){const G=i.getPixelsPerUnit(),W=w.getClippingManager()._clippingMaskBufferSize,q=I.width*W,et=I.height*W;this._tmpBoundsOnModel.setRect(T),this._tmpBoundsOnModel.width*G>q?(this._tmpBoundsOnModel.expand(T.width*N,0),D=I.width/this._tmpBoundsOnModel.width):D=G/q,this._tmpBoundsOnModel.height*G>et?(this._tmpBoundsOnModel.expand(0,T.height*N),V=I.height/this._tmpBoundsOnModel.height):V=G/et}else this._tmpBoundsOnModel.setRect(T),this._tmpBoundsOnModel.expand(T.width*N,T.height*N),D=I.width/this._tmpBoundsOnModel.width,V=I.height/this._tmpBoundsOnModel.height;if(this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(I.x,I.y),this._tmpMatrix.scaleRelative(D,V),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(I.x,I.y),this._tmpMatrix.scaleRelative(D,V),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),w._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),w._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray()),!s.isUsingHighPrecisionMask()){const G=w._clippingIdCount;for(let W=0;W<G;W++){const q=w._clippingIdList[W];i.getDrawableDynamicFlagVertexPositionsDidChange(q)&&(s.setIsCulling(i.getDrawableCulling(q)!=!1),this._clearedFrameBufferflags[w._bufferIndex]||(this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this._clearedFrameBufferflags[w._bufferIndex]=!0),s.setClippingContextBufferForMask(w),s.drawMesh(i.getDrawableTextureIndex(q),i.getDrawableVertexIndexCount(q),i.getDrawableVertexCount(q),i.getDrawableVertexIndices(q),i.getDrawableVertices(q),i.getDrawableVertexUvs(q),i.getMultiplyColor(q),i.getScreenColor(q),i.getDrawableOpacity(q),Ne.CubismBlendMode_Normal,!1))}}}s.isUsingHighPrecisionMask()||(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,N0),s.setClippingContextBufferForMask(null),this.gl.viewport(Qe[0],Qe[1],Qe[2],Qe[3]))}}findSameClip(i,s){for(let o=0;o<this._clippingContextListForMask.getSize();o++){const m=this._clippingContextListForMask.at(o),w=m._clippingIdCount;if(w!=s)continue;let T=0;for(let I=0;I<w;I++){const N=m._clippingIdList[I];for(let D=0;D<w;D++)if(i[D]==N){T++;break}}if(T==w)return m}return null}setupLayoutBounds(i){const s=this._renderTextureCount<=1?G2:X2*this._renderTextureCount;if(i<=0||i>s){i>s&&we(`not supported mask count : {0}
[Details] render texture count : {1}, mask count : {2}`,i-s,this._renderTextureCount,i);for(let D=0;D<this._clippingContextListForMask.getSize();D++){const V=this._clippingContextListForMask.at(D);V._layoutChannelNo=0,V._layoutBounds.x=0,V._layoutBounds.y=0,V._layoutBounds.width=1,V._layoutBounds.height=1,V._bufferIndex=0}return}const o=this._renderTextureCount<=1?9:8;let m=i/this._renderTextureCount,w=i%this._renderTextureCount;m=~~m,w=~~w;let T=m/U0,I=m%U0;T=~~T,I=~~I;let N=0;for(let D=0;D<this._renderTextureCount;D++)for(let V=0;V<U0;V++){let A=T+(V<I?1:0);const G=I+1>=U0?0:I+1;if(A<o&&V==G&&(A+=D<w?1:0),A!=0)if(A==1){const W=this._clippingContextListForMask.at(N++);W._layoutChannelNo=V,W._layoutBounds.x=0,W._layoutBounds.y=0,W._layoutBounds.width=1,W._layoutBounds.height=1,W._bufferIndex=D}else if(A==2)for(let W=0;W<A;W++){let q=W%2;q=~~q;const et=this._clippingContextListForMask.at(N++);et._layoutChannelNo=V,et._layoutBounds.x=q*.5,et._layoutBounds.y=0,et._layoutBounds.width=.5,et._layoutBounds.height=1,et._bufferIndex=D}else if(A<=4)for(let W=0;W<A;W++){let q=W%2,et=W/2;q=~~q,et=~~et;const K=this._clippingContextListForMask.at(N++);K._layoutChannelNo=V,K._layoutBounds.x=q*.5,K._layoutBounds.y=et*.5,K._layoutBounds.width=.5,K._layoutBounds.height=.5,K._bufferIndex=D}else if(A<=o)for(let W=0;W<A;W++){let q=W%3,et=W/3;q=~~q,et=~~et;const K=this._clippingContextListForMask.at(N++);K._layoutChannelNo=V,K._layoutBounds.x=q/3,K._layoutBounds.y=et/3,K._layoutBounds.width=1/3,K._layoutBounds.height=1/3,K._bufferIndex=D}else{we(`not supported mask count : {0}
[Details] render texture count : {1}, mask count : {2}`,i-s,this._renderTextureCount,i);for(let W=0;W<A;W++){const q=this._clippingContextListForMask.at(N++);q._layoutChannelNo=0,q._layoutBounds.x=0,q._layoutBounds.y=0,q._layoutBounds.width=1,q._layoutBounds.height=1,q._bufferIndex=0}}}}getColorBuffer(){return this._maskColorBuffers}getClippingContextListForDraw(){return this._clippingContextListForDraw}getClippingMaskCount(){return this._clippingContextListForMask.getSize()}setClippingMaskBufferSize(i){this._clippingMaskBufferSize=i}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}getRenderTextureCount(){return this._renderTextureCount}_currentMaskRenderTexture;_maskRenderTextures;_maskColorBuffers;_currentFrameNo;_channelColors;_maskTexture;_clippingContextListForMask;_clippingContextListForDraw;_clippingMaskBufferSize;_renderTextureCount;_tmpMatrix;_tmpMatrixForMask;_tmpMatrixForDraw;_tmpBoundsOnModel;_clearedFrameBufferflags;gl}class qa{constructor(i,s){this.frameNo=i,this.textures=s}frameNo;textures}class $a{constructor(i,s,o){this._owner=i,this._clippingIdList=s,this._clippingIdCount=o,this._allClippedDrawRect=new O0,this._layoutBounds=new O0,this._clippedDrawableIndexList=[],this._matrixForMask=new oe,this._matrixForDraw=new oe,this._bufferIndex=0}release(){this._layoutBounds!=null&&(this._layoutBounds=null),this._allClippedDrawRect!=null&&(this._allClippedDrawRect=null),this._clippedDrawableIndexList!=null&&(this._clippedDrawableIndexList=null)}addClippedDrawable(i){this._clippedDrawableIndexList.push(i)}getClippingManager(){return this._owner}setGl(i){this._owner.setGL(i)}_isUsing;_clippingIdList;_clippingIdCount;_layoutChannelNo;_layoutBounds;_allClippedDrawRect;_matrixForMask;_matrixForDraw;_clippedDrawableIndexList;_bufferIndex;_owner}class j2{setGlEnable(i,s){s?this.gl.enable(i):this.gl.disable(i)}setGlEnableVertexAttribArray(i,s){s?this.gl.enableVertexAttribArray(i):this.gl.disableVertexAttribArray(i)}save(){if(this.gl==null){we(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this._lastArrayBufferBinding=this.gl.getParameter(this.gl.ARRAY_BUFFER_BINDING),this._lastElementArrayBufferBinding=this.gl.getParameter(this.gl.ELEMENT_ARRAY_BUFFER_BINDING),this._lastProgram=this.gl.getParameter(this.gl.CURRENT_PROGRAM),this._lastActiveTexture=this.gl.getParameter(this.gl.ACTIVE_TEXTURE),this.gl.activeTexture(this.gl.TEXTURE1),this._lastTexture1Binding2D=this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this.gl.activeTexture(this.gl.TEXTURE0),this._lastTexture0Binding2D=this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this._lastVertexAttribArrayEnabled[0]=this.gl.getVertexAttrib(0,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[1]=this.gl.getVertexAttrib(1,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[2]=this.gl.getVertexAttrib(2,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastVertexAttribArrayEnabled[3]=this.gl.getVertexAttrib(3,this.gl.VERTEX_ATTRIB_ARRAY_ENABLED),this._lastScissorTest=this.gl.isEnabled(this.gl.SCISSOR_TEST),this._lastStencilTest=this.gl.isEnabled(this.gl.STENCIL_TEST),this._lastDepthTest=this.gl.isEnabled(this.gl.DEPTH_TEST),this._lastCullFace=this.gl.isEnabled(this.gl.CULL_FACE),this._lastBlend=this.gl.isEnabled(this.gl.BLEND),this._lastFrontFace=this.gl.getParameter(this.gl.FRONT_FACE),this._lastColorMask=this.gl.getParameter(this.gl.COLOR_WRITEMASK),this._lastBlending[0]=this.gl.getParameter(this.gl.BLEND_SRC_RGB),this._lastBlending[1]=this.gl.getParameter(this.gl.BLEND_DST_RGB),this._lastBlending[2]=this.gl.getParameter(this.gl.BLEND_SRC_ALPHA),this._lastBlending[3]=this.gl.getParameter(this.gl.BLEND_DST_ALPHA),this._lastFBO=this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING),this._lastViewport=this.gl.getParameter(this.gl.VIEWPORT)}restore(){if(this.gl==null){we(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this.gl.useProgram(this._lastProgram),this.setGlEnableVertexAttribArray(0,this._lastVertexAttribArrayEnabled[0]),this.setGlEnableVertexAttribArray(1,this._lastVertexAttribArrayEnabled[1]),this.setGlEnableVertexAttribArray(2,this._lastVertexAttribArrayEnabled[2]),this.setGlEnableVertexAttribArray(3,this._lastVertexAttribArrayEnabled[3]),this.setGlEnable(this.gl.SCISSOR_TEST,this._lastScissorTest),this.setGlEnable(this.gl.STENCIL_TEST,this._lastStencilTest),this.setGlEnable(this.gl.DEPTH_TEST,this._lastDepthTest),this.setGlEnable(this.gl.CULL_FACE,this._lastCullFace),this.setGlEnable(this.gl.BLEND,this._lastBlend),this.gl.frontFace(this._lastFrontFace),this.gl.colorMask(this._lastColorMask[0],this._lastColorMask[1],this._lastColorMask[2],this._lastColorMask[3]),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this._lastArrayBufferBinding),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this._lastElementArrayBufferBinding),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,this._lastTexture1Binding2D),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,this._lastTexture0Binding2D),this.gl.activeTexture(this._lastActiveTexture),this.gl.blendFuncSeparate(this._lastBlending[0],this._lastBlending[1],this._lastBlending[2],this._lastBlending[3])}setGl(i){this.gl=i}constructor(){this._lastVertexAttribArrayEnabled=new Array(4),this._lastColorMask=new Array(4),this._lastBlending=new Array(4),this._lastViewport=new Array(4)}_lastArrayBufferBinding;_lastElementArrayBufferBinding;_lastProgram;_lastActiveTexture;_lastTexture0Binding2D;_lastTexture1Binding2D;_lastVertexAttribArrayEnabled;_lastScissorTest;_lastBlend;_lastStencilTest;_lastDepthTest;_lastCullFace;_lastFrontFace;_lastColorMask;_lastBlending;_lastFBO;_lastViewport;gl}class Ni{static getInstance(){return Si==null&&(Si=new Ni),Si}static deleteInstance(){Si&&(Si.release(),Si=null)}constructor(){this._shaderSets=new wt}release(){this.releaseShaderProgram()}setupShaderProgram(i,s,o,m,w,T,I,N,D,V,A,G,W,q,et){W||we("NoPremultipliedAlpha is not allowed"),this._shaderSets.getSize()==0&&this.generateShaders();let K,gt,mt,dt;if(i.getClippingContextBufferForMask()!=null){const ct=this._shaderSets.at(0);this.gl.useProgram(ct.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.uniform1i(ct.samplerTexture0Location,0),I.vertex==null&&(I.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,I.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,m,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(ct.attributePositionLocation),this.gl.vertexAttribPointer(ct.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),I.uv==null&&(I.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,I.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,T,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(ct.attributeTexCoordLocation),this.gl.vertexAttribPointer(ct.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);const Et=i.getClippingContextBufferForMask()._layoutChannelNo,Nt=i.getClippingContextBufferForMask().getClippingManager().getChannelFlagAsColor(Et);this.gl.uniform4f(ct.uniformChannelFlagLocation,Nt.R,Nt.G,Nt.B,Nt.A),this.gl.uniformMatrix4fv(ct.uniformClipMatrixLocation,!1,i.getClippingContextBufferForMask()._matrixForMask.getArray());const de=i.getClippingContextBufferForMask()._layoutBounds;this.gl.uniform4f(ct.uniformBaseColorLocation,de.x*2-1,de.y*2-1,de.getRight()*2-1,de.getBottom()*2-1),this.gl.uniform4f(ct.uniformMultiplyColorLocation,A.R,A.G,A.B,A.A),this.gl.uniform4f(ct.uniformScreenColorLocation,G.R,G.G,G.B,G.A),K=this.gl.ZERO,gt=this.gl.ONE_MINUS_SRC_COLOR,mt=this.gl.ZERO,dt=this.gl.ONE_MINUS_SRC_ALPHA}else{const ct=i.getClippingContextBufferForDraw()!=null,Et=ct?et?2:1:0;let Nt=new kr;switch(D){case Ne.CubismBlendMode_Normal:default:Nt=this._shaderSets.at(1+Et),K=this.gl.ONE,gt=this.gl.ONE_MINUS_SRC_ALPHA,mt=this.gl.ONE,dt=this.gl.ONE_MINUS_SRC_ALPHA;break;case Ne.CubismBlendMode_Additive:Nt=this._shaderSets.at(4+Et),K=this.gl.ONE,gt=this.gl.ONE,mt=this.gl.ZERO,dt=this.gl.ONE;break;case Ne.CubismBlendMode_Multiplicative:Nt=this._shaderSets.at(7+Et),K=this.gl.DST_COLOR,gt=this.gl.ONE_MINUS_SRC_ALPHA,mt=this.gl.ZERO,dt=this.gl.ONE;break}if(this.gl.useProgram(Nt.shaderProgram),I.vertex==null&&(I.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,I.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,m,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(Nt.attributePositionLocation),this.gl.vertexAttribPointer(Nt.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),I.uv==null&&(I.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,I.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,T,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(Nt.attributeTexCoordLocation),this.gl.vertexAttribPointer(Nt.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),ct){this.gl.activeTexture(this.gl.TEXTURE1);const de=i.getClippingContextBufferForDraw().getClippingManager().getColorBuffer().at(i.getClippingContextBufferForDraw()._bufferIndex);this.gl.bindTexture(this.gl.TEXTURE_2D,de),this.gl.uniform1i(Nt.samplerTexture1Location,1),this.gl.uniformMatrix4fv(Nt.uniformClipMatrixLocation,!1,i.getClippingContextBufferForDraw()._matrixForDraw.getArray());const Ce=i.getClippingContextBufferForDraw()._layoutChannelNo,he=i.getClippingContextBufferForDraw().getClippingManager().getChannelFlagAsColor(Ce);this.gl.uniform4f(Nt.uniformChannelFlagLocation,he.R,he.G,he.B,he.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.uniform1i(Nt.samplerTexture0Location,0),this.gl.uniformMatrix4fv(Nt.uniformMatrixLocation,!1,q.getArray()),this.gl.uniform4f(Nt.uniformBaseColorLocation,V.R,V.G,V.B,V.A),this.gl.uniform4f(Nt.uniformMultiplyColorLocation,A.R,A.G,A.B,A.A),this.gl.uniform4f(Nt.uniformScreenColorLocation,G.R,G.G,G.B,G.A)}I.index==null&&(I.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,I.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,w,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(K,gt,mt,dt)}releaseShaderProgram(){for(let i=0;i<this._shaderSets.getSize();i++)this.gl.deleteProgram(this._shaderSets.at(i).shaderProgram),this._shaderSets.at(i).shaderProgram=0,this._shaderSets.set(i,void 0),this._shaderSets.set(i,null)}generateShaders(){for(let i=0;i<Y2;i++)this._shaderSets.pushBack(new kr);this._shaderSets.at(0).shaderProgram=this.loadShaderProgram(H2,W2),this._shaderSets.at(1).shaderProgram=this.loadShaderProgram(Z2,J2),this._shaderSets.at(2).shaderProgram=this.loadShaderProgram(Qa,q2),this._shaderSets.at(3).shaderProgram=this.loadShaderProgram(Qa,$2),this._shaderSets.at(4).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(5).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(6).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(7).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(8).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(9).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(0).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_position"),this._shaderSets.at(0).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_texCoord"),this._shaderSets.at(0).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"s_texture0"),this._shaderSets.at(0).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_clipMatrix"),this._shaderSets.at(0).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_channelFlag"),this._shaderSets.at(0).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_baseColor"),this._shaderSets.at(0).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_multiplyColor"),this._shaderSets.at(0).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_screenColor"),this._shaderSets.at(1).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_position"),this._shaderSets.at(1).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_texCoord"),this._shaderSets.at(1).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"s_texture0"),this._shaderSets.at(1).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_matrix"),this._shaderSets.at(1).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_baseColor"),this._shaderSets.at(1).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_multiplyColor"),this._shaderSets.at(1).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_screenColor"),this._shaderSets.at(2).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_position"),this._shaderSets.at(2).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_texCoord"),this._shaderSets.at(2).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture0"),this._shaderSets.at(2).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture1"),this._shaderSets.at(2).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_matrix"),this._shaderSets.at(2).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_clipMatrix"),this._shaderSets.at(2).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_channelFlag"),this._shaderSets.at(2).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_baseColor"),this._shaderSets.at(2).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_multiplyColor"),this._shaderSets.at(2).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_screenColor"),this._shaderSets.at(3).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_position"),this._shaderSets.at(3).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_texCoord"),this._shaderSets.at(3).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture0"),this._shaderSets.at(3).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture1"),this._shaderSets.at(3).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_matrix"),this._shaderSets.at(3).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_clipMatrix"),this._shaderSets.at(3).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_channelFlag"),this._shaderSets.at(3).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_baseColor"),this._shaderSets.at(3).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_multiplyColor"),this._shaderSets.at(3).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_screenColor"),this._shaderSets.at(4).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_position"),this._shaderSets.at(4).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_texCoord"),this._shaderSets.at(4).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"s_texture0"),this._shaderSets.at(4).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_matrix"),this._shaderSets.at(4).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_baseColor"),this._shaderSets.at(4).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_multiplyColor"),this._shaderSets.at(4).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_screenColor"),this._shaderSets.at(5).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_position"),this._shaderSets.at(5).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_texCoord"),this._shaderSets.at(5).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture0"),this._shaderSets.at(5).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture1"),this._shaderSets.at(5).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_matrix"),this._shaderSets.at(5).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_clipMatrix"),this._shaderSets.at(5).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_channelFlag"),this._shaderSets.at(5).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_baseColor"),this._shaderSets.at(5).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_multiplyColor"),this._shaderSets.at(5).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_screenColor"),this._shaderSets.at(6).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_position"),this._shaderSets.at(6).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_texCoord"),this._shaderSets.at(6).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture0"),this._shaderSets.at(6).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture1"),this._shaderSets.at(6).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_matrix"),this._shaderSets.at(6).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_clipMatrix"),this._shaderSets.at(6).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_channelFlag"),this._shaderSets.at(6).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_baseColor"),this._shaderSets.at(6).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_multiplyColor"),this._shaderSets.at(6).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_screenColor"),this._shaderSets.at(7).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_position"),this._shaderSets.at(7).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_texCoord"),this._shaderSets.at(7).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"s_texture0"),this._shaderSets.at(7).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_matrix"),this._shaderSets.at(7).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_baseColor"),this._shaderSets.at(7).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_multiplyColor"),this._shaderSets.at(7).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_screenColor"),this._shaderSets.at(8).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_position"),this._shaderSets.at(8).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_texCoord"),this._shaderSets.at(8).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture0"),this._shaderSets.at(8).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture1"),this._shaderSets.at(8).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_matrix"),this._shaderSets.at(8).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_clipMatrix"),this._shaderSets.at(8).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_channelFlag"),this._shaderSets.at(8).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_baseColor"),this._shaderSets.at(8).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_multiplyColor"),this._shaderSets.at(8).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_screenColor"),this._shaderSets.at(9).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_position"),this._shaderSets.at(9).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_texCoord"),this._shaderSets.at(9).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture0"),this._shaderSets.at(9).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture1"),this._shaderSets.at(9).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_matrix"),this._shaderSets.at(9).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_clipMatrix"),this._shaderSets.at(9).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_channelFlag"),this._shaderSets.at(9).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_baseColor"),this._shaderSets.at(9).uniformMultiplyColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_multiplyColor"),this._shaderSets.at(9).uniformScreenColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_screenColor")}loadShaderProgram(i,s){let o=this.gl.createProgram(),m=this.compileShaderSource(this.gl.VERTEX_SHADER,i);if(!m)return we("Vertex shader compile error!"),0;let w=this.compileShaderSource(this.gl.FRAGMENT_SHADER,s);return w?(this.gl.attachShader(o,m),this.gl.attachShader(o,w),this.gl.linkProgram(o),this.gl.getProgramParameter(o,this.gl.LINK_STATUS)?(this.gl.deleteShader(m),this.gl.deleteShader(w),o):(we("Failed to link program: {0}",o),this.gl.deleteShader(m),m=0,this.gl.deleteShader(w),w=0,o&&(this.gl.deleteProgram(o),o=0),0)):(we("Vertex shader compile error!"),0)}compileShaderSource(i,s){const o=s,m=this.gl.createShader(i);if(this.gl.shaderSource(m,o),this.gl.compileShader(m),!m){const T=this.gl.getShaderInfoLog(m);we("Shader compile log: {0} ",T)}return this.gl.getShaderParameter(m,this.gl.COMPILE_STATUS)?m:(this.gl.deleteShader(m),null)}setGl(i){this.gl=i}_shaderSets;gl}class kr{shaderProgram;attributePositionLocation;attributeTexCoordLocation;uniformMatrixLocation;uniformClipMatrixLocation;samplerTexture0Location;samplerTexture1Location;uniformBaseColorLocation;uniformChannelFlagLocation;uniformMultiplyColorLocation;uniformScreenColorLocation}var Ka=(c=>(c[c.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",c[c.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",c[c.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",c[c.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",c[c.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",c[c.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",c[c.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",c[c.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",c[c.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",c[c.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted",c))(Ka||{});const H2="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",W2="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",Z2="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",Qa="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",J2="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 color = texColor * u_baseColor;   gl_FragColor = vec4(color.rgb, color.a);}",q2="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;uniform vec4       u_multiplyColor;uniform vec4       u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",$2="precision mediump float;varying vec2      v_texCoord;varying vec4      v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4      u_channelFlag;uniform vec4      u_baseColor;uniform vec4      u_multiplyColor;uniform vec4      u_screenColor;void main(){   vec4 texColor = texture2D(s_texture0, v_texCoord);   texColor.rgb = texColor.rgb * u_multiplyColor.rgb;   texColor.rgb = (texColor.rgb + u_screenColor.rgb * texColor.a) - (texColor.rgb * u_screenColor.rgb);   vec4 col_formask = texColor * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * (1.0 - maskVal);   gl_FragColor = col_formask;}";class Br extends v0{initialize(i,s=1){i.isUsingMasking()&&(this._clippingManager=new Mr,this._clippingManager.initialize(i,i.getDrawableCount(),i.getDrawableMasks(),i.getDrawableMaskCounts(),s)),this._sortedDrawableIndexList.resize(i.getDrawableCount(),0),super.initialize(i)}bindTexture(i,s){this._textures.setValue(i,s)}getBindedTextures(){return this._textures}setClippingMaskBufferSize(i){if(!this._model.isUsingMasking())return;const s=this._clippingManager.getRenderTextureCount();this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this._clippingManager=new Mr,this._clippingManager.setClippingMaskBufferSize(i),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts(),s)}getClippingMaskBufferSize(){return this._model.isUsingMasking()?this._clippingManager.getClippingMaskBufferSize():-1}getRenderTextureCount(){return this._model.isUsingMasking()?this._clippingManager.getRenderTextureCount():-1}constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._rendererProfile=new j2,this.firstDraw=!0,this._textures=new Me,this._sortedDrawableIndexList=new wt,this._bufferData={vertex:WebGLBuffer=null,uv:WebGLBuffer=null,index:WebGLBuffer=null},this._textures.prepareCapacity(32,!0)}release(){this._clippingManager&&(this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null),this.gl!=null&&(this.gl.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,this.gl.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,this.gl.deleteBuffer(this._bufferData.index),this._bufferData.index=null,this._bufferData=null,this._textures=null)}doDrawModel(){if(this.gl==null){we(`'gl' is null. WebGLRenderingContext is required.
Please call 'CubimRenderer_WebGL.startUp' function.`);return}this._clippingManager!=null&&(this.preDraw(),this._clippingManager.setupClippingContext(this.getModel(),this)),this.preDraw();const i=this.getModel().getDrawableCount(),s=this.getModel().getDrawableRenderOrders();for(let o=0;o<i;++o){const m=s[o];this._sortedDrawableIndexList.set(m,o)}for(let o=0;o<i;++o){const m=this._sortedDrawableIndexList.at(o);if(!this.getModel().getDrawableDynamicFlagIsVisible(m))continue;const w=this._clippingManager!=null?this._clippingManager.getClippingContextListForDraw().at(m):null;if(w!=null&&this.isUsingHighPrecisionMask()){w._isUsing&&(this.gl.viewport(0,0,this._clippingManager.getClippingMaskBufferSize(),this._clippingManager.getClippingMaskBufferSize()),this.preDraw(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,w.getClippingManager().getMaskRenderTexture().at(w._bufferIndex)),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT));{const T=w._clippingIdCount;for(let I=0;I<T;I++){const N=w._clippingIdList[I];this._model.getDrawableDynamicFlagVertexPositionsDidChange(N)&&(this.setIsCulling(this._model.getDrawableCulling(N)!=!1),this.setClippingContextBufferForMask(w),this.drawMesh(this.getModel().getDrawableTextureIndex(N),this.getModel().getDrawableVertexIndexCount(N),this.getModel().getDrawableVertexCount(N),this.getModel().getDrawableVertexIndices(N),this.getModel().getDrawableVertices(N),this.getModel().getDrawableVertexUvs(N),this.getModel().getMultiplyColor(N),this.getModel().getScreenColor(N),this.getModel().getDrawableOpacity(N),Ne.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,N0),this.setClippingContextBufferForMask(null),this.gl.viewport(Qe[0],Qe[1],Qe[2],Qe[3]),this.preDraw()}this.setClippingContextBufferForDraw(w),this.setIsCulling(this.getModel().getDrawableCulling(m)),this.drawMesh(this.getModel().getDrawableTextureIndex(m),this.getModel().getDrawableVertexIndexCount(m),this.getModel().getDrawableVertexCount(m),this.getModel().getDrawableVertexIndices(m),this.getModel().getDrawableVertices(m),this.getModel().getDrawableVertexUvs(m),this.getModel().getMultiplyColor(m),this.getModel().getScreenColor(m),this.getModel().getDrawableOpacity(m),this.getModel().getDrawableBlendMode(m),this.getModel().getDrawableInvertedMaskBit(m))}}drawMesh(i,s,o,m,w,T,I,N,D,V,A){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);const G=this.getModelColor();this.getClippingContextBufferForMask()==null&&(G.A*=D,this.isPremultipliedAlpha()&&(G.R*=G.A,G.G*=G.A,G.B*=G.A));let W;this._textures.getValue(i)!=null?W=this._textures.getValue(i):W=null,Ni.getInstance().setupShaderProgram(this,W,o,w,m,T,this._bufferData,D,V,G,I,N,this.isPremultipliedAlpha(),this.getMvpMatrix(),A),this.gl.drawElements(this.gl.TRIANGLES,s,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}saveProfile(){this._rendererProfile.save()}restoreProfile(){this._rendererProfile.restore()}static doStaticRelease(){Ni.deleteInstance()}setRenderState(i,s){N0=i,Qe=s}preDraw(){if(this.firstDraw&&(this.firstDraw=!1),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null),this.getAnisotropy()>0&&this._extension)for(let i=0;i<this._textures.getSize();++i)this.gl.bindTexture(this.gl.TEXTURE_2D,this._textures.getValue(i)),this.gl.texParameterf(this.gl.TEXTURE_2D,this._extension.TEXTURE_MAX_ANISOTROPY_EXT,this.getAnisotropy())}setClippingContextBufferForMask(i){this._clippingContextBufferForMask=i}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(i){this._clippingContextBufferForDraw=i}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(i){this.gl=i,this._clippingManager&&this._clippingManager.setGL(i),Ni.getInstance().setGl(i),this._rendererProfile.setGl(i),this._extension=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")}_textures;_sortedDrawableIndexList;_clippingManager;_clippingContextBufferForMask;_clippingContextBufferForDraw;_rendererProfile;firstDraw;_bufferData;_extension;gl}v0.staticRelease=()=>{Br.doStaticRelease()};var tn;(c=>{c.CubismClippingContext=$a,c.CubismClippingManager_WebGL=Mr,c.CubismRenderTextureResource=qa,c.CubismRenderer_WebGL=Br,c.CubismShaderSet=kr,c.CubismShader_WebGL=Ni,c.ShaderNames=Ka})(tn||(tn={}));class en{isOverwritten=!1;Color=new qe}class rn{constructor(i=!1,s=!1){i=this.isOverwritten,s=this.isCulling}isOverwritten;isCulling}class sn{update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getPixelsPerUnit(){return this._model==null?0:this._model.canvasinfo.PixelsPerUnit}getCanvasWidth(){return this._model==null?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return this._model==null?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const i=this._model.parameters.count,s=this._savedParameters.getSize();for(let o=0;o<i;++o)o<s?this._savedParameters.set(o,this._parameterValues[o]):this._savedParameters.pushBack(this._parameterValues[o])}getMultiplyColor(i){return this.getOverwriteFlagForModelMultiplyColors()||this.getOverwriteFlagForDrawableMultiplyColors(i)?this._userMultiplyColors.at(i).Color:this.getDrawableMultiplyColor(i)}getScreenColor(i){return this.getOverwriteFlagForModelScreenColors()||this.getOverwriteFlagForDrawableScreenColors(i)?this._userScreenColors.at(i).Color:this.getDrawableScreenColor(i)}setMultiplyColorByTextureColor(i,s){this.setMultiplyColorByRGBA(i,s.R,s.G,s.B,s.A)}setMultiplyColorByRGBA(i,s,o,m,w=1){this._userMultiplyColors.at(i).Color.R=s,this._userMultiplyColors.at(i).Color.G=o,this._userMultiplyColors.at(i).Color.B=m,this._userMultiplyColors.at(i).Color.A=w}setScreenColorByTextureColor(i,s){this.setScreenColorByRGBA(i,s.R,s.G,s.B,s.A)}setScreenColorByRGBA(i,s,o,m,w=1){this._userScreenColors.at(i).Color.R=s,this._userScreenColors.at(i).Color.G=o,this._userScreenColors.at(i).Color.B=m,this._userScreenColors.at(i).Color.A=w}getOverwriteFlagForModelMultiplyColors(){return this._isOverwrittenModelMultiplyColors}getOverwriteFlagForModelScreenColors(){return this._isOverwrittenModelScreenColors}setOverwriteFlagForModelMultiplyColors(i){this._isOverwrittenModelMultiplyColors=i}setOverwriteFlagForModelScreenColors(i){this._isOverwrittenModelScreenColors=i}getOverwriteFlagForDrawableMultiplyColors(i){return this._userMultiplyColors.at(i).isOverwritten}getOverwriteFlagForDrawableScreenColors(i){return this._userMultiplyColors.at(i).isOverwritten}setOverwriteFlagForDrawableMultiplyColors(i,s){this._userMultiplyColors.at(i).isOverwritten=s}setOverwriteFlagForDrawableScreenColors(i,s){this._userScreenColors.at(i).isOverwritten=s}getDrawableCulling(i){if(this.getOverwriteFlagForModelCullings()||this.getOverwriteFlagForDrawableCullings(i))return this._userCullings.at(i).isCulling;const s=this._model.drawables.constantFlags;return!ne.Utils.hasIsDoubleSidedBit(s[i])}setDrawableCulling(i,s){this._userCullings.at(i).isCulling=s}getOverwriteFlagForModelCullings(){return this._isOverwrittenCullings}setOverwriteFlagForModelCullings(i){this._isOverwrittenCullings=i}getOverwriteFlagForDrawableCullings(i){return this._userCullings.at(i).isOverwritten}setOverwriteFlagForDrawableCullings(i,s){this._userCullings.at(i).isOverwritten=s}getModel(){return this._model}getPartIndex(i){let s;const o=this._model.parts.count;for(s=0;s<o;++s)if(i==this._partIds.at(s))return s;return this._notExistPartId.isExist(i)?this._notExistPartId.getValue(i):(s=o+this._notExistPartId.getSize(),this._notExistPartId.setValue(i,s),this._notExistPartOpacities.appendKey(s),s)}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(i,s){if(this._notExistPartOpacities.isExist(i)){this._notExistPartOpacities.setValue(i,s);return}ze(0<=i&&i<this.getPartCount()),this._partOpacities[i]=s}setPartOpacityById(i,s){const o=this.getPartIndex(i);o<0||this.setPartOpacityByIndex(o,s)}getPartOpacityByIndex(i){return this._notExistPartOpacities.isExist(i)?this._notExistPartOpacities.getValue(i):(ze(0<=i&&i<this.getPartCount()),this._partOpacities[i])}getPartOpacityById(i){const s=this.getPartIndex(i);return s<0?0:this.getPartOpacityByIndex(s)}getParameterIndex(i){let s;const o=this._model.parameters.count;for(s=0;s<o;++s)if(i==this._parameterIds.at(s))return s;return this._notExistParameterId.isExist(i)?this._notExistParameterId.getValue(i):(s=this._model.parameters.count+this._notExistParameterId.getSize(),this._notExistParameterId.setValue(i,s),this._notExistParameterValues.appendKey(s),s)}getParameterCount(){return this._model.parameters.count}getParameterType(i){return this._model.parameters.types[i]}getParameterMaximumValue(i){return this._model.parameters.maximumValues[i]}getParameterMinimumValue(i){return this._model.parameters.minimumValues[i]}getParameterDefaultValue(i){return this._model.parameters.defaultValues[i]}getParameterValueByIndex(i){return this._notExistParameterValues.isExist(i)?this._notExistParameterValues.getValue(i):(ze(0<=i&&i<this.getParameterCount()),this._parameterValues[i])}getParameterValueById(i){const s=this.getParameterIndex(i);return this.getParameterValueByIndex(s)}setParameterValueByIndex(i,s,o=1){if(this._notExistParameterValues.isExist(i)){this._notExistParameterValues.setValue(i,o==1?s:this._notExistParameterValues.getValue(i)*(1-o)+s*o);return}ze(0<=i&&i<this.getParameterCount()),this._model.parameters.maximumValues[i]<s&&(s=this._model.parameters.maximumValues[i]),this._model.parameters.minimumValues[i]>s&&(s=this._model.parameters.minimumValues[i]),this._parameterValues[i]=o==1?s:this._parameterValues[i]=this._parameterValues[i]*(1-o)+s*o}setParameterValueById(i,s,o=1){const m=this.getParameterIndex(i);this.setParameterValueByIndex(m,s,o)}addParameterValueByIndex(i,s,o=1){this.setParameterValueByIndex(i,this.getParameterValueByIndex(i)+s*o)}addParameterValueById(i,s,o=1){const m=this.getParameterIndex(i);this.addParameterValueByIndex(m,s,o)}multiplyParameterValueById(i,s,o=1){const m=this.getParameterIndex(i);this.multiplyParameterValueByIndex(m,s,o)}multiplyParameterValueByIndex(i,s,o=1){this.setParameterValueByIndex(i,this.getParameterValueByIndex(i)*(1+(s-1)*o))}getDrawableIndex(i){const s=this._model.drawables.count;for(let o=0;o<s;++o)if(this._drawableIds.at(o)==i)return o;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(i){const s=this._model.drawables.ids;return Wt.getIdManager().getId(s[i])}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(i){return this.getDrawableTextureIndex(i)}getDrawableTextureIndex(i){return this._model.drawables.textureIndices[i]}getDrawableDynamicFlagVertexPositionsDidChange(i){const s=this._model.drawables.dynamicFlags;return ne.Utils.hasVertexPositionsDidChangeBit(s[i])}getDrawableVertexIndexCount(i){return this._model.drawables.indexCounts[i]}getDrawableVertexCount(i){return this._model.drawables.vertexCounts[i]}getDrawableVertices(i){return this.getDrawableVertexPositions(i)}getDrawableVertexIndices(i){return this._model.drawables.indices[i]}getDrawableVertexPositions(i){return this._model.drawables.vertexPositions[i]}getDrawableVertexUvs(i){return this._model.drawables.vertexUvs[i]}getDrawableOpacity(i){return this._model.drawables.opacities[i]}getDrawableMultiplyColor(i){const s=this._model.drawables.multiplyColors,o=i*4,m=new qe;return m.R=s[o],m.G=s[o+1],m.B=s[o+2],m.A=s[o+3],m}getDrawableScreenColor(i){const s=this._model.drawables.screenColors,o=i*4,m=new qe;return m.R=s[o],m.G=s[o+1],m.B=s[o+2],m.A=s[o+3],m}getDrawableParentPartIndex(i){return this._model.drawables.parentPartIndices[i]}getDrawableBlendMode(i){const s=this._model.drawables.constantFlags;return ne.Utils.hasBlendAdditiveBit(s[i])?Ne.CubismBlendMode_Additive:ne.Utils.hasBlendMultiplicativeBit(s[i])?Ne.CubismBlendMode_Multiplicative:Ne.CubismBlendMode_Normal}getDrawableInvertedMaskBit(i){const s=this._model.drawables.constantFlags;return ne.Utils.hasIsInvertedMaskBit(s[i])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let i=0;i<this._model.drawables.count;++i)if(!(this._model.drawables.maskCounts[i]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(i){const s=this._model.drawables.dynamicFlags;return ne.Utils.hasIsVisibleBit(s[i])}getDrawableDynamicFlagVisibilityDidChange(i){const s=this._model.drawables.dynamicFlags;return ne.Utils.hasVisibilityDidChangeBit(s[i])}getDrawableDynamicFlagOpacityDidChange(i){const s=this._model.drawables.dynamicFlags;return ne.Utils.hasOpacityDidChangeBit(s[i])}getDrawableDynamicFlagRenderOrderDidChange(i){const s=this._model.drawables.dynamicFlags;return ne.Utils.hasRenderOrderDidChangeBit(s[i])}getDrawableDynamicFlagBlendColorDidChange(i){const s=this._model.drawables.dynamicFlags;return ne.Utils.hasBlendColorDidChangeBit(s[i])}loadParameters(){let i=this._model.parameters.count;const s=this._savedParameters.getSize();i>s&&(i=s);for(let o=0;o<i;++o)this._parameterValues[o]=this._savedParameters.at(o)}initialize(){ze(this._model),this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const i=this._model.parameters.ids,s=this._model.parameters.count;this._parameterIds.prepareCapacity(s);for(let o=0;o<s;++o)this._parameterIds.pushBack(Wt.getIdManager().getId(i[o]))}{const i=this._model.parts.ids,s=this._model.parts.count;this._partIds.prepareCapacity(s);for(let o=0;o<s;++o)this._partIds.pushBack(Wt.getIdManager().getId(i[o]))}{const i=this._model.drawables.ids,s=this._model.drawables.count;this._userMultiplyColors=new wt,this._userMultiplyColors.updateSize(s,en,!0),this._userScreenColors=new wt,this._userScreenColors.updateSize(s,en,!0),this._userCullings=new wt,this._userCullings.updateSize(s,rn,!0);const o=new rn(!1,!1);this._drawableIds.prepareCapacity(s);for(let m=0;m<s;++m)this._drawableIds.pushBack(Wt.getIdManager().getId(i[m])),this.setMultiplyColorByRGBA(m,1,1,1,1),this.setScreenColorByRGBA(m,0,0,0,1),this._userCullings.pushBack(o)}}constructor(i){this._model=i,this._parameterValues=null,this._parameterMaximumValues=null,this._parameterMinimumValues=null,this._partOpacities=null,this._savedParameters=new wt,this._parameterIds=new wt,this._drawableIds=new wt,this._partIds=new wt,this._isOverwrittenModelMultiplyColors=!1,this._isOverwrittenModelScreenColors=!1,this._isOverwrittenCullings=!1,this._userMultiplyColors=null,this._userScreenColors=null,this._notExistPartId=new Me,this._notExistParameterId=new Me,this._notExistParameterValues=new Me,this._notExistPartOpacities=new Me}release(){this._model.release(),this._model=null}_notExistPartOpacities;_notExistPartId;_notExistParameterValues;_notExistParameterId;_savedParameters;_isOverwrittenModelMultiplyColors;_isOverwrittenModelScreenColors;_userMultiplyColors;_userScreenColors;_model;_parameterValues;_parameterMaximumValues;_parameterMinimumValues;_partOpacities;_parameterIds;_partIds;_drawableIds;_isOverwrittenCullings;_userCullings}var an;(c=>{c.CubismModel=sn})(an||(an={}));class Y0{static create(i){let s=null;const o=ne.Moc.fromArrayBuffer(i);return o&&(s=new Y0(o),s._mocVersion=ne.Version.csmGetMocVersion(o,i)),s}static delete(i){i._moc._release(),i._moc=null,i=null}createModel(){let i=null;const s=ne.Model.fromMoc(this._moc);return s&&(i=new sn(s),i.initialize(),++this._modelCount),i}deleteModel(i){i!=null&&(i.release(),i=null,--this._modelCount)}constructor(i){this._moc=i,this._modelCount=0,this._mocVersion=0}release(){ze(this._modelCount==0),this._moc._release(),this._moc=null}getLatestMocVersion(){return ne.Version.csmGetLatestMocVersion()}getMocVersion(){return this._mocVersion}static hasMocConsistency(i){return ne.Moc.prototype.hasMocConsistency(i)===1}_moc;_modelCount;_mocVersion}var nn;(c=>{c.CubismMoc=Y0})(nn||(nn={}));const on="Meta",K2="UserDataCount",Q2="TotalUserDataSize",Pr="UserData",tl="Target",el="Id",il="Value";class ln{constructor(i,s){this._json=pe.create(i,s)}release(){pe.delete(this._json)}getUserDataCount(){return this._json.getRoot().getValueByString(on).getValueByString(K2).toInt()}getTotalUserDataSize(){return this._json.getRoot().getValueByString(on).getValueByString(Q2).toInt()}getUserDataTargetType(i){return this._json.getRoot().getValueByString(Pr).getValueByIndex(i).getValueByString(tl).getRawString()}getUserDataId(i){return Wt.getIdManager().getId(this._json.getRoot().getValueByString(Pr).getValueByIndex(i).getValueByString(el).getRawString())}getUserDataValue(i){return this._json.getRoot().getValueByString(Pr).getValueByIndex(i).getValueByString(il).getRawString()}_json}var un;(c=>{c.CubismModelUserDataJson=ln})(un||(un={}));const rl="ArtMesh";class hn{targetType;targetId;value}class f0{static create(i,s){const o=new f0;return o.parseUserData(i,s),o}static delete(i){i!=null&&(i.release(),i=null)}getArtMeshUserDatas(){return this._artMeshUserDataNode}parseUserData(i,s){let o=new ln(i,s);const m=Wt.getIdManager().getId(rl),w=o.getUserDataCount();for(let T=0;T<w;T++){const I=new hn;I.targetId=o.getUserDataId(T),I.targetType=Wt.getIdManager().getId(o.getUserDataTargetType(T)),I.value=new Ve(o.getUserDataValue(T)),this._userDataNodes.pushBack(I),I.targetType==m&&this._artMeshUserDataNode.pushBack(I)}o.release(),o=void 0}constructor(){this._userDataNodes=new wt,this._artMeshUserDataNode=new wt}release(){for(let i=0;i<this._userDataNodes.getSize();++i)this._userDataNodes.set(i,null);this._userDataNodes=null}_userDataNodes;_artMeshUserDataNode}var cn;(c=>{c.CubismModelUserData=f0,c.CubismModelUserDataNode=hn})(cn||(cn={}));class j0{isInitialized(){return this._initialized}setInitialized(i){this._initialized=i}isUpdating(){return this._updating}setUpdating(i){this._updating=i}setDragging(i,s){this._dragManager.set(i,s)}setAcceleration(i,s,o){this._accelerationX=i,this._accelerationY=s,this._accelerationZ=o}getModelMatrix(){return this._modelMatrix}setOpacity(i){this._opacity=i}getOpacity(){return this._opacity}loadModel(i){if(this._moc=Y0.create(i),this._moc==null){we("Failed to CubismMoc.create().");return}if(this._model=this._moc.createModel(),this._model==null){we("Failed to CreateModel().");return}this._model.saveParameters(),this._modelMatrix=new qs(this._model.getCanvasWidth(),this._model.getCanvasHeight())}loadMotion=(i,s,o,m)=>X0.create(i,s,m);loadExpression(i,s,o){return G0.create(i,s)}loadPose(i,s){this._pose=u0.create(i,s)}loadUserData(i,s){this._modelUserData=f0.create(i,s)}loadPhysics(i,s){this._physics=c0.create(i,s)}isHit(i,s,o){const m=this._model.getDrawableIndex(i);if(m<0)return!1;const w=this._model.getDrawableVertexCount(m),T=this._model.getDrawableVertices(m);let I=T[0],N=T[0],D=T[1],V=T[1];for(let W=1;W<w;++W){const q=T[si.vertexOffset+W*si.vertexStep],et=T[si.vertexOffset+W*si.vertexStep+1];q<I&&(I=q),q>N&&(N=q),et<D&&(D=et),et>V&&(V=et)}const A=this._modelMatrix.invertTransformX(s),G=this._modelMatrix.invertTransformY(o);return I<=A&&A<=N&&D<=G&&G<=V}getModel(){return this._model}getRenderer(){return this._renderer}createRenderer(i=1){this._renderer&&this.deleteRenderer(),this._renderer=new Br,this._renderer.initialize(this._model,i)}deleteRenderer(){this._renderer!=null&&(this._renderer.release(),this._renderer=null)}motionEventFired(i){$e("{0}",i.s)}static cubismDefaultMotionEventCallback(i,s,o){const m=o;m?.motionEventFired(s)}constructor(){this._moc=null,this._model=null,this._motionManager=null,this._expressionManager=null,this._eyeBlink=null,this._breath=null,this._modelMatrix=null,this._pose=null,this._dragManager=null,this._physics=null,this._modelUserData=null,this._initialized=!1,this._updating=!1,this._opacity=1,this._lipsync=!0,this._lastLipSyncValue=0,this._dragX=0,this._dragY=0,this._accelerationX=0,this._accelerationY=0,this._accelerationZ=0,this._debugMode=!1,this._renderer=null,this._motionManager=new a0,this._motionManager.setEventCallback(j0.cubismDefaultMotionEventCallback,this),this._expressionManager=new a0,this._dragManager=new ea}release(){this._motionManager!=null&&(this._motionManager.release(),this._motionManager=null),this._expressionManager!=null&&(this._expressionManager.release(),this._expressionManager=null),this._moc!=null&&(this._moc.deleteModel(this._model),this._moc.release(),this._moc=null),this._modelMatrix=null,u0.delete(this._pose),zi.delete(this._eyeBlink),l0.delete(this._breath),this._dragManager=null,c0.delete(this._physics),f0.delete(this._modelUserData),this.deleteRenderer()}_moc;_model;_motionManager;_expressionManager;_eyeBlink;_breath;_modelMatrix;_pose;_dragManager;_physics;_modelUserData;_initialized;_updating;_opacity;_lipsync;_lastLipSyncValue;_dragX;_dragY;_accelerationX;_accelerationY;_accelerationZ;_debugMode;_renderer}var fn;(c=>{c.CubismUserModel=j0})(fn||(fn={}));class qt{static lastUpdate=Date.now();static _currentFrame=0;static _lastFrame=0;static _deltaTime=0;static loadFileAsBytes(i,s){fetch(i).then(o=>o.arrayBuffer()).then(o=>s(o,o.byteLength))}static getDeltaTime(){return this._deltaTime}static updateTime(){this._currentFrame=Date.now(),this._deltaTime=(this._currentFrame-this._lastFrame)/1e3,this._lastFrame=this._currentFrame}static printMessage(i){Se.debug&&console.log(i)}}class Ir{static _instance=null;_pcmData;_userTimeSeconds;_lastRms;_sampleOffset;_wavFileInfo;_byteReader;_audio;_audioPlayPromise;constructor(){this._pcmData=null,this._userTimeSeconds=0,this._lastRms=0,this._sampleOffset=0,this._wavFileInfo=new sl,this._byteReader=new al,this._audio=new Audio}_loadFileToBytes=i=>{this._byteReader._fileByte=i,this._byteReader._fileDataView=new DataView(this._byteReader._fileByte),this._byteReader._fileSize=this._byteReader._fileByte.byteLength,this._byteReader._readOffset=0};static getInstance(){return this._instance==null&&(this._instance=new Ir),this._instance}static releaseInstance(){this._instance!=null&&(this._instance=void 0),this._instance=null}update(i){let s,o;if(this._pcmData==null||this._sampleOffset>=this._wavFileInfo._samplesPerChannel)return this._lastRms=0,!1;this._userTimeSeconds+=i,s=Math.floor(this._userTimeSeconds*this._wavFileInfo._samplingRate),s>this._wavFileInfo._samplesPerChannel&&(s=this._wavFileInfo._samplesPerChannel),o=0;for(let m=0;m<this._wavFileInfo._numberOfChannels;m++)for(let w=this._sampleOffset;w<s;w++){const T=this._pcmData[m][w];o+=T*T}return o=Math.sqrt(o/(this._wavFileInfo._numberOfChannels*(s-this._sampleOffset))),this._lastRms=o,this._sampleOffset=s,!0}async start(i){return this._sampleOffset=0,this._userTimeSeconds=0,this._lastRms=0,this.playWavFile(i),await this.loadWavFile(i)}getRms(){return this._lastRms}async loadWavFile(i){let s=!1;this._pcmData!=null&&this.releasePcmData();const o=async()=>fetch(i).then(m=>m.arrayBuffer());if(this._loadFileToBytes(await o()),this._byteReader._fileSize<4)return!1;this._wavFileInfo._fileName=i;try{if(!this._byteReader.getCheckSignature("RIFF"))throw s=!1,new Error('Cannot find Signeture "RIFF".');if(this._byteReader.get32LittleEndian(),!this._byteReader.getCheckSignature("WAVE"))throw s=!1,new Error('Cannot find Signeture "WAVE".');if(!this._byteReader.getCheckSignature("fmt "))throw s=!1,new Error('Cannot find Signeture "fmt".');const m=this._byteReader.get32LittleEndian();if(this._byteReader.get16LittleEndian()!=1)throw s=!1,new Error("File is not linear PCM.");for(this._wavFileInfo._numberOfChannels=this._byteReader.get16LittleEndian(),this._wavFileInfo._samplingRate=this._byteReader.get32LittleEndian(),this._byteReader.get32LittleEndian(),this._byteReader.get16LittleEndian(),this._wavFileInfo._bitsPerSample=this._byteReader.get16LittleEndian(),m>16&&(this._byteReader._readOffset+=m-16);!this._byteReader.getCheckSignature("data")&&this._byteReader._readOffset<this._byteReader._fileSize;)this._byteReader._readOffset+=this._byteReader.get32LittleEndian()+4;if(this._byteReader._readOffset>=this._byteReader._fileSize)throw s=!1,new Error('Cannot find "data" Chunk.');{const w=this._byteReader.get32LittleEndian();this._wavFileInfo._samplesPerChannel=w*8/(this._wavFileInfo._bitsPerSample*this._wavFileInfo._numberOfChannels)}this._pcmData=new Array(this._wavFileInfo._numberOfChannels);for(let w=0;w<this._wavFileInfo._numberOfChannels;w++)this._pcmData[w]=new Float32Array(this._wavFileInfo._samplesPerChannel);for(let w=0;w<this._wavFileInfo._samplesPerChannel;w++)for(let T=0;T<this._wavFileInfo._numberOfChannels;T++)this._pcmData[T][w]=this.getPcmSample();s=!0}catch(m){console.error(m)}return s}playWavFile(i){this._audio.src=i,this._audioPlayPromise=this._audio.play()}getPcmSample(){let i;switch(this._wavFileInfo._bitsPerSample){case 8:i=this._byteReader.get8()-128,i<<=24;break;case 16:i=this._byteReader.get16LittleEndian()<<16;break;case 24:i=this._byteReader.get24LittleEndian()<<8;break;default:i=0;break}return i/2147483647}releasePcmData(){for(let i=0;i<this._wavFileInfo._numberOfChannels;i++)delete this._pcmData[i];delete this._pcmData,this._pcmData=null}release(){this._audioPlayPromise?.then(()=>this._audio.pause())}}class sl{_fileName;_numberOfChannels;_bitsPerSample;_samplingRate;_samplesPerChannel;constructor(){this._fileName="",this._numberOfChannels=0,this._bitsPerSample=0,this._samplingRate=0,this._samplesPerChannel=0}}class al{_fileByte;_fileDataView;_fileSize;_readOffset;constructor(){this._fileByte=null,this._fileDataView=null,this._fileSize=0,this._readOffset=0}get8(){const i=this._fileDataView.getUint8(this._readOffset);return this._readOffset++,i}get16LittleEndian(){const i=this._fileDataView.getUint8(this._readOffset+1)<<8|this._fileDataView.getUint8(this._readOffset);return this._readOffset+=2,i}get24LittleEndian(){const i=this._fileDataView.getUint8(this._readOffset+2)<<16|this._fileDataView.getUint8(this._readOffset+1)<<8|this._fileDataView.getUint8(this._readOffset);return this._readOffset+=3,i}get32LittleEndian(){const i=this._fileDataView.getUint8(this._readOffset+3)<<24|this._fileDataView.getUint8(this._readOffset+2)<<16|this._fileDataView.getUint8(this._readOffset+1)<<8|this._fileDataView.getUint8(this._readOffset);return this._readOffset+=4,i}getCheckSignature(i){const s=new Uint8Array(4),o=new TextEncoder().encode(i);if(i.length!=4)return!1;for(let m=0;m<4;m++)s[m]=this.get8();return s[0]==o[0]&&s[1]==o[1]&&s[2]==o[2]&&s[3]==o[3]}}class nl extends j0{get modelSetting(){return this._modelSetting}_modelSetting;_modelHomeDir;_userTimeSeconds;_eyeBlinkIds;_lipSyncIds;_motions;_expressions;_hitArea;_userArea;_idParamAngleX;_idParamAngleY;_idParamAngleZ;_idParamEyeBallX;_idParamEyeBallY;_idParamBodyAngleX;_state;_expressionCount;_textureCount;_motionCount;_allMotionCount;_wavFileHandler;_rightArmMotionManager;_leftArmMotionManager;constructor(){super(),this._modelSetting=null,this._modelHomeDir=null,this._userTimeSeconds=0,this._eyeBlinkIds=new wt,this._lipSyncIds=new wt,this._motions=new Me,this._expressions=new Me,this._hitArea=new wt,this._userArea=new wt,this._idParamAngleX=Wt.getIdManager().getId(St.ParamAngleX),this._idParamAngleY=Wt.getIdManager().getId(St.ParamAngleY),this._idParamAngleZ=Wt.getIdManager().getId(St.ParamAngleZ),this._idParamEyeBallX=Wt.getIdManager().getId(St.ParamEyeBallX),this._idParamEyeBallY=Wt.getIdManager().getId(St.ParamEyeBallY),this._idParamBodyAngleX=Wt.getIdManager().getId(St.ParamBodyAngleX),this._state=0,this._expressionCount=0,this._textureCount=0,this._motionCount=0,this._allMotionCount=0,this._wavFileHandler=new Ir,this._rightArmMotionManager=new a0,this._leftArmMotionManager=new a0}loadAssets(i,s){this._modelHomeDir=i,fetch(Ge.join(i,s)).then(o=>o.arrayBuffer()).then(o=>{const m=new Gs(o,o.byteLength);this._state=1,this.setupModel(m)})}setupModel(i){if(this._updating=!0,this._initialized=!1,this._modelSetting=i,this._modelSetting.getModelFileName()!=""){const G=this._modelSetting.getModelFileName();fetch(Ge.join(this._modelHomeDir,G)).then(W=>W.arrayBuffer()).then(W=>{this.loadModel(W),this._state=3,s()}),this._state=2}else qt.printMessage("Model data does not exist.");const s=()=>{if(this._modelSetting.getExpressionCount()>0){const G=this._modelSetting.getExpressionCount();for(let W=0;W<G;W++){const q=this._modelSetting.getExpressionName(W),et=this._modelSetting.getExpressionFileName(W);fetch(Ge.join(this._modelHomeDir,et)).then(K=>K.arrayBuffer()).then(K=>{const gt=this.loadExpression(K,K.byteLength,q);this._expressions.getValue(q)!=null&&(Li.delete(this._expressions.getValue(q)),this._expressions.setValue(q,null)),this._expressions.setValue(q,gt),this._expressionCount++,this._expressionCount>=G&&(this._state=5,o())})}this._state=4}else this._state=5,o()},o=()=>{if(this._modelSetting.getPhysicsFileName()!=""){const G=this._modelSetting.getPhysicsFileName();fetch(Ge.join(this._modelHomeDir,G)).then(W=>W.arrayBuffer()).then(W=>{this.loadPhysics(W,W.byteLength),this._state=7,m()}),this._state=6}else this._state=7,m()},m=()=>{if(this._modelSetting.getPoseFileName()!=""){const G=this._modelSetting.getPoseFileName();fetch(Ge.join(this._modelHomeDir,G)).then(W=>W.arrayBuffer()).then(W=>{this.loadPose(W,W.byteLength),this._state=9,w()}),this._state=8}else this._state=9,w()},w=()=>{this._modelSetting.getEyeBlinkParameterCount()>0&&(this._eyeBlink=zi.create(this._modelSetting),this._state=10),T()},T=()=>{this._breath=l0.create();const G=new wt;G.pushBack(new Di(this._idParamAngleX,0,15,6.5345,.5)),G.pushBack(new Di(this._idParamAngleY,0,8,3.5345,.5)),G.pushBack(new Di(this._idParamAngleZ,0,10,5.5345,.5)),G.pushBack(new Di(this._idParamBodyAngleX,0,4,15.5345,.5)),G.pushBack(new Di(Wt.getIdManager().getId(St.ParamBreath),.5,.5,3.2345,1)),this._breath.setParameters(G),this._state=11,I()},I=()=>{if(this._modelSetting.getUserDataFile()!=""){const G=this._modelSetting.getUserDataFile();fetch(Ge.join(this._modelHomeDir,G)).then(W=>W.arrayBuffer()).then(W=>{this.loadUserData(W,W.byteLength),this._state=13,N()}),this._state=12}else this._state=13,N()},N=()=>{const G=this._modelSetting.getEyeBlinkParameterCount();for(let W=0;W<G;++W)this._eyeBlinkIds.pushBack(this._modelSetting.getEyeBlinkParameterId(W));this._state=14,D()},D=()=>{const G=this._modelSetting.getLipSyncParameterCount();for(let W=0;W<G;++W)this._lipSyncIds.pushBack(this._modelSetting.getLipSyncParameterId(W));this._state=15,V()},V=()=>{const G=new Me;if(this._modelSetting==null||this._modelMatrix==null){we("Failed to setupLayout().");return}this._modelSetting.getLayoutMap(G),this._modelMatrix.setupFromLayout(G),this._state=16,A()},A=()=>{this._state=17,this._model.saveParameters(),this._allMotionCount=0,this._motionCount=0;const G=[],W=this._modelSetting.getMotionGroupCount();for(let q=0;q<W;q++)G[q]=this._modelSetting.getMotionGroupName(q),this._allMotionCount+=this._modelSetting.getMotionCount(G[q]);for(let q=0;q<W;q++)this.preLoadMotionGroup(G[q]);W==0&&this.reloadTextures()}}setupTextures(){if(this._state===20){const s=this._modelSetting.getTextureCount();for(let o=0;o<s;o++){if(this._modelSetting.getTextureFileName(o)==""){console.log("getTextureFileName null");continue}const m=this._modelSetting.getTextureFileName(o),w=Ge.join(this._modelHomeDir,m),T=I=>{this.getRenderer()?.bindTexture(o,I.id),this._textureCount++,this._textureCount>=s&&(this._state=22)};At.getInstance().getTextureManager().createTextureFromPngFile(w,!0,T),this.getRenderer()?.setIsPremultipliedAlpha(!0)}this._state=21}}reloadRenderer(){this.deleteRenderer(),this.createRenderer(),this.setupTextures()}update(){if(this._state!=22)return;const i=qt.getDeltaTime();this._userTimeSeconds+=i,this._dragManager.update(i),this._dragX=this._dragManager.getX(),this._dragY=this._dragManager.getY();let s=!1;if(this._model.loadParameters(),this._motionManager.isFinished())this.startRandomMotion(Ii.Idle,Je.Idle);else{const o=this._motionManager.updateMotion(this._model,i),m=this._rightArmMotionManager.updateMotion(this._model,i),w=this._leftArmMotionManager.updateMotion(this._model,i);s=[o,m,w].some(T=>T)}if(this._model.saveParameters(),s||this._eyeBlink?.updateParameters(this._model,i),this._expressionManager?.updateMotion(this._model,i),this._model.addParameterValueById(this._idParamAngleX,this._dragX*30),this._model.addParameterValueById(this._idParamAngleY,this._dragY*30),this._model.addParameterValueById(this._idParamAngleZ,this._dragX*this._dragY*-30),this._model.addParameterValueById(this._idParamBodyAngleX,this._dragX*10),this._model.addParameterValueById(this._idParamEyeBallX,this._dragX),this._model.addParameterValueById(this._idParamEyeBallY,this._dragY),this._breath?.updateParameters(this._model,i),this._physics?.evaluate(this._model,i),this._lipsync){this._wavFileHandler?.update(i);const o=this._wavFileHandler.getRms();for(let m=0;m<this._lipSyncIds.getSize();++m)this._model.addParameterValueById(this._lipSyncIds.at(m),o,.8)}this._pose?.updateParameters(this._model,i),this._model.update()}startMotion(i,s,o,m){if(o==Je.Force)this._motionManager.setReservePriority(o);else if(!this._motionManager.reserveMotion(o))return this._debugMode&&qt.printMessage("[APP]can't start motion."),yi;const{motion:w,autoDelete:T}=this.getMotion(i,s,m),I=this._modelSetting.getMotionSoundFileName(i,s);if(I.localeCompare("")!=0){let N=this._modelHomeDir+I;this._wavFileHandler.start(N).catch()}return this._debugMode&&qt.printMessage(`[APP]start motion: [${i}_${s}`),this._motionManager.startMotionPriority(w,T,o)}startRandomMotion(i,s,o){if(this._modelSetting.getMotionCount(i)==0)return yi;const m=Math.floor(Math.random()*this._modelSetting.getMotionCount(i));return this.startMotion(i,m,s,o)}getMotion(i,s,o){const m=this._modelSetting.getMotionFileName(i,s),w=`${i}_${s}`;let T=this._motions.getValue(w),I=!1;const N=Ge.join(this._modelHomeDir,m);return T==null?fetch(N).then(D=>D.arrayBuffer()).then(D=>{T=this.loadMotion(D,D.byteLength,null,o);let V=this._modelSetting.getMotionFadeInTimeValue(i,s);V>=0&&T.setFadeInTime(V),V=this._modelSetting.getMotionFadeOutTimeValue(i,s),V>=0&&T.setFadeOutTime(V),T.setEffectIds(this._eyeBlinkIds,this._lipSyncIds),I=!0}):T.setFinishedMotionHandler(o),{motion:T,autoDelete:I}}startHandMotion(i,s,o,m,w){if(m==Je.Force)i.setReservePriority(m);else if(!i.reserveMotion(m))return this._debugMode&&qt.printMessage("[APP]can't start motion."),yi;const{motion:T,autoDelete:I}=this.getMotion(s,o,w),N=this._modelSetting.getMotionSoundFileName(s,o);if(N.localeCompare("")!=0){let D=this._modelHomeDir+N;this._wavFileHandler.start(D).catch()}return this._debugMode&&qt.printMessage(`[APP]start motion: ${name}`),i.startMotionPriority(T,I,m)}startRandomRightHandMotion(i,s,o){if(this._modelSetting.getMotionCount(i)==0)return yi;let m=Math.floor(Math.random()*this._modelSetting.getMotionCount(i));return this.startHandMotion(this._rightArmMotionManager,i,m,s,o)}startRandomLeftHandMotion(i,s,o){if(this._modelSetting.getMotionCount(i)==0)return yi;let m=Math.floor(Math.random()*this._modelSetting.getMotionCount(i));return this.startHandMotion(this._leftArmMotionManager,i,m,s,o)}setExpression(i){const s=this._expressions.getValue(i);this._debugMode&&qt.printMessage(`[APP]expression: [${i}]`),s!=null?this._expressionManager.startMotionPriority(s,!1,Je.Force):this._debugMode&&qt.printMessage(`[APP]expression[${i}] is null`)}setRandomExpression(){if(this._expressions.getSize()==0)return;const i=Math.floor(Math.random()*this._expressions.getSize());for(let s=0;s<this._expressions.getSize();s++)if(s==i){const o=this._expressions._keyValues[s].first;this.setExpression(o);return}}motionEventFired(i){$e("{0} is fired on LAppModel!!",i.s)}hitOpacity(){return this._opacity<1}hitTest(i,s,o){if(this.hitOpacity())return!1;const m=this.modelSetting.getHitAreasCount();for(let w=0;w<m;w++)if(this.modelSetting.getHitAreaName(w)==i){const T=this.modelSetting.getHitAreaId(w);return this.isHit(T,s,o)}return!1}preLoadMotionGroup(i){for(let s=0;s<this._modelSetting.getMotionCount(i);s++){const o=this._modelSetting.getMotionFileName(i,s),m=`${i}_${s}`;this._debugMode&&qt.printMessage(`[APP]load motion: ${o} => [${m}]`),fetch(Ge.join(this._modelHomeDir,o)).then(w=>w.arrayBuffer()).then(w=>{const T=this.loadMotion(w,w.byteLength,m);let I=this._modelSetting.getMotionFadeInTimeValue(i,s);I>=0&&T.setFadeInTime(I),I=this._modelSetting.getMotionFadeOutTimeValue(i,s),I>=0&&T.setFadeOutTime(I),T.setEffectIds(this._eyeBlinkIds,this._lipSyncIds),this._motions.getValue(m)!=null&&Li.delete(this._motions.getValue(m)),this._motions.setValue(m,T),this._motionCount++,this._motionCount>=this._allMotionCount&&this.reloadTextures()})}}reloadTextures(){this._state=20,this._motionManager?.stopAllMotions(),this._updating=!1,this._initialized=!0,this.createRenderer(),this.setupTextures(),this.getRenderer().startUp(At.gl)}releaseMotions(){this._motions.clear()}releaseExpressions(){this._expressions.clear()}doDraw(){if(this._model==null)return;const i=[0,0,At.canvas.width,At.canvas.height];this.getRenderer().setRenderState(At.frameBuffer,i),this.getRenderer().drawModel()}draw(i){this._model!=null&&this._state==22&&(i.multiplyByMatrix(this._modelMatrix),this.getRenderer().setMvpMatrix(i),this.doDraw())}release(){this._leftArmMotionManager.release(),this._rightArmMotionManager.release(),this._wavFileHandler.release(),super.release()}}class hi{_viewMatrix;_models;_sceneIndex;static _instance=null;constructor(){this._viewMatrix=new oe,this._models=new wt,this._sceneIndex=0,this.changeScene(this._sceneIndex)}_finishedMotion=i=>{qt.printMessage("Motion Finished: OK")};static getInstance(){return this._instance==null&&(this._instance=new hi),this._instance}static releaseInstance(){this._instance!=null&&(this._instance=void 0),this._instance=null}getModel(i){return i<this._models.getSize()?this._models.at(i):null}releaseAllModel(){for(let i=0;i<this._models.getSize();i++)this._models.at(i).release(),this._models.set(i,null);this._models.clear()}onDrag(i,s){for(let o=0;o<this._models.getSize();o++){const m=this.getModel(o);m&&m.setDragging(i,s)}}onTap(i,s){qt.printMessage(`[APP]tap point: {x: ${i.toFixed(2)} y: ${s.toFixed(2)}}`);for(let o=0;o<this._models.getSize();o++){const m=this._models.at(o);if(m.modelSetting.getHitAreasCount()===0){qt.printMessage(`[APP]hit area: [${ae.Other}]`),m.startRandomMotion(Ii.Tap,Je.Normal,this._finishedMotion),Ui.emit(ae.Other);return}m.hitTest(ae.Head,i,s)?(qt.printMessage(`[APP]hit area: [${ae.Head}]`),m.setRandomExpression(),Ui.emit(ae.Head)):m.hitTest(ae.Left,i,s)?(qt.printMessage(`[APP]hit area: [${ae.Body+ae.Left}]`),m.startRandomLeftHandMotion(Ii.TapLeft,Je.Normal,this._finishedMotion),Ui.emit(ae.Left)):m.hitTest(ae.Right,i,s)?(qt.printMessage(`[APP]hit area: [${ae.Body+ae.Right}]`),m.startRandomRightHandMotion(Ii.TapRight,Je.Normal,this._finishedMotion),Ui.emit(ae.Right)):m.hitTest(ae.Body,i,s)&&(qt.printMessage(`[APP]hit area: [${ae.Body}]`),m.startRandomMotion(Ii.TapBody,Je.Normal,this._finishedMotion),Ui.emit(ae.Body))}}onUpdate(){const{width:i,height:s}=At.canvas,o=this._models.getSize();for(let m=0;m<o;++m){const w=new oe,T=this.getModel(m);T.getModel()&&(T.getModel().getCanvasWidth()>1&&i<s?(T.getModelMatrix().setWidth(2),w.scale(1,i/s)):w.scale(s/i,1),this._viewMatrix!=null&&w.multiplyByMatrix(this._viewMatrix)),T.update(),T.draw(w)}}prevScene(){const i=(this._sceneIndex-1)%Se.source.models.length;this.changeScene(i)}nextScene(){const i=(this._sceneIndex+1)%Se.source.models.length;this.changeScene(i)}changeScene(i){this._sceneIndex=i,qt.printMessage(`[APP]model index: ${this._sceneIndex}`);const s=Se.source.models.at(i),o=Ge.join(Se.source.path,s);let m=`${s}.model3.json`;this.releaseAllModel(),this._models.pushBack(new nl),this._models.at(0).loadAssets(o,m)}setViewMatrix(i){for(let s=0;s<16;s++)this._viewMatrix.getArray()[s]=i.getArray()[s]}}class ol{_textures;constructor(){this._textures=new wt}release(){for(let i=this._textures.begin();i.notEqual(this._textures.end());i.preIncrement())At.gl.deleteTexture(i.ptr().id);this._textures=null}createTextureFromPngFile(i,s,o){for(let w=this._textures.begin();w.notEqual(this._textures.end());w.preIncrement())if(w.ptr().fileName==i&&w.ptr().usePremultply==s){w.ptr().img=new Image,w.ptr().img.onload=()=>o(w.ptr()),w.ptr().img.src=i;return}const m=new Image;m.onload=()=>{const w=At.gl,T=w.createTexture();w.bindTexture(w.TEXTURE_2D,T),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR_MIPMAP_LINEAR),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR),s&&w.pixelStorei(w.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),w.texImage2D(w.TEXTURE_2D,0,w.RGBA,w.RGBA,w.UNSIGNED_BYTE,m),w.generateMipmap(w.TEXTURE_2D),w.bindTexture(w.TEXTURE_2D,null);const I=new ll;I!=null&&(I.fileName=i,I.width=m.width,I.height=m.height,I.id=T,I.img=m,I.usePremultply=s,this._textures.pushBack(I)),o(I)},m.src=i}releaseTextures(){for(let i=0;i<this._textures.getSize();i++)this._textures.set(i,null);this._textures.clear()}releaseTextureByTexture(i){for(let s=0;s<this._textures.getSize();s++)if(this._textures.at(s).id==i){this._textures.set(s,null),this._textures.remove(s);break}}releaseTextureByFilePath(i){for(let s=0;s<this._textures.getSize();s++)if(this._textures.at(s).fileName==i){this._textures.set(s,null),this._textures.remove(s);break}}}class ll{img;id=null;width=0;height=0;usePremultply;fileName}class gn extends oe{constructor(){super(),this._screenLeft=0,this._screenRight=0,this._screenTop=0,this._screenBottom=0,this._maxLeft=0,this._maxRight=0,this._maxTop=0,this._maxBottom=0,this._maxScale=0,this._minScale=0}adjustTranslate(i,s){this._tr[0]*this._maxLeft+(this._tr[12]+i)>this._screenLeft&&(i=this._screenLeft-this._tr[0]*this._maxLeft-this._tr[12]),this._tr[0]*this._maxRight+(this._tr[12]+i)<this._screenRight&&(i=this._screenRight-this._tr[0]*this._maxRight-this._tr[12]),this._tr[5]*this._maxTop+(this._tr[13]+s)<this._screenTop&&(s=this._screenTop-this._tr[5]*this._maxTop-this._tr[13]),this._tr[5]*this._maxBottom+(this._tr[13]+s)>this._screenBottom&&(s=this._screenBottom-this._tr[5]*this._maxBottom-this._tr[13]);const o=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,i,s,0,1]);oe.multiply(o,this._tr,this._tr)}adjustScale(i,s,o){const m=this.getMaxScale(),w=this.getMinScale(),T=o*this._tr[0];T<w?this._tr[0]>0&&(o=w/this._tr[0]):T>m&&this._tr[0]>0&&(o=m/this._tr[0]);const I=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,i,s,0,1]),N=new Float32Array([o,0,0,0,0,o,0,0,0,0,1,0,0,0,0,1]),D=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,-i,-s,0,1]);oe.multiply(D,this._tr,this._tr),oe.multiply(N,this._tr,this._tr),oe.multiply(I,this._tr,this._tr)}setScreenRect(i,s,o,m){this._screenLeft=i,this._screenRight=s,this._screenBottom=o,this._screenTop=m}setMaxScreenRect(i,s,o,m){this._maxLeft=i,this._maxRight=s,this._maxTop=m,this._maxBottom=o}setMaxScale(i){this._maxScale=i}setMinScale(i){this._minScale=i}getMaxScale(){return this._maxScale}getMinScale(){return this._minScale}isMaxScale(){return this.getScaleX()>=this._maxScale}isMinScale(){return this.getScaleX()<=this._minScale}getScreenLeft(){return this._screenLeft}getScreenRight(){return this._screenRight}getScreenBottom(){return this._screenBottom}getScreenTop(){return this._screenTop}getMaxLeft(){return this._maxLeft}getMaxRight(){return this._maxRight}getMaxBottom(){return this._maxBottom}getMaxTop(){return this._maxTop}_screenLeft;_screenRight;_screenTop;_screenBottom;_maxLeft;_maxRight;_maxTop;_maxBottom;_maxScale;_minScale}var _n;(c=>{c.CubismViewMatrix=gn})(_n||(_n={}));class ul{_texture;_vertexBuffer;_uvBuffer;_indexBuffer;_rect;_positionLocation;_uvLocation;_textureLocation;_positionArray;_uvArray;_indexArray;_firstDraw;_hitCallback;constructor(i,s,o,m,w,T){this._rect=new hl,this._rect.left=i-o*.5,this._rect.right=i+o*.5,this._rect.up=s+m*.5,this._rect.down=s-m*.5,this._texture=w,this._vertexBuffer=null,this._uvBuffer=null,this._indexBuffer=null,this._positionLocation=null,this._uvLocation=null,this._textureLocation=null,this._positionArray=null,this._uvArray=null,this._indexArray=null,this._firstDraw=!0,this._hitCallback=T}release(){this._rect=null;const i=At.gl;i.deleteTexture(this._texture),this._texture=null,i.deleteBuffer(this._uvBuffer),this._uvBuffer=null,i.deleteBuffer(this._vertexBuffer),this._vertexBuffer=null,i.deleteBuffer(this._indexBuffer),this._indexBuffer=null}getTexture(){return this._texture}render(i){if(this._texture==null)return;const s=At.gl;if(this._firstDraw){this._positionLocation=s.getAttribLocation(i,"position"),s.enableVertexAttribArray(this._positionLocation),this._uvLocation=s.getAttribLocation(i,"uv"),s.enableVertexAttribArray(this._uvLocation),this._textureLocation=s.getUniformLocation(i,"texture"),s.uniform1i(this._textureLocation,0),this._uvArray=new Float32Array([1,0,0,0,0,1,1,1]),this._uvBuffer=s.createBuffer();{const o=At.canvas.width,m=At.canvas.height;this._positionArray=new Float32Array([(this._rect.right-o*.5)/(o*.5),(this._rect.up-m*.5)/(m*.5),(this._rect.left-o*.5)/(o*.5),(this._rect.up-m*.5)/(m*.5),(this._rect.left-o*.5)/(o*.5),(this._rect.down-m*.5)/(m*.5),(this._rect.right-o*.5)/(o*.5),(this._rect.down-m*.5)/(m*.5)]),this._vertexBuffer=s.createBuffer()}this._indexArray=new Uint16Array([0,1,2,3,2,0]),this._indexBuffer=s.createBuffer(),this._firstDraw=!1}s.bindBuffer(s.ARRAY_BUFFER,this._uvBuffer),s.bufferData(s.ARRAY_BUFFER,this._uvArray,s.STATIC_DRAW),s.vertexAttribPointer(this._uvLocation,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ARRAY_BUFFER,this._vertexBuffer),s.bufferData(s.ARRAY_BUFFER,this._positionArray,s.STATIC_DRAW),s.vertexAttribPointer(this._positionLocation,2,s.FLOAT,!1,0,0),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,this._indexBuffer),s.bufferData(s.ELEMENT_ARRAY_BUFFER,this._indexArray,s.DYNAMIC_DRAW),s.bindTexture(s.TEXTURE_2D,this._texture),s.drawElements(s.TRIANGLES,this._indexArray.length,s.UNSIGNED_SHORT,0)}isHit(i,s){const{height:o}=At.canvas,m=o-s;return i>=this._rect.left&&i<=this._rect.right&&m<=this._rect.up&&m>=this._rect.down}}class hl{left;right;up;down}class cl{_startY;_startX;_lastX;_lastY;_lastX1;_lastY1;_lastX2;_lastY2;_lastTouchDistance;_deltaX;_deltaY;_scale;_touchSingle;_flipAvailable;constructor(){this._startX=0,this._startY=0,this._lastX=0,this._lastY=0,this._lastX1=0,this._lastY1=0,this._lastX2=0,this._lastY2=0,this._lastTouchDistance=0,this._deltaX=0,this._deltaY=0,this._scale=1,this._touchSingle=!1,this._flipAvailable=!1}getCenterX(){return this._lastX}getCenterY(){return this._lastY}getDeltaX(){return this._deltaX}getDeltaY(){return this._deltaY}getStartX(){return this._startX}getStartY(){return this._startY}getScale(){return this._scale}getX(){return this._lastX}getY(){return this._lastY}getX1(){return this._lastX1}getY1(){return this._lastY1}getX2(){return this._lastX2}getY2(){return this._lastY2}isSingleTouch(){return this._touchSingle}isFlickAvailable(){return this._flipAvailable}disableFlick(){this._flipAvailable=!1}touchesBegan(i,s){this._lastX=i,this._lastY=s,this._startX=i,this._startY=s,this._lastTouchDistance=-1,this._flipAvailable=!0,this._touchSingle=!0}touchesMoved(i,s){this._lastX=i,this._lastY=s,this._lastTouchDistance=-1,this._touchSingle=!0}getFlickDistance(){return this.calculateDistance(this._startX,this._startY,this._lastX,this._lastY)}calculateDistance(i,s,o,m){return Math.sqrt((i-o)*(i-o)+(s-m)*(s-m))}calculateMovingAmount(i,s){if(i>0!=s>0)return 0;const o=i>0?1:-1,m=Math.abs(i),w=Math.abs(s);return o*(m<w?m:w)}}class fl{_touchManager;_deviceToScreen;_viewMatrix;_programId;_sprites=[];constructor(){this._programId=null,this._touchManager=new cl,this._deviceToScreen=new oe,this._viewMatrix=new gn}initialize(){const{width:i,height:s}=At.canvas,o=i/s,m=-o,w=o??B0.Right,T=B0.Bottom,I=B0.Top;if(this._viewMatrix.setScreenRect(m,w,T,I),this._viewMatrix.scale(Se.scale,Se.scale),this._deviceToScreen.loadIdentity(),i>s){const N=Math.abs(w-m);this._deviceToScreen.scaleRelative(N/i,-N/i)}else{const N=Math.abs(I-T);this._deviceToScreen.scaleRelative(N/s,-N/s)}this._deviceToScreen.translateRelative(-i*.5,-s*.5),this._viewMatrix.setMaxScale(ar.Max),this._viewMatrix.setMinScale(ar.Min),this._viewMatrix.setMaxScreenRect(e0.Left,e0.Right,e0.Bottom,e0.Top)}release(){this._viewMatrix=null,this._touchManager=null,this._deviceToScreen=null,this._sprites.forEach(i=>i.release()),this._sprites=[],At.gl.deleteProgram(this._programId),this._programId=null}render(){const i=At.gl;i.useProgram(this._programId),this._sprites.forEach(o=>o.render(this._programId)),i.flush();const s=hi.getInstance();s.setViewMatrix(this._viewMatrix),s.onUpdate()}addSprite(i,s,o,m){At.getInstance().getTextureManager().createTextureFromPngFile(i,!1,T=>{const{width:I,height:N}=At.canvas,D=s?s.x:I-T.width*.5,V=s?s.y:N-T.height*.5,A=o?o.width:T.width,G=o?o.height:T.height,W=new ul(D,V,A,G,T.id,m);this._sprites.push(W)})}initializeSprite(){this._programId===null&&(this._programId=At.getInstance().createShader())}onTouchesBegan(i,s){this._touchManager.touchesBegan(i,s)}onTouchesMoved(i,s){const o=this.transformViewX(this._touchManager.getX()),m=this.transformViewY(this._touchManager.getY());this._touchManager.touchesMoved(i,s),hi.getInstance().onDrag(o,m)}onTouchesEnded(i,s){const o=hi.getInstance();o.onDrag(0,0);{const m=this._deviceToScreen.transformX(this._touchManager.getX()),w=this._deviceToScreen.transformY(this._touchManager.getY());"ontouchend"in At.canvas&&qt.printMessage(`[APP]touchesEnded x: ${m} y: ${w}`),o.onTap(m,w),this._sprites.forEach(T=>{T.isHit(i,s)&&T._hitCallback()})}}transformViewX(i){const s=this._deviceToScreen.transformX(i);return this._viewMatrix.invertTransformX(s)}transformViewY(i){const s=this._deviceToScreen.transformY(i);return this._viewMatrix.invertTransformY(s)}transformScreenX(i){return this._deviceToScreen.transformX(i)}transformScreenY(i){return this._deviceToScreen.transformY(i)}}class At{_cubismOption;_view;_captured;_mouseX;_mouseY;_isEnd;_textureManager;static _instance=null;static _frameBuffer=null;static _canvas=null;static _gl=null;static get canvas(){return this._canvas}static set canvas(i){this._canvas=i}static get gl(){return this._gl}static set gl(i){this._gl=i}static get frameBuffer(){return this._frameBuffer}constructor(){this._captured=!1,this._mouseX=0,this._mouseY=0,this._isEnd=!1,this._cubismOption=new co,this._view=new fl,this._textureManager=new ol}static getInstance(){return this._instance==null&&(this._instance=new At),this._instance}static releaseInstance(){this._instance!=null&&this._instance.release(),this._instance=null}static set frameBuffer(i){this._frameBuffer=i}initialize(){const i=At.canvas=document.createElement("canvas");Se.canvas==="auto"?this._resizeCanvas():(i.width=Se.canvas.width||i.width,i.height=Se.canvas.height||i.height),this.mount();const s=At.gl=i.getContext("webgl")||i.getContext("experimental-webgl");return s?(At.frameBuffer||(At.frameBuffer=s.getParameter(s.FRAMEBUFFER_BINDING)),s.enable(s.BLEND),s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA),this.onEvent(),this._view.initialize(),this.initializeCubism(),!0):(alert("Cannot initialize WebGL. This browser does not support."),At.gl=null,document.body.innerHTML="This browser does not support the <code>&lt;canvas&gt;</code> element.",!1)}mount(){Se.target.appendChild(At.canvas)}onEvent(){const i=At.canvas;"ontouchend"in i?(i.ontouchstart=ml,i.ontouchmove=pl,i.ontouchend=yl,i.ontouchcancel=Al):(i.onmousedown=gl,i.onmousemove=_l,i.onmouseup=dl)}onResize(){this._resizeCanvas(),this._view.initialize(),this._view.initializeSprite();const{width:i,height:s}=At.canvas;At.gl.viewport(0,0,i,s)}release(){this._textureManager.release(),this._textureManager=null,this._view.release(),this._view=null,hi.releaseInstance(),Wt.dispose()}run(){const i=()=>{if(At._instance==null)return;qt.updateTime();const s=At.gl;s.clearColor(0,0,0,0),s.enable(s.DEPTH_TEST),s.depthFunc(s.LEQUAL),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT),s.clearDepth(1),s.enable(s.BLEND),s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA),this._view.render(),requestAnimationFrame(i)};i()}createShader(){const i=At.gl,s=i.createShader(i.VERTEX_SHADER);if(s===null)return qt.printMessage("failed to create vertexShader"),null;const o=`
        precision mediump float;
        attribute vec3 position;
        attribute vec2 uv;
        varying vec2 vuv;
        void main(void)
        {
           gl_Position = vec4(position, 1.0);
           vuv = uv;
        }
      `;i.shaderSource(s,o),i.compileShader(s);const m=i.createShader(i.FRAGMENT_SHADER);if(m==null)return qt.printMessage("failed to create fragmentShader"),null;const w=`
        precision mediump float;
        varying vec2 vuv;
        uniform sampler2D texture;
        void main(void)
        {
           gl_FragColor = texture2D(texture, vuv);
        }
      `;i.shaderSource(m,w),i.compileShader(m);const T=i.createProgram();return i.attachShader(T,s),i.attachShader(T,m),i.deleteShader(s),i.deleteShader(m),i.linkProgram(T),i.useProgram(T),T}getView(){return this._view}getTextureManager(){return this._textureManager}initializeCubism(){this._cubismOption.logFunction=qt.printMessage,this._cubismOption.loggingLevel=Ei.LogLevel_Error,Wt.startUp(this._cubismOption),Wt.initialize(),hi.getInstance(),qt.updateTime(),this._view.initializeSprite()}_resizeCanvas(){At.canvas.width=window.innerWidth,At.canvas.height=window.innerHeight}}function gl(c){if(!At.getInstance()._view){qt.printMessage("view notfound");return}At.getInstance()._captured=!0;const i=c.pageX,s=c.pageY;At.getInstance()._view.onTouchesBegan(i,s)}function _l(c){if(!At.getInstance()._captured)return;if(!At.getInstance()._view){qt.printMessage("view notfound");return}const i=c.target.getBoundingClientRect(),s=c.clientX-i.left,o=c.clientY-i.top;At.getInstance()._view.onTouchesMoved(s,o)}function dl(c){if(At.getInstance()._captured=!1,!At.getInstance()._view){qt.printMessage("view notfound");return}const i=c.target.getBoundingClientRect(),s=c.clientX-i.left,o=c.clientY-i.top;At.getInstance()._view.onTouchesEnded(s,o)}function ml(c){if(!At.getInstance()._view){qt.printMessage("view notfound");return}At.getInstance()._captured=!0;const i=c.changedTouches[0].pageX,s=c.changedTouches[0].pageY;At.getInstance()._view.onTouchesBegan(i,s)}function pl(c){if(!At.getInstance()._captured)return;if(!At.getInstance()._view){qt.printMessage("view notfound");return}const i=c.target.getBoundingClientRect(),s=c.changedTouches[0].clientX-i.left,o=c.changedTouches[0].clientY-i.top;At.getInstance()._view.onTouchesMoved(s,o)}function yl(c){if(At.getInstance()._captured=!1,!At.getInstance()._view){qt.printMessage("view notfound");return}const i=c.target.getBoundingClientRect(),s=c.changedTouches[0].clientX-i.left,o=c.changedTouches[0].clientY-i.top;At.getInstance()._view.onTouchesEnded(s,o)}function Al(c){if(At.getInstance()._captured=!1,!At.getInstance()._view){qt.printMessage("view notfound");return}const i=c.target.getBoundingClientRect(),s=c.changedTouches[0].clientX-i.left,o=c.changedTouches[0].clientY-i.top;At.getInstance()._view.onTouchesEnded(s,o)}class dn{static eventListener={[ae.Head]:[],[ae.Body]:[],[ae.Left]:[],[ae.Right]:[],[ae.Other]:[]};static get model(){return At.getInstance()}static get scene(){return hi.getInstance()}static get view(){return this.model.getView()}static async init(i){i&&no(i),this.model.initialize()&&(this.model.run(),this.listener())}static async release(){return this.model.release()}static listener(){window.addEventListener("beforeunload",()=>At.releaseInstance()),window.addEventListener("resize",()=>Se.canvas==="auto"&&this.model.onResize())}static on(i,s){this.eventListener[i]?.push(s)}static emit(i){this.eventListener[i]?.forEach(s=>s())}}var Ui=dn;export{ae as HitArea,dn as Live2dWidget,Ui as default};
//# sourceMappingURL=live2dWidget.esm.js.map
